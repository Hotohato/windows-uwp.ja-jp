---
title: ユーザー アクティビティのベスト プラクティス
description: このガイドでは、作成とユーザー アクティビティの更新について推奨される方法について説明します。
keywords: ユーザー アクティビティ、ユーザー アクティビティ、タイムライン、Cortana の前回終了した位置から再開する、Cortana の前回終了した位置から再開する、Project Rome
ms.date: 08/23/2018
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: e98f5d73cf2d1afb26a823ed417c8980d118485c
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57589907"
---
# <a name="user-activities-best-practices"></a>ユーザー アクティビティのベスト プラクティス

このガイドでは、作成とユーザー アクティビティの更新について推奨される方法について説明します。 Windows 上のユーザー アクティビティの機能の概要については、次を参照してください。[デバイス間であってもユーザーの利用状況を引き続き](https://docs.microsoft.com/windows/uwp/launch-resume/useractivities)します。 またはを参照してください、[ユーザー Activities セクションに](https://docs.microsoft.com/windows/project-rome/user-activities/)の他の開発プラットフォームでのアクティビティの実装のためのプロジェクト ローマします。

## <a name="when-to-create-or-update-user-activities"></a>作成またはユーザー アクティビティを更新するタイミング

すべてのアプリが異なるため、各開発者がユーザーのアクティビティに、アプリ内のアクションをマップする最善の方法を決定するは。 ユーザー アクティビティは、Cortana とタイムライン、過去に訪問したコンテンツに戻る手助け増加のユーザーの生産性と効率性に注目しているで紹介されます。

**一般的なガイドライン**

* **関連ユーザーのアクションのグループの 1 つのアクティビティを記録します。** これは、音楽の再生リストまたはテレビ番組用に特に関連します。 1 つのアクティビティは、ユーザーの進行状況を反映するために定期的に更新できます。 この場合は、複数の日または週で engagement の期間を表す複数の履歴項目を含む 1 つのユーザー アクティビティがあります。 ユーザーがアプリ内で段階的な進行状況をにより、ドキュメント ベースのアクティビティにも当てはまります。
* **ユーザー データをクラウドに格納します。** クロス デバイスの動作をサポートする場合は、このアクティビティに再び関心を引きに必要なコンテンツがクラウドの場所に格納されているかどうかを確認する必要があります。 デバイス固有のアクティビティはタイムライン上に表示デバイス アクティビティが作成されたが、他のデバイスに表示されません。
* **ユーザーが再開する必要はありませんアクションのアクティビティを作成できません。** 場合は、アプリケーションを使用すると、状態は保持されない単純な 1 回限りの操作を完了すると、おそらくユーザー アクティビティを作成する必要はありません。
* **他のユーザーによって完了したアクションのアクティビティを作成できません。** 外部アカウントは、ユーザー メッセージを送信した場合または@-mentionsに、アプリ内で作成しないようにするアクティビティの。 この種類のアクションがアクション センターの通知によって方します。
  * コラボレーションのシナリオには例外です。場合は、まとめて (Word 文書) など、同じアクティビティに複数のユーザーの作業を別のユーザーが変更を行った後、ユーザーの場合があります。 この場合は、ドキュメントに加えられた変更を反映するように既存のアクティビティを更新することがあります。 これは新しい履歴項目を作成することがなく既存のユーザー アクティビティのコンテンツ データを更新する必要があります。

**特定の種類のアプリのためのガイドライン**

すべてのアプリは異なるが、ほとんどのアプリは対話パターンを次のいずれかに分類されます。
* **ドキュメント ベース アプリ**— 使用の期間を反映した 1 つまたは複数の履歴項目を含む、ドキュメントごとに 1 つのアクティビティを作成します。 ドキュメントへの変更が加えられると、アクティビティの更新に重要です。
* **ゲーム**— 各ゲームの保存または世界中の 1 つのアクティビティを作成します。 ゲームでは、レベルの 1 つのシーケンスのみをサポートする場合が、最新の進行状況や成果を表示するコンテンツのデータを更新することができますに、時間の経過と共に同じアクティビティを再パブリッシュできます。
* **ユーティリティ アプリ**-ユーザーがのままにし、再開する必要がある、アプリ内で何もない場合は、ユーザー アクティビティを使用する必要はありません。 その良い例では、電卓のような簡単なアプリが。
* **基幹業務アプリ**— 多くのアプリが単純なタスク、またはワークフローを管理するために存在します。 アプリを使用してアクセス別ワークフローごとに 1 つのアクティビティを作成する (たとえば、経費レポートを別のアクティビティごとになりますしているユーザーでしたし、アクティビティをクリックして、特定のレポートが承認されたかどうかを参照してください)。
* **メディア再生アプリ**-コンテンツ (再生リスト、プログラム、またはスタンドアロンのコンテンツ) などの論理的なグループごとに 1 つのアクティビティを作成します。 アプリ開発者のための基になる質問は、スタンドアロンのコンテンツまたはコレクションの一部として、各部分のコンテンツ (の TV ドラマ、曲) をカウントするかどうか。 一般的な規則として、ユーザーが選んだコレクションまたは連続したコンテンツを再生する場合、コレクション全体がアクティビティ。 1 つのコンテンツを再生することを選択する場合は、その 1 つのコンテンツがアクティビティです。 次の具体的なガイドラインを参照してください。
  * **音楽:アルバム、アーティスト、/ジャンル**、アルバム、アーティスト、ジャンルやヒットかどうか、ユーザーが選択されます**再生**、そのコレクションは、アクティビティは各曲の別個のアクティビティを作成しないでください。 1 つのアルバムのような短いコレクションまたはランダムな順序で再生されるコレクションの場合、ユーザーの現在の位置を反映するようにアクティビティを更新することがあります必要ありません。 アルバムまたは再生リストなどの時間の長い連続再生は、アルバム内の位置を記録する必要があります。
  * **音楽: スマート再生リスト**: ランダムな順序で音楽を再生するアプリケーションは、その再生リストの 1 つのアクティビティを記録する必要があります。 ユーザーは、もう一度再生リストを再生する場合、は、同じアクティビティに関する追加の履歴レコードを作成します。 ランダムな順序があるために、再生リスト内のユーザーの現在位置を記録する必要はありません。
  * **テレビのシリーズ**-現在の 1 つが完了したら、次のエピソードを再生するアプリを構成する場合は、テレビのシリーズの 1 つのアクティビティを書き込む必要があります。 表示セッションをまたいでさまざまな放送を再生する場合に、シリーズでは、現在の位置を反映するように、アクティビティを更新してと複数の履歴レコードが作成されます。
  * **ムービー** -ムービーは、1 つのコンテンツと、独自の履歴レコードがあります。 ユーザーは、ムービーの途中の視聴を停止する場合は、それらの位置を記録することをお勧めします。 後で再開するときにアクティビティが中断した場所、映画を再開または先頭から開始または再開するかどうか、ユーザーが要求もでした。

## <a name="user-activity-design"></a>ユーザー アクティビティのデザイン

ユーザーのアクティビティは、3 つのコンポーネントで構成されています。 アクティブ化の URI、ビジュアルのデータとコンテンツのメタデータ。
* アクティブ化 URI は、特定のコンテキストでアプリケーションを再開するには、アプリケーションまたはエクスペリエンスに渡すことができる URI です。 通常、これらのリンクは、スキーム (たとえば、"my-app://page2?action=edit") のプロトコル ハンドラーの形をとります。 URI パラメーターをアプリによって処理する方法を決定する開発者の責任です。 参照してください[URI の処理のアクティブ化](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)詳細についてはします。
* 必須および省略可能なプロパティのセットで構成される、ビジュアルのデータ (例: タイトル、説明、またはアダプティブ カード要素)、アクティビティを視覚的に識別できるようにします。 アクティビティのアダプティブ カード ビジュアルの作成に関するガイドラインについては以下をご覧ください。
* コンテンツのメタデータは、JSON データをグループ化し、特定のコンテキスト内のアクティビティを取得するために使用できます。 通常、これのフォームをかかります http://schema.orgデータ。 このデータの入力に関するガイドラインについては以下をご覧ください。

### <a name="adaptive-card-design-guidelines"></a>アダプティブ カードのデザイン ガイドライン

使用して表示されるアクティビティがタイムラインが表示されたら、[アダプティブ カード フレームワーク](https://docs.microsoft.com/adaptive-cards/)します。 開発者は、アダプティブのカードをアクティビティごとに提供しない場合のタイムラインは自動的にアプリの名前/アイコン、必須のタイトル フィールドおよびオプションの説明フィールドに基づく単純なカードを作成します。 

アプリ開発者は、単純なアダプティブ カード JSON スキーマを使用してカスタム カードを提供することが推奨されます。 参照してください、 [Adaptive Cards ドキュメント](https://docs.microsoft.com/adaptive-cards/authoring-cards/getting-started)アダプティブ カード オブジェクトを構築する方法についての技術です。 以下のユーザー アクティビティの Adaptive Cards を設計するためのガイドラインを参照してください。
* イメージを使用します。
  * 可能であれば、それぞれのアクティビティの一意のイメージを使用します。 アクティビティのカードの横にある、アプリケーション名とアイコンを表示する、自動的にその他のイメージはユーザーが探しているアクティビティの検索に役立ちます。
  * イメージがテキストを含める必要がありますいない読み取りに想定されるユーザー。 このテキストを使用して、アクセシビリティのニーズを持つユーザーを使用できず、検索することはできません。
  * イメージは、テキストが含まれていないし、2 対 1 の比率に関するトリミングすることができます、背景画像として使用する必要があります。 これにより、タイムラインで目立たは太字アクティビティ カード。 イメージは、テキストが、カードに表示されると、のみサイズの小さいテキストは読みになると、アクティビティ名をここでは、使用することが推奨されます少し暗くされます。
  * 2:1 には、イメージがトリミングされることはできない場合、は、アクティビティのカード内に配置する必要があります。  
    * 縦横比が正方形または縦向きの場合は、余白なしでカードの右側にあるイメージを固定します。
    * 縦横比が横である場合は、カードの右上隅にイメージを固定します。
* 常に表示されるアクティビティ名を指定するには、各アクティビティが必要です。
  * この名前は、大きな太字テキストのオプションを使用してカードの左上隅に表示する必要があります。 これは、唯一の名前がわかりやすい重要 Cortana のシナリオで、アクティビティが表示されている場合、一部のユーザーが表示されます。 タイムラインで同じ名前を表示すると、大量の活動の参照をユーザーに簡単にできます。
* タイムラインでユーザーがアプリのアクティビティを簡単に見つけられるように、アプリからのアクティビティのすべての同じ visual スタイルを使用します。
  * たとえば、アクティビティする必要がありますすべてを使用して、同じ背景色。
* 補足テキスト情報を慎重に使用します。 
  * テキストのカードを防ぐし、のみ適切なアクティビティの検索を支援または (など、特定のタスクの現在の進行状況) の状態情報を反映する補足情報を使用します。

### <a name="content-metadata-guidelines"></a>コンテンツのメタデータのガイドライン

ユーザーのアクティビティは、Windows と Cortana は、アクティビティを分類および推定を生成するために使用、コンテンツのメタデータを含めることもできます。 (ユーザーがさまざまなアプリや web サイトの間での特定の製品をショッピング) の場合、アクティビティを場所 (この場合、ユーザーは、休暇を現在調査中です)、オブジェクト (ユーザーでは何かを調査して) 場合やアクションなどの特定のトピックをグループ化し、ことができます。 表す、名詞と動詞のアクティビティに関連することをお勧めします。 

次の例では、次の標準の JSON コンテンツのメタデータで[Schema.org](https://schema.org/)シナリオを示しています。「John に、Steve である怒っている鳥が再生」。

```json
// John played angry birds with Steve.
{
  "@context": "http://schema.org",
  "@type": "PlayAction",
  "agent": {
    "@type": "Person",
    "name": "John"
  },
  "object": {
    "@type": "MobileApplication",
    "name": "Angry Birds."
  },
  "participant": {
    "@type": "Person",
    "name": "Steve"
  }
}
```

## <a name="key-apis"></a>キー API

* [UserActivities 名前空間](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities)

## <a name="related-topics"></a>関連トピック

* [ユーザー アクティビティ (プロジェクト ローマ docs)](https://docs.microsoft.com/windows/project-rome/user-activities/)
* [アダプティブ カード](https://docs.microsoft.com/adaptive-cards/)
* [アダプティブ カード ビジュアライザー、サンプル](https://adaptivecards.io/)
* [URI のアクティブ化の処理](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)
* [お客様の Microsoft Graph、アクティビティ フィード、および Adaptive Cards を使用して任意のプラットフォームとの連携](https://channel9.msdn.com/Events/Connect/2017/B111)
* [Microsoft Graph](https://developer.microsoft.com/graph/)
