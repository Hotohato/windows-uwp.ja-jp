---
author: PatrickFarley
title: ユーザー アクティビティのベスト プラクティス
description: このガイドでは、作成およびユーザー アクティビティを更新するための推奨事項について説明します。
keywords: ユーザー アクティビティ、ユーザー アクティビティ、タイムライン、Cortana の前回終了した位置から再開する、Cortana の前回終了した位置から再開する、Project Rome
ms.author: pafarley
ms.date: 08/23/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
ms.localizationpriority: medium
ms.openlocfilehash: b11151df981a4b5ce233458581d21e405be9844c
ms.sourcegitcommit: e16c9845b52d5bd43fc02bbe92296a9682d96926
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/19/2018
ms.locfileid: "4962116"
---
# <a name="user-activities-best-practices"></a>ユーザー アクティビティのベスト プラクティス

このガイドでは、作成およびユーザー アクティビティを更新するための推奨事項について説明します。 Windows では、ユーザー アクティビティ機能の概要については、[デバイス間でも、続行するユーザーのアクティビティ](https://docs.microsoft.com/windows/uwp/launch-resume/useractivities)を参照してください。 または、他の開発プラットフォームでアクティビティの実装は"rome"プロジェクトの[ユーザー アクティビティのセクション](https://docs.microsoft.com/windows/project-rome/user-activities/)を参照してください。

## <a name="when-to-create-or-update-user-activities"></a>ユーザー活動作成または更新します。

すべてのアプリが異なるため、それがユーザーのアクティビティに、アプリ内での操作をマップする最善の方法を判断するには、各開発者。 ユーザー アクティビティは、過去に訪問したコンテンツに戻ってにサポートすることで増加のユーザーの生産性と効率に重点を置いて Cortana とタイムラインに展示されます。

**一般的なガイドライン**

* **関連するユーザーの操作のグループの 1 つのアクティビティを記録します。** これは特に音楽の再生リストまたはテレビを示しています。 1 つのアクティビティは、ユーザーの進行状況を反映するように定期的に更新できます。 この例では、複数の日または週エンゲージメントの期間を表す複数の履歴項目を 1 つのユーザー アクティビティがあります。 ユーザーがアプリ内で段階的な進行状況をにより、ドキュメント ベースのアクティビティにも当てはまります。
* **ユーザー データをクラウドに格納します。** クロス デバイスの動作をサポートする場合は、このアクティビティを再エンゲージメントに必要なコンテンツがクラウド ストレージの場所に格納されているかどうかを確認する必要があります。 デバイス固有のアクティビティが表示されるタイムラインのデバイスで、アクティビティが作成されたが他のデバイスでされない可能性があります。
* **ユーザーが再開する必要はありませんアクションの活動は作成されません。** 使用する場合、アプリケーションの状態を保持しないシンプルで 1 回限りの操作を完了する、する可能性がありますする必要はありませんユーザー アクティビティを作成します。
* **他のユーザーが完了したアクションの活動は作成されません。** 外部のアカウントは、ユーザー メッセージを送信した場合または@-mentionsに、アプリ内でする必要がありますいないアクティビティを作成するためです。 この種類の操作は、アクション センターの通知申し込むが向上します。
  * 共同作業のシナリオは、例外: 複数のユーザーは動作しない場合は同じアクティビティにまとめて (Word 文書) がありますが別のユーザーが変更を行った後、ユーザーの場合。 この例では、ドキュメントに加えられた変更を反映するように、既存のアクティビティを更新することがあります。 これにより、新しい項目の履歴を作成することがなく、既存のユーザーのアクティビティ コンテンツ データの更新が含まれます。

**特定の種類のアプリのガイドライン**

すべてのアプリはさまざまなが、ほとんどのアプリは、次の対話式操作パターンのいずれかに分類されます。
* **アプリのドキュメントに基づく**-使用の期間を反映して 1 つまたは複数の履歴項目のドキュメント、あたり 1 つのアクティビティを作成します。 ドキュメントに対する変更として、アクティビティを更新する重要です。
* **ゲーム**: ゲームのセーブまたは世界ごとに 1 つのアクティビティを作成します。 ゲームのレベルの 1 つのシーケンスのみをサポートする場合、最新の進行状況や実績を表示するコンテンツのデータを更新することができますに、時間の経過と共には同じアクティビティを再公開できます。
* **ユーティリティ アプリ**-ユーザーのままにし、再開する必要がありますアプリ内で何もがある場合は、ユーザー アクティビティを使用する必要はありません。 適切な例では、電卓などの単純なアプリです。
* **基幹業務アプリ**などの単純なタスクまたはワークフローを管理するための多くのアプリが存在します。 独立したワークフローがアプリを使用してアクセスごとに 1 つのアクティビティを作成する (たとえば、経費レポートをそれぞれ別のアクティビティがあるとしているユーザーは特定のレポートが承認されたかどうかに表示するためのアクティビティをクリックして可能性があります)。
* **メディア再生アプリ**: (再生リスト、プログラム、またはスタンドアロン コンテンツ) などのコンテンツの論理グループごとに 1 つのアクティビティを作成します。 アプリの開発者の基になる質問は、スタンドアロン コンテンツまたはコレクションの一部としてコンテンツ (テレビ エピソード、曲) の各要素をカウントするかどうか。 一般に、ユーザーが選んだコレクションまたは、順序付けされたコンテンツを再生する場合、全体としてコレクションはアクティビティです。 1 つのコンテンツを再生することを選択する場合は、アクティビティが、1 つのコンテンツの。 次の具体的なガイドラインを参照してください。
  * **音楽: アルバムやアーティスト/ジャンル**: ユーザーは、アルバム、アーティスト、またはジャンルを選択し、**再生**に達した、そのコレクションがアクティビティ。それぞれの曲の別のアクティビティを書き込むできません。 1 つのアルバムのように短いコレクションまたはコレクション ランダムな順序で再生中の場合は、ユーザーの現在の位置を反映するように活動を更新する必要がありますされません。 長いシーケンシャルの再生、アルバムや再生リストなどでは、アルバム内の位置を記録する必要があります。
  * **音楽: 再生リストのスマート**-ランダムな順序で音楽を再生するアプリケーションは、再生リストの 1 つのアクティビティを記録する必要があります。 ユーザーは、2 つ目の時間、再生リストを再生する場合、は、同じアクティビティに関する追加の履歴レコードを作成します。 ランダムな順序があるために、再生リスト内のユーザーの現在の位置を記録する必要はありません。
  * **テレビ シリーズ**: アプリが現在の 1 つが完了した後、次のエピソードを再生する構成されている場合は、テレビのシリーズの 1 つのアクティビティを作る必要があります。 表示の複数のセッション間でさまざまなエピソードを再生する場合に、シリーズでは、現在の位置を反映するように、アクティビティを更新し、複数の履歴レコードが作成されます。
  * **ビデオ**: ビデオ コンテンツを 1 つ、独自の履歴レコードが存在する必要があります。 ユーザーは、映画の一部方法を通じてをウォッチを停止する場合は、自分の位置を記録することをお勧めします。 今後、再開を希望する場合は、アクティビティが中断した場所、ムービーを再開後または再開またはから開始するかどうか、ユーザーにも確認できませんでした。

## <a name="user-activity-design"></a>ユーザー アクティビティの設計

ユーザー アクティビティは、次の 3 つのコンポーネントで構成される: アクティブ化 URI、ビジュアルのデータとコンテンツのメタデータ。
* アクティブ化 URI は、特定のコンテキストでアプリケーションを再開するためには、アプリケーションまたはエクスペリエンスを渡すことができる URI です。 通常、これらのリンクは、スキーム (たとえば、"my-app://page2?") のプロトコル ハンドラーの形式を実行します。 自分のアプリでの URI パラメーターの処理方法を判断する開発者がします。 詳細については、[処理の URI のアクティブ化](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)を参照してください。
* 必須およびオプションのプロパティのセットで構成されるビジュアルのデータ (例: タイトル、説明、またはアダプティブ カード要素)、ユーザー アクティビティを視覚的に識別できるようにします。 アダプティブ カードの視覚効果を作成する、アクティビティのガイドラインについては以下をご覧ください。
* コンテンツのメタデータは、グループ化し、特定のコンテキストでアクティビティを取得して使用できる JSON データです。 形式は通常、このかかるhttp://schema.orgデータ。 このデータへの入力のガイドラインについて以下をご覧ください。

### <a name="adaptive-card-design-guidelines"></a>アダプティブ カードの設計ガイドライン

アクティビティがタイムラインに表示されたら、[アダプティブ カードのフレームワーク](https://docs.microsoft.com/adaptive-cards/)を使用して表示されます。 開発者がアクティビティごとにアダプティブ カードいない場合は、タイムラインはアプリの名前/アイコン、必須のタイトル フィールド、およびオプションの説明フィールドに基づいて、簡単なカードを自動的に作成します。 

アプリ開発者は、単純なアダプティブ カード JSON スキーマを使用してカスタムのカードを提供することをお勧めします。 アダプティブ カード オブジェクトを作成する方法の技術的な手順については、[アダプティブ カードのドキュメント](https://docs.microsoft.com/adaptive-cards/authoring-cards/getting-started)を参照してください。 ユーザー アクティビティでアダプティブ カードの設計については、以下のガイドラインを参照してください。
* イメージを使用します。
  * 可能であれば、アクティビティごとに固有のイメージを使用します。 アプリケーション名、アイコンが自動的に表示されますアクティビティのカードの横にあります。追加の画像はユーザーが探していたアクティビティを検索に役立ちます。
  * イメージは、テキストを含めないでください読み取りをユーザーに期待されます。 このテキストは、アクセシビリティのニーズを持つユーザーが利用できることはできません、検索できません。
  * イメージは、テキストが含まれていないし、2:1 の比率に関するにトリミングされることができますは、背景画像として使用する必要があります。 これにより、タイムラインに目立つ太字アクティビティ カード。 イメージは、テキストは、カードに表示されたままおよびのみ小さいテキストに読みにくくなると、アクティビティの名前をここでは、使用することをお勧めすること少し暗くされます。
  * 2:1 には、画像がトリミングされることはできない場合、は、アクティビティ カード内に配置する必要があります。  
    * 縦横比が正方形または縦向きの場合は、余白なしで、カードの右側にあるイメージを固定します。
    * 縦横比が横の場合は、カードの右上隅にイメージを固定します。
* 各アクティビティが常に表示されるアクティビティの名前を付ける必要です。
  * この名前は、太字の大規模なオプションを使用して、カードの左上隅に表示する必要があります。 これは、のみ名前はわかりやすい重要 Cortana のシナリオで、アクティビティが表示されている場合一部のユーザーに表示されます。 タイムラインに同じ名前を示すと、ユーザーが大量の活動を参照するやすくなります。
* タイムラインのユーザーがアプリのアクティビティを簡単に見つけられるように、すべてのアプリでは、アクティビティの同じ視覚スタイルを使用します。
  * たとえば、アクティビティする必要がありますすべて同じ背景色が使用されます。
* 補足的なテキスト情報を慎重に使用します。 
  * テキスト、カードの入力を回避し、適切なアクティビティの検出にユーザーを支援を反映して、状態情報 (特定のタスクで現在の進行状況) などの補足情報にのみ使用します。

### <a name="content-metadata-guidelines"></a>コンテンツのメタデータのガイドライン

ユーザー アクティビティでは、コンテンツのメタデータは、Windows や Cortana を使用して、アクティビティの分類推論の生成も格納できます。 (この場合、ユーザーは、さまざまなアプリや web サイト間で特定の製品のショッピング)、アクティビティを場所 (ある場合、ユーザーが休暇を調査中)、(ユーザーには、何かが現在調査中です) 場合は、オブジェクトまたはアクションなどの特定のトピックをグループ化し、ことができます。 名詞とアクティビティに関連する動詞の両方を表すことをお勧めします。 

次の例では、コンテンツのメタデータの[Schema.org](https://schema.org/)標準の次の JSON はシナリオを表します:"John をプレイ怒り鳥 Steve。"。

```json
// John played angry birds with Steve.
{
  "@context": "http://schema.org",
  "@type": "PlayAction",
  "agent": {
    "@type": "Person",
    "name": "John"
  },
  "object": {
    "@type": "MobileApplication",
    "name": "Angry Birds."
  },
  "participant": {
    "@type": "Person",
    "name": "Steve"
  }
}
```

## <a name="key-apis"></a>キー API

* [UserActivities 名前空間](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities)

## <a name="related-topics"></a>関連トピック

* [ユーザー アクティビティ ("rome"プロジェクト ドキュメント)](https://docs.microsoft.com/windows/project-rome/user-activities/)
* [アダプティブ カード](https://docs.microsoft.com/adaptive-cards/)
* [アダプティブ カード ビジュアライザー、サンプル](http://adaptivecards.io/)
* [URI のアクティブ化の処理](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)
* [Microsoft Graph、アクティビティ フィード、およびアダプティブ カードを使用して、どのプラットフォームでも顧客の関心を惹きつける](https://channel9.msdn.com/Events/Connect/2017/B111)
* [Microsoft Graph](https://developer.microsoft.com/graph/)
