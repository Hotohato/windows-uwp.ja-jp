---
title: グラフィックス パイプライン
description: Direct3D グラフィックス パイプラインは、リアルタイム ゲーム アプリケーション用のグラフィックスを生成できるように設計されています。 データは、構成可能またはプログラミング可能な各ステージを通じて、入力から出力へと流れます。
ms.assetid: C9519AD0-5425-48BD-9FF4-AED8959CA4AD
keywords:
- グラフィックス パイプライン
- パイプラインのステージ
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: d4a362a3a7be06e48c64ce3e4d43ff917b9b24c5
ms.sourcegitcommit: 70ab58b88d248de2332096b20dbd6a4643d137a4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/01/2018
ms.locfileid: "5929639"
---
# <a name="graphics-pipeline"></a>グラフィックス パイプライン


Direct3D グラフィックス パイプラインは、リアルタイム ゲーム アプリケーション用のグラフィックスを生成できるように設計されています。 データは、構成可能またはプログラミング可能な各ステージを通じて、入力から出力へと流れます。

すべてのステージは、Direct3D API を使用して構成できます。 一般的なシェーダー コア (角丸四角形のブロック) の機能を利用するステージは、[HLSL](https://msdn.microsoft.com/library/windows/desktop/bb509561) プログラミング言語を使用することによってプログラミングできます。 これにより、パイプラインは柔軟性および適応性が非常に高くなっています。

最もよく使用されるのは、頂点シェーダー (VS) ステージとピクセル シェーダー (PS) ステージです。 これらのシェーダー ステージを用意しない場合は、既定の何もしない、パススルー頂点シェーダーとピクセル シェーダーが使われます。

![Direct3D 11 のプログラム可能なパイプラインでのデータ フローの図](images/d3d11-pipeline-stages.jpg)

## <a name="input-assembler-stage"></a>入力アセンブラー ステージ

|-|-| |目的 |[入力アセンブラー (IA) ステージ](input-assembler-stage--ia-.md)装置プリミティブと、三角形、線、点などのパイプラインに隣接性データなどのセマンティクス Id を既にされていないプリミティブの処理を減らすことにより、シェーダーの効率をヘルプ処理します |。|入力 |プリミティブ データ (三角形、線、点)、メモリ内のユーザーが入力したバッファーからです。 隣接性データが含まれる場合もあります。 各三角形の 3 つの頂点と三角形ごとに隣接性データが 3 つの頂点、三角形になります |。|出力 |システム生成値 (プリミティブ ID、インスタンス ID、頂点 ID など) を添付されたプリミティブ |。

## <a name="vertex-shader-stage"></a>頂点シェーダー ステージ

|-|-| |目的 |[頂点シェーダー (VS) ステージ](vertex-shader-stage--vs-.md)は、頂点を処理し、スキン、照明の適用、変換の適用などの操作を実行します。 頂点シェーダーは 1 つの入力頂点を受け取り、1 つの出力頂点を生成します。 変換、スキン適用、変形、頂点ごとの照明などの頂点ごとの個別の操作 |。|入力 |1 つの頂点、システム生成値 VertexID と InstanceID とします。 最大 16 個の 32 ビット ベクトル (それぞれ最大 4 コンポーネント) の各頂点シェーダーの入力頂点を構成できます |。|出力 |1 つの頂点。 16 個の 32 ビット 4 成分のベクトルの各出力頂点を構成できます |。
 
## <a name="hull-shader-stage"></a>ハル シェーダー ステージ
 
|-|-| |目的 |[ハル シェーダー (HS) ステージ](hull-shader-stage--hs-.md)では、効率的に多数の三角形、モデルの 1 つのサーフェスに分割する、テセレーション ステージの 1 つです。 ハル シェーダーは、パッチごとに 1 回呼び出され、低次サーフェスを定義する入力制御点を、パッチを構成する制御点に変換します。 これもいくつかのパッチごと計算テッセレータ (TS) ステージとドメイン シェーダー (DS) ステージにデータを提供するには |。|入力 |1 および 32 の入力制御点は、まとまって定義低次サーフェス |。|出力 |1 ~ 32 個の出力制御点、まとまってパッチを構成します。 ハル シェーダーなどの制御点の数、パッチ面の種類テセレーションするときに使用するパーティションの種類、テッセレータ (TS) ステージの状態を宣言します |。

## <a name="tessellator-stage"></a>テッセレータ ステージ

|-|-| |目的 |[テッセレータ (TS) ステージ](tessellator-stage--ts-.md)は、ジオメトリ パッチを表すし、小さいオブジェクト (三角形、点、または線) をこれらのサンプルを接続のセットを生成するドメインのサンプリング パターンを作成します |。|入力 |テッセレータは、テッセレーション係数 (ドメインのテッセレーション細かい方法を指定) して、パーティションの種類 (パッチのスライスに使用するアルゴリズムを指定) する、ハル シェーダー ステージから渡されたを使用して、パッチあたり 1 回は動作します。 | |出力 |テッセレータ出力 uv (および必要に応じて w) 座標およびサーフェス トポロジをドメイン シェーダー ステージ |。

## <a name="domain-shader-stage"></a>ドメイン シェーダー ステージ

|-|-| |目的 |[ドメイン シェーダー (DS) ステージ](domain-shader-stage--ds-.md)は、出力パッチ内の細分化されたポイントの頂点の位置を計算します。各ドメイン サンプルに対応する頂点の位置を計算します。 ドメイン シェーダーは 1 回あたりテッセレータ ステージの出力ポイント ハル シェーダーに読み取り専用アクセスが出力パッチや出力パッチ定数、およびテッセレータ ステージの出力 UV 座標で実行します |。|入力 |ドメイン シェーダーは、[ハル シェーダー (HS) ステージ](hull-shader-stage--hs-.md)からの出力制御点を消費します。 ハル シェーダーの出力: 制御点、パッチ定数データ、テセレーション係数 (テセレーション係数には、固定関数テッセレータによって使用される値と、整数テセレーションによる丸め前の未処理の値を含めることができ、ジオモーフィングなどが容易になります)。 ドメイン シェーダーは、[テッセレータ (TS) ステージ](tessellator-stage--ts-.md)からの出力座標ごとに 1 回呼び出されます |。|出力 |ドメイン シェーダー (DS) ステージは、出力パッチ内の細分化されたポイントの頂点の位置を出力します |。

## <a name="geometry-shader-stage"></a>ジオメトリ シェーダー ステージ

|-|-| |目的 |[ジオメトリ シェーダー (GS) ステージ](geometry-shader-stage--gs-.md)がプリミティブの全体を処理します。 三角形、線、点が、隣接する頂点と共に処理されます。 これは、ジオメトリ増幅と減幅をサポートします。 ジオメトリ シェーダー ステージは、ポイント スプライト拡張、動的パーティクル システム、Fur/Fin の生成、シャドウ ボリュームの生成、単一パスでのキューブマップへのレンダリング、プリミティブ単位のマテリアル スワップ、プリミティブ単位のマテリアル セットアップ (プリミティブ データとしての重心座標の生成も含まれています。これにより、ピクセル シェーダーはカスタム属性補間を実行できます) などのアルゴリズムに適しています。 | |入力 |頂点シェーダーは、1 つの頂点で動作するとは異なり、ジオメトリ シェーダーの入力には、完全なプリミティブ (三角形の 3 つの頂点、線、2 つの頂点またはポイントの 1 つの頂点) の頂点 |。|出力 |ジオメトリ シェーダー (GS) ステージでは、単一選択したトポロジを形成する複数の頂点を出力できます。 利用可能なジオメトリ シェーダーの出力トポロジには、<strong>tristrip</strong>、<strong>linestrip</strong>、および<strong>pointlist</strong> があります。 生成されるプリミティブの数は、ジオメトリ シェーダーの呼び出し内で自由に変えることができますが、生成可能な頂点の最大数は、静的に宣言する必要があります。 ジオメトリ シェーダーの呼び出しから放射されるストリップの長さは任意で、および[RestartStrip](https://msdn.microsoft.com/library/windows/desktop/bb509660) HLSL 関数を経由して新しいストリップを作成することができます |。

## <a name="stream-output-stage"></a>ストリーム出力ステージ

|-|-| |目的 |[ストリーム出力 (SO) ステージ](stream-output-stage--so-.md)を連続して出力 (またはストリーム) 前のアクティブなステージからメモリ内の 1 つ以上のバッファー、頂点データ。 CPU からの入力データまたはとして、パイプラインにもう一度メモリにストリーミングされたデータ リードが再循環させることができます |。|入力 |前のパイプライン ステージの頂点データです |。|出力 |ストリーム出力 (SO) ステージを連続して出力 (またはストリーム)、ジオメトリ シェーダー (GS) ステージなど、前のアクティブなステージからメモリ内の 1 つ以上のバッファー、頂点データ。 ドメイン シェーダー (DS) ステージからメモリ (または DS もないかどうかは、頂点シェーダー (VS) ステージから、アクティブな) 内のバッファー、頂点データを継続して出力、ジオメトリ シェーダー (GS) ステージがアクティブでない場合、ストリーム出力 (SO) ステージがアクティブになっています |。

## <a name="rasterizer-stage"></a>ラスタライザー ステージ

|-|-| |目的 |[ラスタライザー (RS) ステージ](rasterizer-stage--rs-.md)されないプリミティブをビューのでは、ピクセル シェーダー (PS) ステージでは、プリミティブをトリミングし、ピクセル シェーダーを呼び出す方法を決定します。 ベクター情報 (図形やプリミティブで構成) をリアルタイム 3D グラフィックスを表示するため (ピクセルで構成された) ラスター画像に変換します |。|入力 |頂点 (x、y、z、w)、ラスタライザーに渡されるステージと見なされます同次クリップ空間です。 この座標空間の X 軸右向き、Y は上向き、Z 軸はカメラから離れる上向き |。|出力 |実際のピクセルをレンダリングする必要があります。 ピクセル シェーダーによる補間で使用するためのいくつかの頂点属性が含まれています |。

## <a name="pixel-shader-stage"></a>ピクセル シェーダー ステージ
 
|-|-| |目的 |[ピクセル シェーダー (PS) ステージ](pixel-shader-stage--ps-.md)は、プリミティブの補間データを受信し、カラーなどのピクセル単位のデータを生成します |。|入力 |ジオメトリ シェーダーなし、パイプラインを構成すると、ピクセル シェーダーは 16 個の 32 ビット、4 成分の入力に限定されます。 それ以外の場合、ピクセル シェーダーは 32 ビット、4 成分の入力を 32 個まで受け取ることができます。 ピクセル シェーダーの入力データには (パースペクティブ補正あり/なしで補間可能な) 頂点属性が含まれます。または、ピクセル シェーダーの入力データをプリミティブ単位の定数として処理することもできます。 ピクセル シェーダー入力は、宣言された補間モードに基づき、ラスター化されているプリミティブの頂点属性から補間されます。 プリミティブがラスター化前にクリップされた場合は、クリッピング処理中に補間モードが受け入れられます。 | |出力 |ピクセル シェーダー出力できます最大 8、32 ビット、4 成分の色、または色なし場合は、ピクセルが破棄されます。 使用されることができます。 前に、ピクセル シェーダー出力レジスタのコンポーネントを宣言する必要があります。各登録を許可する個別の出力書き込みマスク |。

## <a name="output-merger-stage"></a>出力マージャー ステージ
 
|-|-| |目的 |[出力マージャー (OM) ステージ](output-merger-stage--om-.md)は最終的なパイプラインの結果を生成するレンダー ターゲットおよび深度/ステンシル バッファーの内容でのさまざまな種類の出力データ (ピクセル シェーダー値、深度とステンシルの情報) を組み合わせたものです |。|入力 |出力マージャー入力は、パイプラインの状態、ピクセル シェーダー、レンダー ターゲットの内容、深度/ステンシル バッファーの内容によって生成されたピクセル データ |。|出力 |最終的なピクセル カラーをレンダリングします |。

## <a name="related-topics"></a>関連トピック

- [Direct3D グラフィックスの学習ガイド](index.md)

- [計算パイプライン](compute-pipeline.md)
