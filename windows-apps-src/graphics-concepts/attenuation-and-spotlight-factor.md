---
title: 減衰とスポットライト係数
description: グローバル照明の計算式に含まれるディフューズ ライティングとスペキュラ ライティングの成分には、ライトの減衰とスポットライト コーンを記述する項があります。
ms.assetid: F61D4ACB-09AB-4087-9E2D-224E472D6196
keywords:
- 減衰とスポットライト係数
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 8126ac8fa738a2b8a9680d215179fe23f77c5d44
ms.sourcegitcommit: 681c70f964210ab49ac5d06357ae96505bb78741
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2018
ms.locfileid: "7701905"
---
# <a name="attenuation-and-spotlight-factor"></a>減衰とスポットライト係数


グローバル照明の計算式に含まれるディフューズ ライティングとスペキュラ ライティングの成分には、ライトの減衰とスポットライト コーンを記述する項があります。 ここでは、これらの項について説明します。

## <a name="span-idattenuationspanspan-idattenuationspanspan-idattenuationspanattenuation"></a><span id="Attenuation"></span><span id="attenuation"></span><span id="ATTENUATION"></span>減衰


ライトの減衰は、ライトの種類、およびライトと頂点間の距離に依存します。 減衰を計算するには、次の式のいずれかを使用します。

Atten = 1/( att0<sub>i</sub> + att1<sub>i</sub> \* d + att2<sub>i</sub> \* d²)

この場合

| パラメーター        | 既定値 | 種類           | 説明                                     | 範囲          |
|------------------|---------------|----------------|-------------------------------------------------|----------------|
| att0<sub>i</sub> | 0.0           | 浮動小数点 | 一定減衰係数                     | 0 ～正の無限大 |
| att1<sub>i</sub> | 0.0           | 浮動小数点 | 線形減衰係数                       | 0 ～正の無限大 |
| att2<sub>i</sub> | 0.0           | 浮動小数点 | 2 次減衰係数                    | 0 ～正の無限大 |
| d                | なし           | 浮動小数点 | 頂点の位置からライトの位置までの距離 | なし            |

 

-   Atten = 1 (指向性ライトの場合)
-   Atten = 0 (ライトと頂点との距離がライトの範囲を超えている場合)

ライトと頂点との距離は常に正の値になります。

d = |L<sub>dir</sub> |

この場合

| パラメーター       | 既定値 | 種類                                             | 説明                                                 |
|-----------------|---------------|--------------------------------------------------|-------------------------------------------------------------|
| L<sub>dir</sub> | なし           | 3D ベクトル (x、y、z 浮動小数点値) | 頂点の位置からライトの位置への方向ベクトル |

 

d がライトの範囲を超えると、Direct3D はそれ以上減衰を計算せず、ライトから頂点へのエフェクトも適用しなくなります。

減衰定数は、式の中では係数として機能します。これらに簡単な調整を加えることで、さまざまな減衰カーブを生成できます。 Attenuation1 を 1.0 に設定すると、範囲によって制限されたまま、減衰しないライトを作成できます。いろいろな値を試して、さまざまな減衰エフェクトを生成してください。

ライトの最大範囲における減衰は、0.0 ではありません。 ライトがライトの範囲内になったときに突然表示されるのを防ぐために、アプリケーションでライトの範囲を増やすことができます。 また、ライトの範囲で減衰係数が 0.0 に近づくように、アプリケーションで減衰定数を設定することもできます。 減衰値をライトの色の赤、緑、および青の成分で乗算することにより、ライトの強度は、ライトが頂点まで移動する距離の係数として増減されます。

## <a name="span-idspotlight-factorspanspan-idspotlight-factorspanspan-idspotlight-factorspanspotlight-factor"></a><span id="Spotlight-Factor"></span><span id="spotlight-factor"></span><span id="SPOTLIGHT-FACTOR"></span>スポットライト係数


次の式は、スポット ライト係数を指定します。

![スポットライト係数の式](images/dx8light9.png)

| パラメーター         | 既定値 | 種類           | 説明                              | 範囲                    |
|-------------------|---------------|----------------|------------------------------------------|--------------------------|
| rho<sub>i</sub>   | なし           | 浮動小数点 | スポットライト i のコサイン (角度)            | なし                      |
| phi<sub>i</sub>   | 0.0           | 浮動小数点 | スポットライトの半影の角度 (ラジアン) | \[theta<sub>i</sub>, pi) |
| theta<sub>i</sub> | 0.0           | 浮動小数点 | スポットライトの本影の角度 (ラジアン)    | \[0, pi)                 |
| falloff           | 0.0           | 浮動小数点 | 減衰係数                           | (-infinity, +infinity)   |

 

この場合

rho = norm(L<sub>dcs</sub>)<sup>.</sup>norm(L<sub>dir</sub>)

パラメーターは次のとおりです。

| パラメーター       | 既定値 | 種類                                             | 説明                                                 |
|-----------------|---------------|--------------------------------------------------|-------------------------------------------------------------|
| L<sub>dcs</sub> | なし           | 3D ベクトル (x、y、z 浮動小数点値) | カメラ空間でのライトの負の方向         |
| L<sub>dir</sub> | なし           | 3D ベクトル (x、y、z 浮動小数点値) | 頂点の位置からライトの位置への方向ベクトル |

 

ライトの減衰を計算した後、Direct3D は、スポットライトのエフェクト (適用可能な場合)、サーフェスからのライトの反射角度、および現在のマテリアルの反射率も考慮して、頂点のディフューズ成分とスペキュラ成分を計算します。 詳しくは、「[ライトの種類](light-types.md)」の「スポットライト」をご覧ください。

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>関連トピック


[光源の計算](mathematics-of-lighting.md)

 

 




