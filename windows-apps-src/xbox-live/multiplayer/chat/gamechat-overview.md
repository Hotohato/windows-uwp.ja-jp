---
title: "ゲーム チャットの概要"
author: KevinAsgari
description: "Xbox Live ゲーム チャットを使用して、ゲームに音声通信を追加する方法について説明します。"
ms.assetid: 8ef6a578-e911-4006-ac4e-94d3f2fedb98
ms.author: kevinasg
ms.date: 04-04-2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: "Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One"
ms.openlocfilehash: 0459343ea7629b5f4d161fecfb8e9f85d7d01c54
ms.sourcegitcommit: 90fbdc0e25e0dff40c571d6687143dd7e16ab8a8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/06/2017
---
# <a name="game-chat-overview"></a>ゲーム チャットの概要

 ゲーム チャットとは、リモート本体上の 1 つのタイトルのユーザー間でのボイス チャットを可能にするために使用できるテクノロジです。 これには、本体ユーザー間のより広範な独立したコミュニケーションは含まれません。

 Xbox One には、専用の、ハードウェアで高速化されたボイス チャット コーデックが用意されています。このコーデックは、エンコードとデコードに使用され、`Microsoft.Xbox.GameChat` 名前空間を通じて公開されます。 このコーデックは、タイトルのネットワーク帯域幅の柔軟性に関する複数の品質設定をサポートし、本体が送信するすべてのボイス チャット通信でこのコーデックを使用する必要があります。 他のコーデックはサポートされません。

> **注:** `Windows.Xbox.Chat` と呼ばれる低レベル名前空間がコーデックを呼び出します。

  * [ゲーム チャット チャンネル](#ID4EFB)
  * [ゲーム チャット クラス](#ID4EKC)
  * [既定の USB エンドポイント](#ID4E3D)
  * [ボリュームとピッチ](#ID4EDE)
  * [ゲーム チャット中にユーザーを聞こえなくする](#ID4EWE)
  * [GameChat DLL のコンパイル](#ID4E5H)

<a id="ID4EFB"></a>

## <a name="game-chat-channels"></a>ゲーム チャット チャンネル


 チャット システムは、デバイスではなくユーザーからのローカル入力を関連付けます。 OS が入力デバイスとプレイヤー ID を関連付けます。 重要な機能の 1 つが、複数のチャンネルのサポートです。 ゲームでロビーを提供したり、ユーザーがチームに参加したり、チーム内で命令系統を確立したりできます。 ユーザーは、ゲームで許される限り、同時に複数のチャンネルでアクティブになることができます。 たとえば、ゲームで次のようなチャンネルを提供できます。

  * 赤チーム分隊 1 チャンネル &ndash; 分隊 1 の赤チームのすべてのプレイヤー間でのコミュニケーション。
  * 赤チーム分隊 2 チャンネル &ndash; 分隊 2 の赤チームのすべてのプレイヤー間でのコミュニケーション。

**図 1.**&nbsp;&nbsp;**標準のチャット チャンネル**

![](../../images/chat/gamechat_standard.png)

  *  赤チームの命令チャンネル &ndash; 赤チームの指揮権を持たないすべてのプレイヤー向けの受信専用チャンネル。 このチャンネルでは、他のすべての「赤チーム」のチャンネルをダッキングすることができます。 押して話すことができる赤チームの指揮官向けの発信専用チャンネル。

**図 2.**&nbsp;&nbsp;**命令チャット チャンネル**

![](../../images/chat/gamechat_command.png)

  * 上記と同様の、青チームのチャンネル。



> **注:** *ダッキング*とは、別の信号がある場合に、あるオーディオ信号のレベルを下げることを意味するチャット用語です。 たとえば、ラジオでは、司会者がアナウンスをする間、音楽トラックのボリュームが下げられます (ダッキングされます)。



 ユーザー間の標準チャットでは、チャンネルは双方向であるため、ユーザーはそれぞれの関連付けられたチャンネルで着信と発信の両方を行うことができます。 命令チャンネルでは、コミュニケーションを (標準のチャンネルとして) 双方向にすることも、ユーザーがチャンネルでの発信または着信のどちらかを行うことができる一方向にすることもできます。 たとえば、通常は、指揮官は発信できるようにし、部下は着信のみとします。 命令チャンネルは、他のチャンネルよりも優先度が高いものとして扱われるため、他のチャンネルの音声はダッキングされます。

 ゲーム タイトルで、リモート ユーザーが話している間、チャット以外のオーディオをダッキングできます。 また、ボリューム、一部のユーザーの着信専用属性、他のユーザーの発信専用属性などのプロパティを各チャンネルで設定することもできます。


<a id="ID4EKC"></a>


## <a name="game-chat-classes"></a>ゲーム チャット クラス


 ゲーム チャットの名前空間は `Microsoft.Xbox.GameChat` です。 このセクションでは、この名前空間のクラス階層について説明します。 それぞれのクラス、インターフェイス、列挙型の詳細については、`Microsoft.Xbox.GameChat`名前空間のドキュメントを参照してください。

  * [ChatManager](#ID4EYC)
  * [ChatManagerSettings](#ID4EDD)
  * [ChatUser](#ID4EQD)

<a id="ID4EYC"></a>


### <a name="chatmanager"></a>ChatManager


`ChatManager` クラスはトップレベルのゲーム チャット クラスです。


<a id="ID4EDD"></a>


### <a name="chatmanagersettings"></a>ChatManagerSettings


 `ChatManagerSettings` クラスは `ChatManager` クラスの設定を表します。


<a id="ID4EQD"></a>


### <a name="chatuser"></a>ChatUser


`ChatUser` クラスは、チャンネル上のユーザーを表します。そのユーザーと、同じチャンネル上の他のユーザーの対話に固有の一連のプロパティを持ちます。



<a id="ID4E3D"></a>


## <a name="default-usb-endpoint"></a>既定の USB エンドポイント


 既定の USB キャプチャー エンドポイントは、シングル チャンネル モノラルです。 これにより、エコー除去をオーディオ ストリームに適用できます。これはチャット アプリケーションにとっては便利な機能です。


<a id="ID4EDE"></a>


## <a name="volume-and-pitch"></a>ボリュームとピッチ


チャット システムのボリューム コントロールは、Chat API の基盤となる XAudio2 で使用されているものと同じです。 ピッチ コントロールはチャット システムではサポートされていません。

 XAudio2 のボリューム設定の詳細については、`SetVolume` を参照してください。

 XAudio2 は、ボリューム レベルをユーザーのスピーカーの設定に基づいて自動的に調整して、構成全体を通して一貫性のあるボリューム レベルを維持します。 ユーザーの設定が物理的な構成と一致しない場合、正確な設定のシステムと比較してボリュームが大きすぎるか小さすぎるかのいずれかになります。 たとえば、5.1 サラウンド サウンド スピーカー用に構成されたシステムが 2 つのスピーカーにしか接続されていなければ、サウンドは小さすぎる結果となります。 XAudio2 は、ユーザーのスピーカー設定が物理的なセットアップに適合しているかどうかを判定できません。


<a id="ID4EWE"></a>


## <a name="making-users-inaudible-during-game-chat"></a>ゲーム チャット中にユーザーを聞こえなくする


Xbox One は、ゲーム チャット中にユーザーを聞こえなくするための 2 つのメカニズムをサポートしています。
  * ミュート
  * ブロック


<a id="ID4EFF"></a>


### <a name="muting"></a>ミュート


ミュートは多くの場合、一方向です。 つまり、プレイヤー A がプレイヤー B をミュートしますが、プレイヤー B はプレイヤー A を引き続き聞くことができます。ミュートの例:
  * タイトルに「近接」チャットが含まれています。 この場合、プレイヤーは近くにいる他のプレイヤーを聞くことができますが、遠すぎるプレイヤーはミュートされます。
  * タイトルは、ユーザーに他の任意のプレイヤー、もしくはすべてのプレイヤーをミュートする機能を提供します。


ミュートは、主にタイトルの判断で実装されます。 ただし、プレイヤーは、ゲーマーカードまたはシステム UI を使用して、Xbox システム レベルで他のプレイヤーをミュートすることもできます。


<a id="ID4EVF"></a>


### <a name="blocking"></a>ブロック


> **注:** タイトルは、プレイヤーをブロックしません。 ブロックは、Xbox システム レベルでのみ実行されます。



ゲーム プレイヤーは、ブロックの使用によってチャットの可聴性に直接影響を及ぼすことができます。 プレイヤーは、ゲーマーカードを通じて他のプレイヤーを直接ブロックすることができます。または、音声通信およびテキスト制限を「ブロック」または「フレンドのみ」に設定することができます。 通常、ブロックは双方向です。 つまり、プレイヤー A がプレイヤー B をブロックする場合、プレイヤー A にプレイヤー B が聞こえないだけでなく、プレイヤー B にもプレイヤー A が聞こえません。ブロックの例:
  * プレイヤーには子アカウントがあり、その他のすべてのプレイヤーがそのアカウントにアクセスするのをブロックします。
  * プレイヤーは、フレンドとのみチャットするようにアカウント構成を設定し、フレンド以外をブロックします。
  * プレイヤー A は、People アプリの評判/フィードバックまたはシステム UI を通じてプレイヤー B に不適切な行動というフラグを付けてプレイヤー B をブロックします。


プレイヤーは、物理的にヘッドセットを取り外したり、Kinect センサーを無効にしたりすることで他のプレイヤーをブロックすることもできます。


<a id="ID4EJG"></a>


### <a name="what-titles-should-do-to-provide-for-mutingblocking"></a>ミュート/ブロックを提供するためにタイトルは何を実行する必要があるか


タイトルは、InGameChat サンプルに示されている、GameChat DLL を使用して実装されるゲーム内オプションを通じてミュートを提供します。 ライブラリはミュート/ブロックのすべての要件を満たします。システム ポリシーに従うためにタイトルからの特定のアクションは必要ありません。 タイトルが行う必要があるのは、プレイヤーがチャット セッション中に他のプレイヤーをミュート/ブロックすることができるゲーマーカード UI を確実に公開することだけです。

 ミュートを実装するために、タイトルは `ChatManager.MuteUserFromAllChannels` を呼び出します。 すべてのユーザーをミュートする必要がある場合は、`MuteAllUsersFromAllChannels` を呼び出します。 タイトルは、必要に応じて `ChatManager.UnmuteUserFromAllChannels` または `UnmuteAllUsersFromAllChannels` の呼び出しを使用して、ミュートされたプレイヤーの可聴性を復元できます。 タイトルが `Chat` 名前空間を直接使用することは推奨されません。 このライブラリの機能のほとんどは `GameChat` を通じて公開されます。

プレイヤーがチャット チャンネルをクリアし、新しいチャット セッションを作成するとき、セッションはミュートされていた以前のプレイヤーに関する情報を保持しません。 タイトルは、この動作を追跡し、`ChatManager` を呼び出して、ゲームプレイ中のプレイヤーのミュート エクスペリエンスの一貫性を維持する必要があります。

多くのタイトルは、ブロック/ミュート状況で音声トラフィックを制限して、ネットワークを介して送信するデータを少なくすることでネットワーク運用を最適化します。 たとえば、プレイヤー A がプレイヤー B をブロック/ミュートして、音声トラフィックを制限しますが、タイトルはプレイヤー B からプレイヤー A への音声データの送信を停止しません。この動作の実装は完全にタイトルに委ねられます。 `GameChat` はこのケースを処理し、`ChatManager` に渡される場合にプレイヤー B からの音声データをブロックします。


<a id="ID4ERH"></a>


### <a name="debugging-when-players-cannot-hear-each-other"></a>プレイヤーが互いに聞こえない場合のデバッグ

`ChatManager`  には、`ChatManagerSettings.DiagnosticsTraceLevel` プロパティおよび `ChatManager.OnDebugMessage` イベントを使用してタイトルが有効にできるデバッグ トレースが含まれています。 トレースは、問題の絞り込みに役立つ多くのコンテンツを提供します。 このコンテンツは、オーディオ デバイスの追加/変更、ローカルおよびリモート ユーザーの追加、各リモート ユーザーからの音声データの取得などから得られます。


<a id="ID4E5H"></a>


## <a name="compiling-the-gamechat-dll"></a>GameChat DLL のコンパイル


 Microsoft.Xbox.GameChat.dll をビルドするためのソースは Xbox デベロッパー ポータルにあります。 デベロッパーは、このソースをコンパイルして `GameChat` のカスタマイズ バージョンを作成できます。 一般的なカスタマイズでは、オーディオ データを転送するためのカスタム ネットワーク チャンネルを作成します。
