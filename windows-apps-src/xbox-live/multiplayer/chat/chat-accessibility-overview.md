---
author: KevinAsgari
title: アクセシビリティ対応のゲーム内チャットの概要
description: Xbox Live ゲーム チャットのアクセシビリティ機能について説明します。
ms.assetid: ecd84fa1-9b28-414b-b5e1-daba68de9472
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, ゲーム チャット, アクセシビリティ, 音声合成, 音声テキスト変換
ms.localizationpriority: low
ms.openlocfilehash: 7f2236931add4a0a812ff10e06431f4b4cdb8c5b
ms.sourcegitcommit: 01760b73fa8cdb423a9aa1f63e72e70647d8f6ab
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/24/2018
---
#  <a name="accessible-in-game-chat-overview"></a>アクセシビリティ対応のゲーム内チャットの概要

ここでは、**GameChat** コンポーネントによって提供されるアクセシビリティ対応のチャット機能の概要を説明します。

ゲーム内コミュニケーションのアクセシビリティを強化するために、合成音声 (TTS) と音声テキスト変換 (STT) の 2 つの新機能を提供しています。

聴覚や音声に障碍のあるゲーマーのために、両方の機能を有効にしてタイトルのアクセシビリティを高めることを検討してください。

## <a name="text-to-speech-tts"></a>音声合成 (TTS)

TTS はテキストを音声に変換する処理です。テキスト メッセージは、合成音声を使用して読み上げられます。 **GameChat** で TTS を使用すると、タイトルは、ユーザーから送信されたテキスト ストリームが読み上げられたオーディオ ストリームを自動的に合成できます。 テキストと合成されたオーディオ ストリームの両方が、他のアクティブなチャット ユーザーに送信されます。 この機能があれば、テキスト ベースのチャット システムがないタイトルでも、音声障碍のあるプレイヤーがゲーム チャットに積極的に参加できます。

**GameChat** コンポーネントには、プレイヤーからテキスト入力を取得するためのその他の API が用意されていないため、タイトルでカスタム テキスト入力フィールドを提供するか、Xbox プラットフォームによって提供される仮想キーボードを有効にする必要があります。

**HasRequestedSynthesizedAudio** は、**Microsoft.Xbox.GameChat** 名前空間に属する **ChatUser** クラスの新しいプロパティです。 この値は、Xbox の **[簡単操作]** 設定でユーザーによって設定されます。

ユーザーがアクティブなチャット セッションに参加している場合、タイトルは **ChatUser** クラスの **OnAccessibilitySettingsChanged** イベントをリッスンする必要があります。 このイベントは、チャットのアクセシビリティ設定が変更されたときに発生します。 **OnAccessibilitySettingsChanged** イベントが発生したら、**HasRequestedSynthesizedAudio** の値を確認します。

**HasRequestedSynthesizedAudio** が **TRUE** に設定されている場合、TTS が有効になっており、すべてのアクティブ ユーザーに送信されるテキスト メッセージにテキストを読み上げる音声パケットを含めるよう、ユーザーが要求したことを意味します。

次の表は、**HasRequestedSynthesizedAudio** のプロパティ値が表すユーザーの TTS 設定が、チャットでのテキスト メッセージの処理方法にどう影響するかを示しています。

|HasRequestedSynthesizedAudio  |すべてのリモート ユーザーに送信されるデータの種類                                                 |
|------------------------------|--------------------------------------------------------------------------------------|
|**FALSE**                     |テキストのみ                                                                             |
|**TRUE**                      |テキストと合成音声の両方                                                       |

**allowTextToSpeechConversion** は、**GenerateTextMessage** API の入力パラメーターです。 またこの API は、**Microsoft.Xbox.GameChat** 名前空間の **ChatUser** クラスの一部です。 このパラメーターはタイトルによって設定され、テキストを音声に変換する組み込みの機能を利用するかどうかを決定します。

**allowTextToSpeechConversion** が **TRUE** の場合、**GameChat** はテキスト メッセージを自動的に処理して合成音声パケットを生成します。 合成音声データは、ユーザーが設定で選択した音声プロファイル (Zira、Marcus、または David) を使用して作成されます。
**FALSE** に設定されている場合は、タイトルで変換を独自に処理する予定であることを意味します。つまり、タイトルに代わって **GameChat** によって合成音声パケットが自動的に生成されることはありません。

**GameChat** で自動的にテキストを音声に変換するかどうかは、**allowTextToSpeechConversion** プロパティ値によって決まります。次の表は、このプロパティがすべてのリモート ユーザーに送信されるデータの最終的な種類にどう影響するかを示します。

|allowTextToSpeechConversion   |すべてのリモート ユーザーに送信されるデータの種類                                                                                                               |
|------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
|**FALSE**                     |TTS が有効か無効かにかかわらず、テキストのみを送信                                                                                               |
|**TRUE**                      |**HasRequestedSynthesizedAudio** が **TRUE** の場合のみ、テキストと合成音声の両方を送信                                                       |

### <a name="example-flow"></a>フローの例

ユーザーがチャット セッションに参加すると、タイトルは **ChatUser** クラスの **HasRequestedSynthesizedAudio** プロパティの値を確認します。 この値は、ユーザーがテキストを音声として送信することを望んでいるかどうかを示します。

`HasRequestedSynthesizedAudio = True` の場合:

* TTS 変換するテキストを入力する手段をユーザーに提供します。

* **GenerateTextMessage** 関数を呼び出して、ユーザーからのテキスト メッセージと、テキスト メッセージの音声合成を必須にするかどうかを入力パラメーターとして渡します。 ほとんどの場合、2 番目のパラメーターは常に true になります。

* 未処理のテキストと合成音声データの両方が含まれた **OnOutgoingChatPacketReady** イベントに応答します。

合成音声データを含むチャット パッケージを受信する場合:

* データの受信中に **ProcessIncomingChatMessage** を呼び出します。

* 処理されるチャット パッケージごとに、**GameChat** によって、**ChatTextMessageType** 引数を含む **OnTextMessageReceived** イベントが生成されます。 この引数は、受信したメッセージの種類に関する情報を提供します。

* メッセージの種類が **ChatSynthesizedVoiceDataMessage** として識別された場合、合成音声メッセージも、記録された音声パケットと同様に処理されます。

## <a name="speech-to-text-stt"></a>音声テキスト変換 (STT)

STT は、音声を取得してテキストに変換する処理です。 **GameChat** では、他のユーザーがチャットで (声に出して) 話した内容をテキストに変換して受け取ることができます。 この機能により、聴覚障碍のあるゲーマーも、ゲームの音量をオフにしているユーザーも、全員がボイス チャットに参加できます。

**HasRequestedTranscription** は、**Microsoft.Xbox.GameChat** 名前空間に属する **ChatUser** クラスの新しいプロパティです。 この値は、Xbox の **[簡単操作]** 設定でユーザーによって設定されます。

ユーザーがアクティブなチャット セッションに参加している場合、タイトルは **ChatUser** クラスの **OnAccessibilitySettingsChanged** イベントをリッスンする必要があります。 このイベントは、チャットのアクセシビリティ設定が変更されたときに発生します。 **OnAccessibilitySettingsChanged** イベントが発生したら、**HasRequestedTranscription** の値を確認します。

**HasRequestedTranscription** が **TRUE** に設定されている場合は、STT が有効になっており、すべてのリモート ユーザーの音声データを Microsoft 音声認識サービスに送信してテキスト変換してから、音声とテキストの両方の応答をローカル ユーザーに送信することを意味します。

カスタマイズされた UI を使用してテキスト チャットをレンダリングする予定のタイトルでは、事前にこの値を確認してその画面を準備することをお勧めしますが、必須ではありません。

次の表は、**HasRequestedTranscription** のプロパティ値が表すユーザーの STT 設定が、他のアクティブなチャット ユーザーから送信される音声メッセージにどう影響するかを示しています。

|HasRequestedTranscription     |ユーザーが受信するデータの種類                                                         |
|------------------------------|--------------------------------------------------------------------------------------|
|**FALSE**                     |音声のみ                                                                            |
|**TRUE**                      |音声から変換されたテキストと音声の両方                                                       |


### <a name="to-render-a-transcribed-text-message"></a>変換されたテキスト メッセージをレンダリングするには

STT が有効になっている場合に、変換された **TranscribedText** 型のテキスト メッセージをユーザーが受信すると、タイトルは次の 2 つの方法のいずれかで画面にテキストをレンダリングする必要があります。

* タイトルが呼び出せる UI (TCUI)

  シェルとプラットフォームによって提供される TCUI を使用して、変換されたテキストをタイトルの画面上にレンダリングできます。 UI は、高さと幅が固定されたオーバーレイです。 次に示すように、画面上の 8 つの位置のいずれかに配置することができます。

  ![TCUI をレンダリング可能な 8 つの位置](../../images/multiplayer/tcui-render-positions.png)

  タイトルは、表示用の API に 3 つの情報を送信する必要があります。話し手の名前、変換されたテキスト、テキスト メッセージの作成方法 (実際のテキスト入力か STT 経由か) を示す識別子です。 実際のテキストの入力によって作成されたテキスト メッセージの場合はキーボード識別子が表示され、変換されたテキスト メッセージの場合はヘッドセット識別子が表示されます。 これはシェルベースのオーバーレイであるため、すべてのシェルの動作を継承します。ユーザーが操作することはできません。

  ユニバーサル Windows プラットフォーム (UWP) で開発されたタイトルでは、次回のメジャー アップデートでこのオーバーレイが提供される見込みです。 それまでは、ゲーム内 UI (次に説明します) を使用して、変換されたテキスト メッセージをレンダリングできます。

* ゲーム内 UI

  タイトルでさまざまなデバイス (Xbox、PC、または Windows 10 のすべてのデバイス) にわたる UI エクスペリエンスをより細かく制御する場合は、代わりに、チャット テキストを表示するカスタムのゲーム内 UI を作成できます。

### <a name="example-flow"></a>フローの例

起動時に、**ChatUser** クラスの **HasRequestedTranscription** プロパティを確認します。 この設定によって、タイトルは、ユーザーが音声テキスト変換機能を有効にしているかどうか、さらにチャット セッション中にユーザーに送信される音声およびテキスト データの処理方法を認識します。

STT が有効になっているユーザーが、変換されたテキスト文字列を含むチャット パッケージを受信する場合:
* ユーザーに送られる **ChatPackets** には、音声データと、音声データが処理された後に受信した変換後の文字列の両方が含まれます。
* 処理されるチャット パッケージごとに、**OnTextMessageReceived** イベントが生成されます。 このイベントには、受信したメッセージの種類に関する情報を提供する **ChatTextMessageType** 引数が含まれています。 メッセージの種類が **TranscribedText** として識別された場合、上記 2 つの方法 (TCUI または同等のゲーム内 UI) のいずれかを使用して、変換されたテキスト メッセージが画面にレンダリングされます。

## <a name="related-links"></a>関連リンク

* [ゲーム チャットの概要](gamechat-overview.md)
