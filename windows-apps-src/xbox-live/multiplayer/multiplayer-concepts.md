---
title: Xbox Live マルチプレイヤーの概念
author: KevinAsgari
description: Xbox Live マルチプレイヤー システムで使用される一般的なマルチプレイヤーの概念について説明します。
ms.assetid: 1e765f19-1530-4464-b5cf-b00259807fd3
ms.author: kevinasg
ms.date: 08/25/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, マルチプレイヤー
ms.localizationpriority: medium
ms.openlocfilehash: cdd06e18c2793877085b8081050fdbc04584143d
ms.sourcegitcommit: 1938851dc132c60348f9722daf994b86f2ead09e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/03/2018
ms.locfileid: "4267378"
---
# <a name="xbox-live-multiplayer-concepts"></a>Xbox Live マルチプレイヤーの概念

このトピックでは、Xbox Live のドキュメントでよく使用される、マルチプレイヤー関連の重要な用語および概念を説明します。 これらの概念をよく把握しておくと、Xbox Live マルチプレイヤーのしくみを理解しやすくなります。

## <a name="multiplayer-session"></a>マルチプレイヤー セッション

マルチプレイヤー セッションは、Xbox Live ユーザーのグループと、それらのユーザーに関連付けられたプロパティを表します。 セッションはタイトルによって作成および管理され、Xbox Live クラウドに置かれたセキュアな JSON ドキュメントとして表されます。 セッション ドキュメント自体には、セッションに接続している Xbox Live ユーザーについての情報、利用可能なスポットの数、(セッションおよび各セッション メンバーの) カスタム メタデータ、および、ゲーム セッションに関連するその他の情報が含まれます。

ゲーム デベロッパーによって定義され、タイトル インスタンスの Xbox Live サービス構成で構成されるセッション テンプレートが、個々のセッションのベースになります。

タイトルではセッションを作成して更新できますが、セッションを直接削除することはできません。  代わりに、セッションからすべてのプレーヤーが削除されると、指定されたタイムアウトの経過後に、自動的に Xbox Live マルチプレイヤー サービスによってセッションが削除されます。 セッションについて詳しくは、「[MPSD セッションの詳細](multiplayer-appendix/mpsd-session-details.md)」をご覧ください。

タイトルでは複数のセッションを使用することもできますが、典型的なマルチプレイヤーの実装では 2 つのセッションを使用します。

* ロビー セッション - ゲームの複数のラウンド、レベル、マップなどにまたがって行動を共にしたいフレンドのグループを表すセッションです。
* ゲーム セッション - ゲームの特定のセッション インスタンス (ラウンド、マッチ、レベルなど) でプレイしているユーザーを表すセッションです。このセッションには、(通常はマッチメイキング サービスを通じて) セッション インスタンスに共に参加することになった、複数のロビー セッションからのメンバーを含めることができます。

シナリオの例を次に示します。Sally はフレンドの John および Lisa とマルチプレイヤーをプレイしたがっています。 Sally はゲームを起動し、John と Lisa を自分のゲームに招待します。 John と Lisa が参加すると、Sally を含めた 3 人がロビー セッションにいることになります。 このセッションで、3 人は他のプレイヤーとオンライン マッチでプレイすることにします。 ゲームはゲーム セッションを作成し、Xbox Live マッチメイキング サービスを使用して、プレイヤーの残りのスロットを他の Xbox Live プレイヤーで埋めます。

Bob と Joe が最初の 3 人とマッチングされ、この 5 人が一緒にラウンドをプレイするとします。 ラウンド終了後、Sally、John、Lisa はゲーム セッションから退出しますが、ロビー セッションにはまだ一緒に残っており (Bob と Joe はいません)、新しいラウンドをプレイするか、それとも別のゲーム モードに切り替えるかを選択できます。

### <a name="session-member"></a>セッション メンバー

セッション メンバーは、セッションに参加している Xbox Live ユーザーです。

### <a name="arbiter"></a>アービター

アービターは、ゲームのセッションの状態を管理する本体またはデバイスです。 たとえば、アービターは、プレイヤーをさらに見つけるために、ゲーム セッションをマッチメイキングに公開します。

アービターは、タイトルが設定します。 ゲームのホストと同じでもかまいませんが、同じである必要はありません。

### <a name="session-host"></a>セッション ホスト

セッション ホストは、ホスト ベースのピアツーピア ネットワーク アーキテクチャ上に構築されるタイトルのために、ゲーム プレイ シミュレーションを実行する本体またはデバイスです。 この本体またはデバイスは通常、アービターと同じですが、同じである必要はありません。

## <a name="multiplayer-service-session-directory"></a>マルチプレイヤー サービス セッション ディレクトリ

Xbox Live マルチプレイヤー サービスは Xbox Live クラウドで動作し、ゲームのマルチプレイヤー システム メタデータを複数のクライアントにまたがって一元管理します。 このメタデータを追跡するシステムは、マルチプレイヤー セッション ディレクトリ (MPSD) と呼ばれます。 MPSD はアクティブなゲーム セッションのライブラリと考えることができます。 ゲームでは、タイトルに関連するアクティブ セッションを追加、検索、変更、または削除できます。 MPSD はさらに、セッション状態を管理し、必要なときはセッションを更新します。

MPSD により、タイトルは、ユーザーのグループを接続するために必要な基本情報を共有できます。 セッション機能が同期され、一貫性が保たれます。 招待の送信/受け入れおよびゲーマー カード経由での参加において、シェルおよび Xbox One 本体のオペレーティング システムと調整します。

### <a name="session-handles"></a>セッション ハンドル

セッションは、データの組み合わせによって MPSD で一意に識別されます。

* タイトルのサービス構成 ID (SCID)
* セッションの作成に使われたセッション テンプレートの名前
* セッションの名前

セッション ハンドルは、MPSD に存在する特定のセッションへの参照を含む JSON オブジェクトです。 セッション ハンドルにより、Xbox Live メンバーは既存のセッションに参加できます。

各セッション ハンドルにはハンドルを一意に識別する GUID が含まれ、タイトルは単一の GUID を使ってセッションを参照できます。

セッション ハンドルには複数の種類があります。

* 招待ハンドル
* 検索ハンドル
* アクティビティ ハンドル
* 相関ハンドル
* 転送ハンドル

#### <a name="invite-handle"></a>招待ハンドル

招待ハンドルは、ゲームへの参加を招待するときにメンバーに渡されます。 招待ハンドルには、招待されたメンバーのゲームが正しいセッションに参加できるようにする情報が含まれています。

#### <a name="search-handle"></a>検索ハンドル

検索ハンドルは、セッションに関する追加のメタデータを含み、タイトルが選択した条件を満たすセッションを検索できるようにします。

#### <a name="activity-handle"></a>アクティビティ ハンドル

アクティビティ ハンドルを使用することで、メンバーは、ソーシャル ネットワーク上の他のメンバーが何をプレイしているかを知り、フレンドのゲームに参加できます。

#### <a name="correlation-handle"></a>相関ハンドル

相関ハンドルは実質的にセッションのエイリアスとして機能し、ゲームが相関ハンドルの ID を使用するだけでセッションを参照できるようにします。

### <a name="transfer-handle"></a>転送ハンドル

転送ハンドルは、セッション間でプレイヤーを移動するために使用されます。

### <a name="invites"></a>招待

Xbox Live は、マルチプレイヤー サービスによってサポートされる招待システムを提供します。 このシステムにより、プレイヤーは他のプレイヤーを自分のゲーム セッションに招待できます。 招待されたプレイヤーはゲームへの招待を受け取り、タイトルはこの情報を使用して既存のセッションとマルチプレイヤー エクスペリエンスを結合します。 タイトルは招待のフローと、招待を送信できるタイミングを制御します。

招待はユーザーによってシェル経由で、またはタイトルから直接送信できます。 招待の通知テキストをタイトルによって動的に設定し、招待されるプレイヤーに詳しい情報を提供することができます。 招待には、タイトルに関する追加データ (プレイヤーからは見えず、追加情報の伝達に使用できる) を含めることもできます。

### <a name="join-in-progress"></a>途中参加

招待に加えて、Xbox Live には、フレンドまたは他の既知のプレイヤーのアクティブなゲームプレイ セッションにプレイヤーが参加するためのシェル オプションがあります。 これはアクティブなゲーム セッションへの別の参加手段で、この手段も MPSD によって提供されます。 タイトルはセッションが参加可能になるタイミングと、途中参加を許可するセッションを制御します。

### <a name="protocol-activation"></a>プロトコルのアクティブ化

Sally が Lisa にゲームへの参加の招待を送る場合、Lisa はデバイスで通知を受け取り承諾または辞退できます。

招待を承諾すると、OS は、ゲームがまだ実行していない場合はゲームの開始を試み、ゲームがアクティブ化された理由についての情報および他の詳細情報 (たとえば、招待の場合は、招待したプレイヤーの ID や、メンバーが招待されたセッションなど) を含むアクティブ化 イベントをトリガーします。

このイベント処理のプロセスはプロトコルのアクティブ化と呼ばれ、ゲームが特定の状態 (アクティブ化イベント引数で詳しく記述されています) に自動的になる必要があることを示します。 メンバーがマルチプレイヤー ゲームに参加している場合、セッション ハンドル ID が引数の 1 つとして指定されます。

Lisa のケースでは、招待が受け入れられたら、ゲームを自動的に開始し (必要な場合)、Lisa が何もしなくても Sally と同じゲーム セッションに Lisa を参加させる必要があります。

プロトコルのアクティブ化は、招待の受け入れ、プロフィール カードによる別のメンバーのゲームへの参加、またはディープ リンクされた実績のクリックによってトリガーされます。

## <a name="smartmatch-matchmaking"></a>SmartMatch マッチメイキング

SmartMatch は、匿名マッチメイキングのための Xbox Live サービスの名称です。 このサービスは、構成可能なマッチ ルール セットに基づいて、同じゲームのプレイヤーをマッチングします。

マッチメイキング サービスは MPSD と密接に連携し、マッチメイキングの入力と出力にセッションを使用します。 マッチメイキングはサービス上で実行されるので、タイトルはマッチメイキング フローの間、タイトル内でのシングル プレイヤーのような他のエクスペリエンスを容易に提供できます。

マッチメイキングに参加したい個人またはグループは、マッチ チケット セッションを作成し、マッチメイキング サービスを要求してマッチを設定する他のプレイヤーを検索します。 これにより、(マッチ ホッパー上で) マッチメイキング サービス内に一定期間常駐する一時的な "マッチ チケット" が作成されます。

マッチメイキング サービスは、ルール構成、プレイヤーごとに格納される統計情報、マッチ要求時に指定される追加の情報に基づいて、一緒にプレイするセッションを選択します。 次に、サービスは、マッチしたすべてのプレイヤーを含むマッチ ターゲット セッションを作成し、ユーザーのタイトルにマッチを通知します。

ターゲット セッションの準備ができたら、タイトルはサービス品質 (QoS) チェックを実行してグループが一緒にプレイできることを確認するか、ゲームプレイを開始するためにプレイヤーをセッションに参加させるか、またはその両方を実行することができます。 QoS プロセスおよびマッチメイキングされたゲーム プレイ中、タイトルは、MPSD 内でセッション状態を最新の状態に保ち、セッションの変更に関する通知を MPSD から受信します。 このような変更には、ユーザーの参加または退出、セッション アービターの変更が含まれます。

### <a name="match-ticket-session"></a>マッチ チケット セッション

マッチ チケット セッションは、マッチを行うプレイヤーのクライアントを表します。 通常は、同じロビーにいるプレイヤーのグループに基づいて、または、それとは異なるタイトル固有のプレイヤーのグループに基づいて作成されます。 チケット セッションは、追加のプレイヤーを探している既に進行中のゲーム セッションの場合もあります。

### <a name="match-ticket"></a>マッチ チケット

マッチメイキングにチケット セッションを送信するとマッチ チケットが作成され、マッチ チケットはマッチメイキングの試行を追跡します。 ゲーム マップやプレイヤー レベルなどの属性をチケットに追加できます。 これらは、チケット セッション内のプレイヤーの属性と併せて、マッチを決定するために使用されます。

### <a name="hoppers"></a>ホッパー

ホッパーは、マッチメイキングの開始時にマッチ チケットが集められて指定される、論理的な場所です。 同じホッパーの内部にあるチケットのみがマッチング可能です。 タイトルは、複数のホッパーを持つことができますが、一度に 1 つのホッパーでしかマッチメイキングを開始できません。 たとえば、タイトルでは、プレイヤーのスキルがマッチングに最も重要な項目であるホッパーを作成できます。 同じダウンロード可能なコンテンツを購入している場合のみプレイヤーがマッチされる、別のホッパーを使用できます。

マッチメイキング用のホッパーはサービス構成で構成します。 TBD。

## <a name="quality-of-service-qos"></a>サービスの品質 (QoS)

ゲーマーがマルチプレイヤー ゲームをオンラインでプレイするとき、ゲームの品質は、ゲームをホストしているデバイス間のネットワーク通信品質に影響されます。 ネットワークが低品質だと、帯域幅不足や遅延によってラグや切断が発生し、ゲーム エクスペリエンスに支障をきたす可能性があります。

QoS は、プレイヤー間のオンライン接続の強度 (帯域幅と遅延) を測定し、すべてのプレイヤーのネットワーク接続品質が十分であることを保証することを指します。 マッチメイキング中にマッチングされるプレイヤーにとっては、ネットワーク品質の面で快適なエクスペリエンスを保証するために、これは特に重要です。 招待の場合、一緒にプレイするのはフレンドであり、接続が低品質であっても許容されやすい傾向があるため、QoS の優先度は下がります。

特定の基準に基づいて QoS を自動的に処理するようにセッションを構成したり、プレイヤーがセッションに参加するたびにゲームで QoS の測定を処理したりすることができます。
