---
title: "Xbox Integrated Multiplayer の概要"
author: KevinAsgari
description: "マルチプレイヤー、ネットワーキング、チャットに関する Xbox Live ゲーム用オール イン ワン ソリューションである Xbox Integrated Multiplayer (XIM) について説明します。"
ms.assetid: edbb28e6-1b6c-4f12-a9c6-fa8961de99a8
ms.author: kevinasg
ms.date: 04-04-2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: "Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One"
ms.openlocfilehash: 17e50c808a95ee3cab2f0d35342341d425534ab3
ms.sourcegitcommit: 90fbdc0e25e0dff40c571d6687143dd7e16ab8a8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/06/2017
---
# <a name="xbox-integrated-multiplayer-overview"></a>Xbox Integrated Multiplayer の概要

 Xbox Integrated Multiplayer (XIM) は、Xbox Live サービスの機能を使用してマルチプレイヤー向けのリアルタイム ネットワーキングおよびチャット コミュニケーションをゲームに簡単に追加できる自己完結型のインターフェイスです。 いくつかの重要な概念があります。

 - **XIM ネットワーク** - 特定のマルチプレイヤー エクスペリエンスに参加している相互接続されたユーザーのセットの論理表現、およびそのコレクションを記述する基本状態。 参加者は一度に 1 つの XIM ネットワークにだけ参加できますが、概念的な XIM ネットワークの間をシームレスに移動できます。
 - `xim_player` - ローカルまたはリモート デバイスにサインインして XIM ネットワークに参加している個別ユーザーを表すオブジェクト。 1 人の物理ユーザーが XIM ネットワークに参加し、いったん退出してから、再び同じ XIM ネットワークに参加した場合は、2 人の異なるプレイヤー インスタンスと見なされます。
 - `xim_authority` - XIM ネットワーク内ですべての参加者に対するゲーム固有の状態の一貫したビューを管理する権限と責任を持つ単一のエンティティを表すオブジェクト。 このオブジェクトの使用はオプションです。 このソフトウェア リリースでは現在、このオブジェクトの機能を利用できません。
 - `xim_state_change` - XIM ネットワークのいくつかの側面での非同期の変更に関するローカル デバイスに対する通知を表す構造体。
 - `xim::start/finish_processing_state_changes` - 非同期操作を実行し、処理する結果を `xim_state_change` 構造体の形式で取得して、処理の完了後に関連するリソースを解放するために、アプリのすべての UI フレームによって呼び出されるメソッドのペア。
 - **マッチメイキング** - 既存のソーシャル関係を必要としないで XIM ネットワークに参加するために同じ関心またはスキル レベルを持つ新しいリモート プレイヤーを発見するオプションのプロセス。

概念としては、アプリはライブラリを使用してローカル デバイス上の一連のユーザーを構成し、新しいプレイヤーとして XIM ネットワークに移動します。 リモート デバイスのアプリ インスタンスは独自のユーザーで同じことを行い、それぞれがすべての UI フレームで処理状態の変更を継続的に開始および終了するため、すべての参加インスタンスに `xim_state_change` の更新が提供されます。この更新には、その XIM ネットワークに参加するローカルおよびリモートの `xim_player` が記述されています。

XIM ネットワーク内では、アプリは、アバター移動の更新などの、独自のゲーム固有データ メッセージを送信できます。 これらは、他のプレイヤーを対象にすることも、(最善のネットワーク品質、安定性、プレイヤーの評判、他の要因に基づいて) 参加デバイスの 1 つに存在するように自動的に選択された `xim_authority` を対象にすることもできます。その `xim_authority` デバイス上のアプリは、プレイヤーにメッセージを返送できます。これらのメッセージは通常、ネットワークの効率と競合を調整するためにマージされます。 受信されたすべてのメッセージは、意図されるソースとローカル宛先を示す `xim_state_change` としてアプリに配信されます。

プライバシー設定とアプリの構成で許可されるすべてのプレイヤー間では、音声とテキストのチャット通信も自動的に提供されます。 音声からテキストまたはテキストから音声の変換を有効にしているプレイヤーの場合は、XIM は、この変換を透過的に実行して受信音声を表すチャット テキスト メッセージを配信し、送信チャット テキスト メッセージに対する合成された音声を再生します。

プレイヤーが XIM ネットワークへの参加を停止すると (正常終了またはネットワーク接続の問題のため)、`xim_player` が退出したことを示す `xim_state_change` 更新がすべてのアプリ インスタンスに提供されます。 `xim_authority` として選択されたデバイスが退出になると、権限の移動を開始することが、すべてのアプリ インスタンスに同じように通知されます。また、再同期用の代替 `xim_authority` にデータ バッファーをオプションで提供することで、ゲーム固有状態の "調整" が開始されます。 新しい権限は、すべてのプレイヤーからの必要な調整データを解釈し、"調整された" データ バッファーをすべてのプレイヤーに提供して、権限の移動と再同期プロセスを完了できます。 プレイヤーが XIM ネットワークに参加するときに、追加コードなしで権限によって現在の権限に関するゲームの状態を提供できるように、新しく参加するデバイスにも同じ基本調整手順が提供されます。 権限の状態の変化はこのソフトウェア リリースでは現在サポートされていないことに注意してください。

アプリは、複数の手段で参加する XIM ネットワークを決定できます。 多くの場合、アプリはローカル ユーザーをユーザーのフレンドが使用できる新しいネットワークに自動的に移動することで開始されます。ローカル ユーザーはそこで招待を送信することも、XIM ネットワークを参加可能なアクティビティとして (プレイヤー カードなどを通じて) 検出可能な状態にすることもできます。 このようにソーシャルな手段で検出されたユーザーの準備が整うと、アプリは Xbox Live の "マッチメイキング" プロセスを開始して、すべてのプレイヤーを新しい XIM ネットワークに移動できます。XIM ネットワークには、必要に応じてチーム/敵リストを埋めるための "マッチングされた" 追加リモート プレイヤーも含まれます。 次に、そのマルチプレイヤー エクスペリエンスが完了すると、アプリ インスタンスは、新しいプライベート XIM ネットワークに、またはマッチメイキングで見つかった別のランダム XIM ネットワークに、ローカル プレイヤーを (必要に応じて、マッチメイキング前の元のリモート プレイヤーも) 移動できます。 音声およびテキスト チャットは、全体を通して引き続き使用できます。 このように XIM ネットワーク間でプレイヤーを簡単に移動できることが API の中核であり、この動作には、優れたソーシャル ゲーム エクスペリエンスに対する期待が反映されています。

開始するには、「[XIM の使用](xbox-integrated-multiplayer/using-xim.md)」をご覧ください。

## <a name="xims-relationship-to-other-modules"></a>他のモジュールに対する XIM の関係

XIM は、基本的なマルチプレイヤーのニーズを持つゲームに対して便利なオールインワンのインターフェイスを提供するように設計されています。 この機能は、複数のモジュールの機能 (Xbox Services API (XSAPI) の `multiplayer_manager` モジュール、`Microsoft::Xbox::GameChat` ライブラリ、`Windows::Networking::XboxLive` セキュア マルチプレイヤー ネットワークなど) を、1 つの合理化された API にカプセル化します。 これにより、最大限の柔軟性と制御を必要としないマルチプレイヤー ゲームを構築するときに関係するコード、タスク、概念の量が減ります。 ただし、要件が XIM の簡素化の想定と一致しないアプリでは、代わりにこれらのコンポーネントを直接使用できます。

XIM では、基になるコンポーネントを介してマルチプレイヤー セッション ディレクトリ (MPSD) セッション ドキュメントやネットワーク転送などを管理する必要性の排除を目的としていますが、別のプレイヤー ロスターまたは通信メッシュの一部としてこれらを同時/サイド バイ サイドに使用することも不可能ではありません。 その場合、XIM と独自のメカニズムの間でネットワーク リソースの使用を調整する責任はアプリ側が負う必要があります。 XIM では現在、外部入力のみによるユーザー リストを使用した専用のチャット ソリューションとして簡単に利用できるように、"帯域外予約" がサポートされています。

Xbox Live は、マルチプレイヤー ゲームに役立つ他の多くの機能を提供しますが、マルチプレイヤー チャットおよびネットワーク通信のセットアップへの直接的な関係はあまりないため、このモジュールには含まれていません。 プレイヤー フィードバック、実績、ランキング、ストレージなどについては、Xbox Services API (XSAPI) をご覧ください。


## <a name="using-xim-as-a-dedicated-chat-solution-via-out-of-band-reservations"></a>帯域外予約を介した専用チャット ソリューションとしての XIM の使用

ほとんどのアプリでは、プレイヤーが集まるあらゆる場面の処理に XIM を使います。 一般的なマルチプレイヤー シナリオ全体をサポートするために必要なすべての機能を集めていることが、"Xbox 統合マルチプレイヤー" と呼ばれる理由です。 ただし、専用のインターネット サーバーを使用して独自のネットワーキング ソリューションを実装しているアプリでも、信頼性が高く待機時間が短い低コストのピア ツー ピア チャット通信を利用できます。 XIM ではこのようなニーズを把握し、現在では拡張モードをサポートしています。これを利用すると、XIM API 外で必要になる外部プレーヤー管理機能を補強するピア通信を簡素化できます。

> 帯域外予約を介した XIM の使用について詳しくは、「[XIM 予約](xbox-integrated-multiplayer/xim-reservations.md)」をご覧ください。
