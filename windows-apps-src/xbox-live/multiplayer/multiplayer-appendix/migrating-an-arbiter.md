---
title: アービターの移行
description: Xbox Live マルチプレイヤー 2015 でアービターを移行する方法を説明します。
ms.assetid: 9fb5d2c0-d548-4a22-b64e-6b215f78d22e
ms.date: 04/04/2017
ms.topic: article
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, アービター, マルチプレイヤー 2015
ms.localizationpriority: medium
ms.openlocfilehash: 7e250841fb0731a903c0e9c5bdeeecd42f07ac84
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57629707"
---
# <a name="migrating-an-arbiter"></a>アービターの移行

セッション全体のある時点で、アービター移行を使用して新しいアービターを選択する必要が生じる場合があります。 移行には、次の 2 種類があります。

-   **監視の正常な移行**
-   **フェールオーバーの監視の移行**

次のフロー チャートは、アービターを移行する方法を示しています。

![](../../images/multiplayer/Multiplayer_2015_HostMigration.png)

## <a name="graceful-arbiter-migration"></a>正常なアービター移行

正常なアービター移行では、退出するアービターが移行作業を支援して新しいアービターを決定できます。 この種類の移行」の説明に従って、監視の設定を使用して[方法。MPSD セッションの監視を設定](multiplayer-how-tos.md)します。


## <a name="failover-arbiter-migration"></a>フェールオーバー アービター移行

フェールオーバー アービター移行では、以前のアービターへの接続が失われ、残りのピアがセッションの新しいアービターを決定する必要があります。 フェールオーバー アービター移行でも、正常なアービター移行と同様に、ホスト デバイス トークンを設定し、HTTP/412 ステータス コードを処理します。 ただし、フェールオーバー アービター移行中に新しいアービターを選択する方法は複数あります。
## <a name="select-arbiter-using-the-host-candidate-list"></a>ホスト候補リストを使用したアービターの選択

特定の操作中に測定されたマッチメイキング QoS メトリックに基づく順序付きのホスト候補リストを提供するように MPSD を構成することができます。 クライアントは、このリストを使用して新しいアービターを決定できます。 このリストをアービター移行中に利用するために、各ピアは以下を行うことができます。

1.  前のアービターのリスト位置を識別します。
2.  リスト内の次の本体を評価します。
3.  その本体がローカル本体の場合は、それを新しいアービターとして使用します。
4.  その本体がマルチプレイヤー セッション内にもう存在していない、またはそのピアから切断されている場合は、リスト内の次の候補に移動し、前の手順と同様にそれを評価します。
5.  リストの末尾に達しても新しいアービターが選択されない場合は、アービター選択に対して、接続が切断される可能性がある greedy 法 (貪欲法) を使用します。 「greedy 法 (貪欲法) によるアービター選択の使用」を参照してください。

| 注                                                                                                                                                                                                                                                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 明示的なタイトル内 QoS プローブによってマッチメイキング後にゲーム内でホスト候補リストを作成することはお勧めできません。 このメカニズムがどうしても必要な場合は、クライアントが Xbox ユーザー ID などのユーザー情報の代わりにホスト デバイス トークンを使用してアービター候補を決定するようにします。 |


### <a name="select-arbiter-using-peer-voting"></a>ピア投票を使用したアービターの選択

すべてのピア間の完全な接続が存在する場合は、ピア メッセージを使用して新しいアービターの投票および選択を行うことができます。 新しいアービターは、同期更新を使用して、セッションのホスト デバイス トークンを更新します。 参照してください[方法。マルチ プレーヤーのセッションを更新](multiplayer-how-tos.md)します。


### <a name="use-greedy-arbiter-selection"></a>greedy 法 (貪欲法) によるアービター選択の使用

使用可能なホスト候補リストがない、または接続 QoS が不要な場合 (たとえば、純粋なアービターの責任の場合) があります。 このような場合は、クライアントは greedy 法 (貪欲法) によるアービター選択を使用できます。 この場合、ピアは、**MultiplayerSessionChanged** イベントによって報告される、元のアービターがゲーム セッションを離れたことを検出するとすぐに、新しいアービターを設定する必要があります。 他のすべてのピアは、この時点で他の変更がセッションに対して行われていないと仮定すると、ホスト デバイス トークンを設定しようとすると HTTP/412 ステータス コードを受け取ります。 1 つのピアのみが、新しいアービターの選択に成功します。


## <a name="see-also"></a>関連項目

[MPSD セッションの詳細](mpsd-session-details.md)
