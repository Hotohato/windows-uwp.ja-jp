---
title: オフラインのベスト プラクティス
author: KevinAsgari
description: Xbox Live 対応のタイトルのオフライン シナリオを処理するためのベスト プラクティスについて説明します。
ms.assetid: 6290dd67-1145-4fe2-8ada-c3a29a9ad29a
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
keywords: xbox live, xbox, ゲーム, uwp, windows 10, xbox one, オフライン
ms.localizationpriority: medium
ms.openlocfilehash: a552f275a69fde67f22d25a79b5b8c318c4f8dc3
ms.sourcegitcommit: 753e0a7160a88830d9908b446ef0907cc71c64e7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/30/2018
ms.locfileid: "5751835"
---
# <a name="best-practices-for-offline"></a>オフラインのベスト プラクティス

Xbox One はインターネット接続を前提にしたデバイスとして設計されており、マルチプレイヤー ゲームやビデオ ストリーミングのような最高の体験を得るにはインターネット接続が必要です。 ただし、Xbox One はさまざまな形態のオフライン プレイもサポートします。 このトピックでは、オフライン プレイの取り扱い方法について説明します。

## <a name="overview"></a>概要

インターネットにアクセスできる世界中のユーザーの数は増え続けています。 ただし、接続状況が予測不能な場所も世界にはまだ存在し、ルーターの故障、回線の切断、サーバーのクラッシュ、ワイヤレス サービスの停止などが起きる場合もあります。

できるだけ多くのユーザー、多様な体験に対応するために、Xbox One ではインターネット接続がときどき失われる、または完全に利用不能となる一般的なケースを許容します。 ゲームには接続障害が通知され、ゲーム側でどのように対応するか (完全なゲームプレイを継続するか、オフライン モードにダウングレードするか、それともゲームプレイを完全に終了するか) は自由に選択できます。

## <a name="normal-online-operation"></a>通常のオンライン動作

Xbox One は通常、完全に接続されている状態で動作します。これは、ユーザーが安定的にインターネットに接続し、Xbox Live およびサードパーティーのサービスに完全にアクセスできる状態のことです。 この接続状態では、Xbox Live サービスが定期的に本体の状態を検証したり、アップデートを提供したり、ゲームやユーザーのためにその他のバックグラウンド サービスを実行したりできます。

ユーザーがほぼ常時オンラインに接続していると想定することが推奨されます。

## <a name="offline-play-principles"></a>オフライン プレイの原則

オンライン接続が利用できない場合もあります。 オフライン プレイに対応するため、Xbox One は以下の原則を念頭に置いて設計されています。

-   最も重要な点として、接続の問題が起きた場合でもユーザーがプレイを続けられるようにします。

-   まったく接続していない場合でもユーザーがプレイを続けられるようにします。

-   常時接続の主旨を保ちつつ、ユーザーにとってシンプルで予測しやすいオフライン プレイを提供します。

## <a name="offline-modes"></a>オフライン モード

*接続喪失*のシナリオは 2 つに大別されます。

-   すべてのインターネット サービスにアクセスできない

-   1 つ以上のオンライン サービスにアクセスできない

これらのモードのそれぞれにおいて、さまざまな状況が発生する可能性があります。 これらのモードについて、ゲームプレイに影響を及ぼす一般的なオフライン シナリオの例と共に以下で説明します。

## <a name="offline-scenario-no-internet-service-upon-game-start"></a>オフラインのシナリオ: ゲーム開始時にインターネット サービスが利用できない

以下の 3 つのタイプのいずれかとしてゲームを宣言することができます。

-   *Xbox Live required (Xbox Live 必須)*: ゲームプレイのすべてのモードでインターネット接続が必要です。

-   *Xbox Live Gold required (Xbox Live ゴールド必須)*: ゲームプレイのすべてのモードで、インターネット接続と Xbox Live ゴールド メンバーシップが必要です。

-   *Xbox Live not required (Xbox Live 不要)*: インターネット接続を必要としない 1 つ以上のプレイ モードがゲームに用意されています。 厳密には、このタイプはアプリケーション マニフェストで明示的に宣言されるわけではありません。 最初の 2 つのタイプのどちらとしても宣言されないアプリが "Xbox Live not required"、つまりオフラインをサポートしていると見なされます。

ユーザーがゲームを開始した時点で本体がオフラインの場合、システムはゲームの接続に関するアプリケーション マニフェストの宣言をチェックします。 ゲームに接続が必要な (前に挙げた最初の 2 つのケースのいずれかに該当する) 場合、システムは自動的にメッセージをユーザーに表示し、タイトルを起動しません。

本体がオフラインの場合、システムは、接続を必要としない 1 つ以上のプレイ モードがあるタイトルのみを起動します。 つまり、システムは "Xbox Live required" または "Xbox Live Gold required" のタイトルを起動しません。

## <a name="offline-scenario-connectivity-lost-during-gameplay"></a>オフラインのシナリオ: ゲームプレイ中の接続の喪失

ゲームの実行中に接続が失われた場合、タイトルはシステムから通知を受けます。 ゲームがオンライン サービスを使用していない場合、中断せずにセッションを継続してください。 ゲームがオンライン サービスをアクティブに使用している場合、オンライン サービスが必要でないモードに切り替えるか、あるいは、オフライン状態が原因でゲーム セッションが終了することをプレイヤーに通知してください。

"Xbox Live required" または "Xbox Live Gold required" と宣言されたタイトルは、本体が一定時間すべてのネットワーク接続を失った時点でシステムによって自動的に中断され、システムは自動的にエラー メッセージをユーザーに表示します。

ゲームプレイの中断を伴う他のシナリオと同様、ユーザーがデータを失わないように、また、接続が復旧したらすぐにユーザーが元の状態に戻れるように状態を保存しておく必要があります。

## <a name="offline-scenario-when-a-single-xbox-live-service-is-down"></a>オフラインのシナリオ: Xbox Live サービスの 1 つがダウンしたとき

インターネット接続に問題はないが特定のオンライン サービスが利用できない、という状況が考えられます。

たとえば、Xbox Live サービスの 1 つがオフラインになる可能性があります。 この場合、その特定のサービスを呼び出すとタイムアウトになるか、またはゲームにエラーが報告されます。 Xbox 360 または Windows でそのような状況を扱う場合と同様に、サービスがオフラインになった状態を正しく取り扱う必要があります。

少なくとも、ゲームがクラッシュまたはハングしてはなりません。 サービスを利用できなければゲームプレイを継続できない場合は、状況をユーザーに報告し、そのサービスを必要としないゲームの別の領域でユーザーがプレイを続けられるようにします。

最も理想的なケースでは、ゲームプレイを継続した上で、データをキャッシュして後で送信する (ゲームがサービスにデータを書き込んでいた場合) か、またはデータに関する適切な仮定をたてて利用します (ゲームがサービスからデータを読み取っていた場合)。

## <a name="offline-scenario-when-a-third-party-service-is-down"></a>オフラインのシナリオ: サードパーティーのサービスがダウンしたとき

ゲームがサードパーティーのオンライン サービスに依存する場合、そのサービスがダウンした状況をゲームが柔軟に処理できる必要もあります。 サービスがダウンした場合にゲームがクラッシュまたはハングしてはなりません。 ゲームプレイを継続できない場合、サービスのエラーをユーザーに報告することができます。 可能であれば、ゲームプレイを継続するか、オンライン サービスを必要としないゲームの領域でユーザーがプレイを続けられるようにします。

## <a name="offline-scenario-when-xbox-live-cloud-compute-is-down"></a>オフラインのシナリオ: Xbox Live クラウド コンピューティングがダウンしたとき

Xbox One の目玉機能の 1 つはクラウドの処理能力です。 ゲームによっては、Xbox Live クラウド コンピューティングなどの常時接続型サービスに全面的に依存して、追加のコンピューティング機能または常時稼働のゲーム サーバーにアクセスする場合があります。 このような常時接続モードは、プレイヤーにとっての体験を強化する場合にその利用が許可および奨励されます。

ゲームでこのモードを使用する場合は、インターネットからの完全な切断または特定のクラウド サービスのダウンによって、数秒から最大 1 分間にわたってサービスが中断する状況をゲームで柔軟に処理できるようにすることを推奨します。 ただし、ゲームがオフライン モードを備えることは必須ではありません。 ゲームの進行にインターネット接続が必須の状況で接続が利用できない場合は、ユーザーにそのことを通知してゲームプレイ セッションを終了します。

## <a name="xbox-requirements"></a>Xbox 要件

オフラインのシナリオを扱うときに最も重要な要件は、ゲームの安定性です。 インターネットにまったく接続できなくなった、あるいは単に特定のオンライン サービスがダウンしたなど、どのような原因であれ、ゲームがハングまたはクラッシュしたり、ユーザーの状態が失われたりしてはなりません。 ネットワークのタイムアウトのシナリオに対応したり、オンライン サービスにアクセスする API から返されたエラーを処理したりするための堅牢なシステムをゲームに備える必要があります。

ゲームでオフライン プレイをサポートすることは必須ではありません。 サービスに接続できないためどうしてもゲームを継続できない場合は、ユーザーに通知して、ゲーム セッションを終了し、メイン メニューまたは初期のインタラクティブ状態に戻ります。

## <a name="best-practices"></a>ベスト プラクティス

オフラインの状況を取り扱うためのベスト プラクティスを以下に示します。

-   ユーザーがほぼ常時オンラインに接続していると想定してゲームを設計します。

-   ゲームの設計と整合性がある場合、本体がオフライン状態でもユーザーが楽しい体験を得ることができるゲームプレイ モードを設計することを検討します。

-   サービスが利用できなくなることがあります。 接続障害が発生することがあります。 オンライン サービスがダウンしているときやインターネット接続が失われたときに、タイムアウトすることがある API または障害状況を報告することがある API のために堅牢なエラー処理を構築します。 可能であれば常に、これらの問題が起きた場合でもユーザーがプレイを続けられるようにします。

-   Xbox 認定要件 (XR) に従います。 ハングまたはクラッシュしてはなりません。

-   PLM タイトル中断通知を受け取ったら、状態を保存して、ユーザーがデータを失わないように、また、ゲーム再開時にユーザーがすぐに元の状態に戻れるようにします。

-   アプリケーション マニフェストでタイトルに適切なフラグを付けます。 すべてのゲームプレイ モードで接続が必要な場合のみ、"Xbox Live required" としてタイトルをマークします。

-   Xbox One のゲームはすべてのゲーム モードでオンライン サービスを利用でき、それらのサービスに依存できます。 サービスに接続できないためどうしてもゲームを継続できない場合は、ユーザーに通知し、ゲーム セッションを終了し、メイン メニューまたは初期のインタラクティブ状態に戻ります。

-   オフライン状態に関連するエラー メッセージやヘルプを Xbox ヘルプ サービスに頼らないでください。 Xbox ヘルプ サービスには Xbox Live への接続が必要です。

## <a name="conclusion"></a>まとめ

Xbox One は常時接続を想定して設計されています。 ただし、今はまだそのビジョンの途上であり、プレイヤーはオフラインのシナリオを楽しむことができます。 ゲームは接続障害に対して堅牢である必要があります。 オフライン プレイが可能なゲームでは、プレイヤーがオフラインでの体験を最大限に楽しめるようにします。 オンライン専用のゲームでネットワーク接続が失われたときは、ユーザーをオフラインの状態に正常に戻します。
