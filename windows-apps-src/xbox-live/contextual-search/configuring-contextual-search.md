---
title: コンテキスト検索の構成
description: ゲーム クリップやゲーム配信にタグ付けするようにコンテキスト検索を構成する方法について説明します。
ms.assetid: 6cb2cb10-811a-4b20-9b9b-a3fc59a033c2
ms.date: 04/04/2017
ms.topic: article
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, サービス構成, コンテキスト検索, ゲーム クリップ, 配信
ms.localizationpriority: medium
ms.openlocfilehash: c8c78f115a160c82a28881a3c551a958cdf4b68c
ms.sourcegitcommit: d7613c791107f74b6a3dc12a372d9de916c0454b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/06/2018
ms.locfileid: "8754334"
---
# <a name="configuring-contextual-search"></a>コンテキスト検索の構成

## <a name="configuration-info"></a>構成情報

### <a name="designing-your-data"></a>データの設計
コンテキスト検索に対応するようにタイトルを構成するときは、タイトルを独特なものにする要素について検討することが重要です。  ユーザーがビデオ コンテンツを探している場合、真っ先に検索しようとするのは何でしょうか。  データの粒度をどのくらいにする必要があるでしょうか。

コンテキスト検索はコンテンツのフィルター処理と並べ替えの両方の機能をサポートします。そのため、メタデータはこれらの検索構造を反映していて、広い対象範囲を保証するものである必要があります。  ゲームのデータを 2 つの軸で考えることをお勧めします。
1. ゲームの状態:   レベル、キャラクター、武器、マップ、ロール、チェックポイント/ストーリー ポイント、DLC など
2. ユーザー スキル:  K/D 比率、名声、ランク、スピード ラン タイムなど

最初の軸はコンテンツのフィルター処理に適しており、2 番目の軸は並べ替えに適しています。  また、表示されるコンテンツの種類に応じて、統計粒度のレベルを変えることが重要です。  配信の場合、どのような時点でもアクティブな配信の数は限られていることを考慮すると、粒度の低いデータの方が検索が成功する可能性は確実に高くなります。  ゲーム クリップの場合、クリップの数は増え続けるので、より粒度の高いデータの方がより正確な結果が保証されます。

多くの場合、このようなデータは、リッチ プレゼンスやヒーロー情報などの Xbox Live 機能のために作成済みであることから、コンテキスト検索の構成は、既に完了している作業の成果を活用する絶好の機会です。

統計を使用してコンテンツをフィルター処理する場合は、コンテキスト検索のすべての統計に対していつでもクエリを実行できるようにしておくことが重要です。  それに応じて、このコンテキスト検索をサポートするようにイベント処理を設計してください。

たとえば、SinglePlayerMap や MultiplayerMap のような統計を使用してコンテンツをフィルター処理する場合、プレイヤーは一度に 1 つのマップにしか存在できません。  ただし、どちらの値もサービスからいつでもクエリすることができます。  また、一方を設定したら、もう一方をクリアすることが重要です。  文字列ベースの統計については、空の文字列が適しています (UI 構成でオプションとしてその文字列を含めないでください)。

### <a name="configuring-a-stat-for-contextual-search"></a>コンテキスト検索のための統計の構成
タグ付けに使用するイベントや統計の設定が済んでいれば、コンテキスト検索のためにタイトルを構成する作業は簡単です。  既によくご存知ない場合は、コンテキスト検索の設定では、その他の既存の XDP またはパートナー センターのドキュメントを参照してください。

![](../images/contextual_search/config02.png)

上の画像は、XDP のメインのサービス構成部分で [Contextual Search] (コンテキスト検索) タイルをクリックした後のメイン ページの例です。

このページを初めて表示する場合でも、コンテキスト検索のために構成済みの統計が表示されていることがあります。  これは、すべてのヒーロー情報がコンテキスト検索のために自動的に設定されるためです。 これらのヒーロー情報は、構成に保持しておく必要はありませんが、通常は並べ替えに適しています (また、既に自動的に完了しています)。

現在、コンテキスト検索のために構成できる統計インスタンスの最大数は 10 です。

このページでは、それぞれの統計は次のような形式で表されます: 優先度 - 表示名 (統計インスタンス名)

これらの各項目は次のセクションで詳しく説明します。

![](../images/contextual_search/config01.png)

上の画像は、コンテキスト検索の統計を新規作成したり、既存の統計を編集したりする場合に選ぶと表示される画面です。

コンテキスト検索の統計を正しく構成するには、次の手順を実行します。
1. 統計インスタンスを選択します。

  ![](../images/contextual_search/config03.png)

  統計インスタンスのみがサポートされていることに注意してください。統計テンプレートは使用できません。  可視性 (XDP またはパートナー センターの [統計] 部分で構成されている) 統計インスタンスに対して設定した注意する必要があります。  **[開く]** とマークされた統計のみがサード パーティー エクスペリエンスに表示されます。

2. 統計の優先度 ([Priority]) を選択します。 これは、検索エクスペリエンス/アルゴリズムにおけるこの統計の重要性を、他の統計との相対値で示すための方法です。  許容値は 1 ～ 10 です (1 が最高)。  この値を 0 または空白のままにすると無視されます。
3. 表示名 ([Display Name]) を追加します。  これはローカライズ可能な文字列で、エンド ユーザーに対して表示されます。
4. この統計を結果のフィルター処理または並べ替えに使用するかどうかを、チェック ボックスで選択します。  一部のインスタンスでは両方のチェック ボックスをオンにすることができます (統計の値が数値であり、定義した範囲に収まっている場合)。
5. 統計値の表現方法を選択します。  この場合、3 つのオプションがあります。
   * [Raw Value] (未処理の値) - 統計はそのまま表され、範囲の要件は適用されません。  並べ替えに使用するのに最適です。
   * [Set] (セット) - 値は個別のローカライズ可能な文字列にマップされます。  フィルター処理に使用するのに最適です。
   * [Range] (範囲) - 値は最小および最大の範囲内に収まります。  この種類の表現方法は、データに基づいたフィルター処理と並べ替えの両方を行いたい場合に適しています。

#### <a name="explaining-sets"></a>セットの説明
セットとは、潜在的な統計値を、エンド ユーザーに表示できるローカライズ可能な文字列にマップする方法のことです。  セットは、フィルター処理に使用するコンテキスト検索の統計にとって非常に重要です。

{% raw %} たとえば、SinglePlayerMap という整数の統計があるとします。  一連の数値をエンド ユーザーに提示しても意味がありません。  代わりに、```{{0, “Blood Gulch”}, {1, “Lockout”}, {2, “Zanzibar”}}``` のようなマッピングのセットを作成します。  ユーザーには文字列が表示されますが、開発側はコンテキスト検索の検索クエリの一部として数値を使用します。  セットでは、整数または文字列をローカライズされた文字列にマップすることができます。
{% endraw %}

### <a name="updating-your-contextual-search-document"></a>コンテキスト検索ドキュメントの更新
現時点では配信 (揮発性のデータ) のみがサポートされているため、現状ではコンテキスト検索ドキュメント上で統計を容易に変更できます。  (2015 年 9 月に) ゲーム クリップのタグ付けのサポートが開始された後は、統計を追加または削除する場合に、既にインデックス付けされているクリップに影響を及ぼすことになります。  新しい状態を追加する場合、変更が有効になった後に作成された配信やゲーム クリップのみがタグ付けされ、新しい状態を使用したクエリで、新しくタグ付けされたものが結果にh表示されます。以前のゲーム クリップはこの状態に対してクエリ可能になりません。コンテキスト検索ドキュメントから、状態を削除すると、ゲーム クリップに関連づけられた以前の状態は意味がなくなり、結果が返りません。
