---
author: shawjohn
Description: "顧客にアプリの評価またはアドオンの購入などを勧めるために、Windows デベロッパー センターからアプリにターゲット プッシュ通知を送信する方法について説明します。"
title: "アプリの顧客にターゲット プッシュ通知を送信する"
ms.author: johnshaw
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, UWP
ms.assetid: 16386c81-702d-47cd-9f91-67659f5dca73
translationtype: Human Translation
ms.sourcegitcommit: 5645eee3dc2ef67b5263b08800b0f96eb8a0a7da
ms.openlocfilehash: a2bd3308863b6343a7616bf86e0b0036f1631bcd
ms.lasthandoff: 02/08/2017

---

# <a name="send-targeted-push-notifications-to-your-apps-customers"></a>アプリの顧客にターゲット プッシュ通知を送信する

アプリ開発者として成功するには、適切なメッセージを適切なタイミングで送信して顧客を惹きつけることが重要です。 Windows デベロッパー センターは、すべての顧客に、または[顧客セグメント](create-customer-segments.md)で定義した条件を満たす Windows 10 の顧客のサブセットだけにプッシュ通知を送信できる、データドリブンの顧客エンゲージメント プラットフォームを提供します。

ターゲット プッシュ通知を使用して、アプリの評価、アドオンの購入、新機能の試用、または別のアプリのダウンロードなどを実行するようユーザーを促すことができます。

> **重要** ターゲット プッシュ通知は UWP アプリでのみ使用できます。

## <a name="getting-started-with-push-notifications"></a>プッシュ通知の使い方の概要に関するページ

プッシュ通知を使用して顧客と関わりあうには、大まかには 3 つの操作を実行する必要があります。
1. **プッシュ通知を受け取るためにアプリを登録します。** これを実行するには、アプリで Microsoft Store Services SDK への参照を追加し、デベロッパー センターとアプリ間で通知チャネルを登録するコードを数行追加します。 そのチャネルを使用して、プッシュ通知を顧客に配信します。 詳しくは、「[デベロッパー センターのプッシュ通知を受信するようにアプリを設定する](../monetize/configure-your-app-to-receive-dev-center-notifications.md)」をご覧ください。
2. **対象にする 1 つ以上の顧客セグメントを作成します。** 人口統計または収益条件に基づいて顧客をセグメントにグループ化することができます。 詳しくは、「[顧客セグメントの作成](create-customer-segments.md)」をご覧ください。
3. **プッシュ通知を作成し、特定の顧客セグメントに送信します。** たとえば、新しい顧客にアプリの評価を促すために通知を送信する、またはアドオンの購入を促進する特別サービスを含む通知を送信します。

## <a name="to-create-and-send-a-targeted-push-notification"></a>ターゲット プッシュ通知を作成して送信するには

1. まだこれを実行していない場合は、[Microsoft Store Services SDK](http://aka.ms/store-em-sdk) をインストールして、アプリのスタートアップ コードで [RegisterNotificationChannelAsync](https://msdn.microsoft.com/library/windows/apps/mt771190.aspx) メソッドを呼び出し、アプリを登録して通知を受け取ります。 このメソッドを呼び出す方法の詳細については、「[デベロッパー センターの通知を受け取るようにアプリを構成する](../monetize/configure-your-app-to-receive-dev-center-notifications.md)」をご覧ください。
2.    [Windows デベロッパー センター ダッシュボード](https://developer.microsoft.com/dashboard/overview)で、アプリを選びます。
3.    左側のナビゲーション メニューで、**[サービス]** を展開して、**[プッシュ通知]** を選択します。
4.    **ターゲット プッシュ通知**ページで、**[新しい通知]** を選択します。
5.    **[テンプレートの選択]** セクションで、送信する通知の種類を選択します。 詳しくは、「[通知テンプレートの種類](#notification-template-types)」をご覧ください。
  ![通知テンプレート](images/push-notifications-template.png)
6.    **[通知設定]** セクションで、通知の **[名前]** を選択し、通知を送信する **[顧客グループ]** を選択します。
セグメントをまだ作成していない場合は、**[新しい顧客グループの作成]** を選択します。 新しいセグメントで通知を使用できるようになるまでに、24 時間かかることに注意してください。 詳しくは、「[顧客セグメントの作成](create-customer-segments.md)」をご覧ください。
7.    通知を送信するタイミングを指定する場合は、**[すぐに通知する]** チェック ボックスをオフにして、特定の日付と時刻を選択します。
8.    ある時点で通知を期限切れにする場合は、**[通知を無期限にする]** チェック ボックスをオフにして、特定の有効期限の日付と時刻を選択します。
9.    **[通知のコンテンツ]** セクションの **[言語]** メニューで、通知に表示する言語を選択します。 詳しくは、「[通知の翻訳](#translate-your-notifications)」をご覧ください。
10.    **[オプション]** セクションで、テキストを入力し、その他の必要なオプションを構成します。 テンプレートを使用して開始した場合は、既定でこの一部が提供されますが、必要な変更を加えることができます。
   使用している通知の種類に応じて、利用可能なオプションが異なります。 オプションの一部を次に示します:
   - **アクティブ化の種類** (対話型トースト型)。 **[フォアグラウンド]**、**[バックグラウンド] **、または **[プロトコル]** を選択できます。
   - **起動** (対話型トースト型)。 通知がアプリを開くか、Web サイトを開くかを選択できます。
   - **アプリの起動率の追跡** (対話型トースト型)。 各通知を通じて、効率的に集客しているかを測定する場合は、このチェック ボックスを選択します。 詳しくは、「[通知のパフォーマンスの測定](#measure-notification-performance)」をご覧ください。
   - **期間** (対話型トースト型)。 **[短い]** または **[長い]** を選択できます。
   - **シナリオ** (対話型トースト型)。 **[既定]**、**[アラーム]**、**[リマインダー]**、または **[着信]** を選択できます。
   - **ベース URI** (対話型トースト型)。 詳しくは、「[BaseUri](https://msdn.microsoft.com/library/windows/apps/br208712)」をご覧ください。
   - **イメージ クエリの追加** (対話型トースト型)。 詳しくは、「[addImageQuery](https://msdn.microsoft.com/library/windows/apps/br230847)」をご覧ください。
   - **ビジュアル  **。 イメージ、ビデオ、またはサウンド。 詳しくは、「[ビジュアル](https://msdn.microsoft.com/library/windows/apps/br230847)」をご覧ください。
   - **入力**/**アクション**/**選択** (対話型トースト型)。 ユーザーが通知と対話できるようにします。 詳しくは、「[アダプティブ トースト通知と対話型トースト通知](../controls-and-patterns/tiles-and-notifications-adaptive-interactive-toasts.md#actions)」をご覧ください。
   - **バインド** (対話型タイル型)。 トースト テンプレート。 詳しくは、「[バインド](https://msdn.microsoft.com/library/windows/apps/br230843)」をご覧ください。

   > **ヒント:** 設計、アダプティブ タイル通知と対話型トースト通知を設計してテストするには、[Notifications Visualizer](https://www.microsoft.com/store/apps/9nblggh5xsl1) アプリを試してみてください。

11.    後で通知の作業を続ける場合は **[下書きとして保存]** を、すべて完了している場合は **[送信]** を選択します。

> **注:** 通知のコンテンツは、ストア [コンテンツ ポリシー](https://msdn.microsoft.com/library/windows/apps/dn764944.aspx#content_policies)に準拠する必要があります。

## <a name="notification-template-types"></a>通知テンプレートの種類

さまざまな通知テンプレートから選択できます。

-    **空白 (トースト)。** カスタマイズできる空のトースト通知から始めます。 トースト通知は、顧客が別のアプリ内、スタート画面、またはデスクトップ上にいるときに、アプリが顧客と対話できるようにするために画面に表示されるポップアップ UI です。
-    **空白 (タイル)。** カスタマイズできる空のタイル通知から始めます。 タイルは、スタート画面でのアプリの表示です。 タイルは "ライブ" にすることができます。つまり、タイルに表示されるコンテンツは、通知に応じて変化させることができます。
-    **評価の依頼 (トースト)。** 顧客にアプリの評価を求めるトースト通知。 顧客が通知を選択すると、アプリのストア評価ページが表示されます。
-    **フィードバックの依頼 (トースト)。** 顧客にアプリのフィードバックを送信するよう求めるトースト通知。 顧客が通知を選択すると、アプリのフィードバック Hub ページが表示されます。
   > **注:** このテンプレートの種類を選択した場合、**[起動]** ボックスで、必ず {PACKAGE_FAMILY_NAME} プレースホルダーの値をアプリの実際のパッケージ ファミリ名 (PFN) に置き換えてください。 アプリの PFN は、[アプリ ID](view-app-identity-details.md) ページ (**[アプリ管理]** > **[アプリ ID]**) で確認できます。

   ![フィードバックのトースト起動ボックス](images/push-notifications-feedback-toast-launch-box.png)
-    **クロス プロモーション (トースト)。** 任意の別のアプリを販売促進するトースト通知。 顧客が通知を選択すると、他のアプリのストア登録情報が表示されます。
  > **注:**このテンプレートの種類を選択した場合、**[起動]** ボックスで、必ず **{ProductId you want to promote here}** プレースホルダーの値を相互に販売促進するアイテムの実際のストア ID に置き換えてください。 ストア ID は、[アプリ ID](view-app-identity-details.md) ページ (**[アプリ管理]** > **[アプリ ID]**) で確認できます。

  ![クロス プロモーションのトースト起動ボックス](images/push-notifications-promote-toast-launch-box.png)
-    **販売の促進 (トースト)。** アプリのクーポンの通知に使用できるトースト通知。 顧客が通知を選択すると、アプリのストア登録情報が表示されます。
- **更新のプロンプト (トースト)。** 古いバージョンのアプリを実行している顧客に最新バージョンをインストールするよう促すトースト通知。 顧客が通知を選択すると、ストア アプリに **[ダウンロードと更新]** 一覧が表示されます。 このテンプレートを使用するために顧客セグメントを作成する必要はないことに注意してください。 この通知は 24 時間以内にスケジュールされ、アプリの最新バージョンをまだ実行していないすべてのユーザーを対象にもれなく送信されます。

## <a name="measure-notification-performance"></a>通知のパフォーマンスの測定

各通知を通じて、効率的に集客しているかを測定できます。

###<a name="to-measure-notification-performance"></a>通知のパフォーマンスを測定するには

1.    通知を作成するときに、**[通知のコンテンツ]** セクションで **[アプリの起動率の追跡]** チェック ボックスを選択します。
2.    アプリで、[ParseArgumentsAndTrackAppLaunch](https://msdn.microsoft.com/library/windows/apps/microsoft.services.store.engagement.storeservicesengagementmanager.parseargumentsandtrackapplaunch.aspx) メソッドを呼び出して、ターゲット通知に対する応答でアプリが起動されたことをデベロッパー センターに通知します。 このメソッドは Microsoft ストア SDK によって提供されます。 このメソッドを呼び出す方法の詳細については、「[デベロッパー センターの通知を受け取るようにアプリを構成する](../monetize/configure-your-app-to-receive-dev-center-notifications.md)」をご覧ください。

###<a name="to-view-notification-performance"></a>通知のパフォーマンスを表示するには

前述のとおり、[通知のパフォーマンスを測定](#to-measure-notification-performance)するように通知とアプリを構成すると、ダッシュボードを使用して通知のパフォーマンス状態を表示できます。

1.  ダッシュボードで、アプリのいずれかを選択します。
2.  左側のメニューの **[サービス]** セクションを展開して、**[プッシュ通知]** を選択してそのアプリに関連付けられている通知を表示します。
3.    **ターゲット プッシュ通知**ページで、**[進行中]** または **[完了]** を選択し、**[配信率]** 列と **[アプリ起動率]** 列を参照して、通知ごとの大まかなパフォーマンスを確認します。
4.  さらに詳細なパフォーマンスを確認するには、通知名を選択します。 **[配信統計]** セクションが表示され、次の通知**状態**の種類の **[カウント]** と **[割合]** の情報が表示されます。
 - **失敗**: 何らかの理由で、通知が配信されませんでした。 これは、Windows 通知サービスで問題が発生した場合などに発生します。
 - **チャネルの有効期限エラー**: アプリとデベロッパー センター間のチャネルの有効期限が切れているため、通知を配信できませんでした。 これは、顧客が長期間アプリを開いていない場合などに発生します。
 - **送信中**: 通知がキューで送信待ちになっています。
 - **送信済み**: 通知が送信されました。
 - **起動**: 通知が送信され、顧客が通知をクリックして、その結果、アプリが開かれました。 これは、アプリの起動のみを追跡することに注意してください。 ストアを起動して評価をするなど、他のアクションを実行するよう顧客に促す通知は、この状態には含まれていません。
 - **不明**: この通知の状態を特定できませんでした。

## <a name="translate-your-notifications"></a>通知の翻訳

通知を最大限に活用するには、顧客が希望する言語に翻訳することを検討します。 デベロッパー センターでは、優れた [Microsoft Translator](https://msdn.microsoft.com/library/dd576287.aspx) サービスを活用して、通知を簡単に自動的に翻訳できます。

1.    通知を既定の言語で記述したら、**[言語の追加]** (**[通知のコンテンツ]** セクションの **[言語]** メニューの下) を選択します。
2.    **[言語の追加]** ウィンドウで、通知を表示する追加の言語を選択し、**[更新]** を選択します。
通知は **[言語の追加]** ウィンドウで選択した言語に自動的に翻訳され、これらの言語は **[言語]** メニューに追加されます。
3.    通知の翻訳を確認するには、**[言語]** メニューで、追加した言語を選択します。

翻訳に関する考慮事項:
 - 選択した言語の **[コンテンツ]** ボックスに別のテキストを入力すると、自動翻訳を上書きできます。
 - 自動翻訳を上書きした後に英語バージョンの通知に別のテキスト ボックスを追加した場合は、新しいテキスト ボックスは翻訳済みの通知には追加されません。 その場合、翻訳済みの通知ごとに新しいテキスト ボックスを手動で追加する必要があります。
 - 通知が翻訳された後に英語のテキストを変更した場合は、翻訳済みの通知は変更に合わせて自動的に更新されます。 ただし、初期の翻訳を上書きすることを以前に選択している場合は、この処理は適用されません。

## <a name="related-topics"></a>関連トピック
- [UWP アプリのタイル、バッジ、通知](../controls-and-patterns/tiles-badges-notifications.md)
- [Windows プッシュ通知サービス (WNS) の概要](../controls-and-patterns/tiles-and-notifications-windows-push-notification-services--wns--overview.md)
- [Windows プッシュ通知サービス (WNS) の概要 (Windows ランタイム アプリ)](https://msdn.microsoft.com/library/windows/apps/hh913756.aspx)
- [Notifications Visualizer アプリ](https://www.microsoft.com/store/apps/9nblggh5xsl1)
- [StoreServicesEngagementManager.RegisterNotificationChannelAsync() | registerNotificationChannelAsync() メソッド](https://msdn.microsoft.com/library/windows/apps/mt771190.aspx)
- [顧客セグメントとプッシュ通知: Windows デベロッパー センター Insider Program の新機能 (ブログの投稿)](https://blogs.windows.com/buildingapps/2016/08/17/customer-segmentation-and-push-notifications-a-new-windows-dev-center-insider-program-feature/#XTuCqrG8G5IMgWew.97)

