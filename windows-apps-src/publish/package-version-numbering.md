---
author: jnHs
Description: The Microsoft Store enforces certain rules related to version numbers, which work somewhat differently in different OS versions.
title: パッケージ バージョンの番号付け
ms.assetid: DD7BAE5F-C2EE-44EE-8796-055D4BCB3152
ms.author: wdg-dev-content
ms.date: 10/31/2018
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 5bd34c285a74c0fbe7e51f1f3fa53cdde33733dd
ms.sourcegitcommit: cbe7cf620622a5e4df7414f9e38dfecec1cfca99
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/21/2018
ms.locfileid: "7433919"
---
# <a name="package-version-numbering"></a>パッケージ バージョンの番号付け

提供する各パッケージには、バージョン番号がある必要があります (アプリ マニフェストの [Package/Identity](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity) 要素の **Version** 属性の値として提供されます)。 Microsoft Store ではバージョン番号に関する特定の規則が適用され、別の OS バージョンでは機能が多少異なります。

> [!NOTE]
> このトピックでは「パッケージ」いますが、記載されていない場合、同じ規則が適用.msix/.appx および.msixbundle/.appxbundle ファイルの両方のバージョン番号。


## <a name="version-numbering-for-windows10-packages"></a>Windows 10 パッケージのバージョン番号付け

> [!IMPORTANT]
> Windows 10 (UWP) パッケージ、バージョン番号の最後 (4 番目) セクションはストア用に予約されておりままにしてする必要があります 0 (ただし、ストアは、このセクションの値を変更することが)、パッケージをビルドするとします。 その他のセクションでは、0 ~ 65535 (を除き、最初のセクションを 0 にすることはできません) の整数に設定する必要があります。

公開された申請から UWP パッケージを選択するとき、Microsoft Store は常にユーザーの Windows 10 デバイスに適用可能な最も高いバージョンのパッケージを使用します。 これにより高い柔軟性が与えられ、特定のデバイスの種類のユーザーにどのパッケージを提供するかを管理することができます。 重要なことに、これらのパッケージは任意の順序で申請することができます。後続の各申請でより高いバージョンのパッケージを提供する必要はありません。

同じバージョン番号を持つ複数の UWP パッケージを提供できます。 ただし、バージョン番号を共有するパッケージが同じアーキテクチャを持つことはできません。ストアで各パッケージに使用する完全な ID は一意である必要があるためです。 詳しくは、「[**Identity**](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity)」をご覧ください。

同じバージョン番号を使用する複数の UWP パッケージを提供する場合は、どのランクがより高い場合、ストアは、ユーザーのデバイスに提供するには、どのパッケージを決定します) を決定するアーキテクチャ (x64、x86、ARM、ニュートラルの順番) が使用されます。 バージョン番号が同じアプリ バンドルにランクを付けるときは、x64 パッケージが含まれているアプリ バンドルが x86 パッケージしか含まれていないアプリ バンドルより高いランクとなるようにバンドル内で最高のアーキテクチャのランクを考慮します。

これにより、アプリを時間をかけて進化させる大きな柔軟性が与えられます。 ハードウェアまたは OS の機能を活用するより厳密な依存関係を持つより高いバージョンのパッケージを追加する、アップロードし、小さいバージョン番号を使用して、以前サポートしていない Windows 10 デバイスのサポートを追加する新しいパッケージを提出できます。基本、既存の顧客の一部または全部に更新となるより高いバージョンのパッケージを追加できます。

次の例は、バージョン番号を管理して複数の申請でユーザーに目的のパッケージを提供する方法について説明します。

### <a name="example-moving-to-a-single-package-over-multiple-submissions"></a>例: 複数の申請で 1 つのパッケージに移行する

Windows 10 は、単一のコードベースを記述するすべての場所を実行できます。 これにより、新しいクロスプラットフォーム プロジェクトの開始がはるかに簡単になります。 ただし、さまざまな理由から、既存のコードベースを結合してすぐに 1 つのプロジェクトを作成したくない場合があります。

パッケージのバージョンの規則を使用して、暫定的な更新プログラム (windows 10 Api を利用するものを含む) 特定のデバイス ファミリの数を出荷しながら、ユニバーサル デバイス ファミリの 1 つのパッケージにお客様を徐々 に移行することができます。 次の例では、同じアプリの申請用の一連の間、同じ規則が一貫して適用されるしくみを示しています。

| 申請 | 内容                                                  | カスタマー エクスペリエンス                                                                                                                                                                             |
|------------|-----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1          | -   パッケージ バージョン: 1.1.10.0 <br> -   デバイス ファミリ: Windows.Desktop、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.1.0.0 <br> -   デバイス ファミリ: Windows.Mobile、minVersion 10.0.10240.0     | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上のデバイスでは 1.1.0.0 を取得。 <br> -   その他のデバイス ファミリでアプリの購入とインストールを行うことはできない。 |
| 2          | -   パッケージ バージョン: 1.1.10.0 <br> -   デバイス ファミリ: Windows.Desktop、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.1.0.0 <br> -   デバイス ファミリ: Windows.Mobile、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.0.0.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10240.0    | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上のデバイスでは 1.1.0.0 を取得。 <br> -   導入されているその他の (非デスクトップ、非モバイル) デバイス ファミリでは 1.0.0.0 を取得。 <br> -   アプリが既にインストールされているデスクトップ デバイスとモバイル デバイスでは更新が表示されない (利用可能な最高のバージョンが既にあり、1.1.10.0 と 1.1.0.0 は共に 1.0.0.0 より上位であるため)。 |
| 3          | -   パッケージ バージョン: 1.1.10.0 <br> -   デバイス ファミリ: Windows.Desktop、minVersion 10.0.10240.0 <br> <br> -   パッケージ バージョン: 1.1.5.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10250.0 <br> <br> -   パッケージ バージョン: 1.0.0.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10240.0    | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10250.0 以上のデバイスでは 1.1.5.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上 10.010250.0 未満のデバイスでは 1.1.0.0 を取得。 
| 4          | -   パッケージ バージョン: 2.0.0.0 <br> -   デバイス ファミリ: Windows.Universal、minVersion 10.0.10240.0   | -   Windows 10 ビルド v10.0.10240.0 以上のすべてのデバイス ファミリのすべてのユーザーはパッケージ 2.0.0.0 を取得。 | 

> [!NOTE]
>  どの場合でも、ユーザーのデバイスでは条件を満たす最も大きいバージョン番号のパッケージを受け取ります。 たとえば、上記の 3 番目の申請では、OS バージョン 10.0.10250.0 以上で v1.1.5.0 を取得できる場合でも、すべてのデスクトップ デバイスが v1.1.10.0 を取得します。 1.1.10.0 は利用可能な最も大きいバージョン番号であるため、これが取得するパッケージになります。

### <a name="using-version-numbering-to-roll-back-to-a-previously-shipped-package-for-new-acquisitions"></a>新規の取得のためにバージョン番号を使用して以前配布したパッケージにロールバックする

パッケージのコピーを維持する場合にロールバックするアプリのパッケージ、ストアで以前の windows 10 パッケージ場合は、リリースに関する問題を検出する必要がありますオプションがあります。 これは、問題を解決する時間がかかる間の顧客に限定する一時的な方法です。

これを行うには、新しい[申請](app-submissions.md)を作成します。 問題があるパッケージを削除して、ストアで提供する以前のパッケージをアップロードします。 ロールバックするパッケージを既に受け取っているユーザーは問題のあるパッケージを持ったままになります (以前のパッケージのバージョン番号がより小さいため)。 しかし、これにより、ストアでアプリを利用できるようにした間にその他のユーザーが問題のあるパッケージを取得することができなくなります。

問題のあるパッケージを既に受信した顧客の問題を解決をすることがすぐに問題のあるパッケージよりも大きいバージョン番号を持つ新しい windows 10 パッケージを提出することができます。 その申請の認定プロセスが完了すると、それがより大きいバージョン番号になるため、すべてのユーザーが新しいパッケージに更新されます。


## <a name="version-numbering-for-windows81-and-earlier-and-windows-phone-81-packages"></a>バージョン番号付け Windows8.1 (以前) と Windows Phone 8.1 パッケージ

> [!IMPORTANT]
> 2018 年 10 月 31 日の時点で、新しく作成した製品が Windows 8.x/Windows を対象とするパッケージを含めることはできません Phone 8.x 以前のバージョン。 詳しくは、この[ブログ記事](https://blogs.windows.com/buildingapps/2018/08/20/important-dates-regarding-apps-with-windows-phone-8-x-and-earlier-and-windows-8-8-1-packages-submitted-to-microsoft-store/#SzKghBbqDMlmAO4c.97)を参照してください。

Windows Phone 8.1 を対象とする .appx パッケージでは、新しい申請のパッケージのバージョン番号は最後の申請 (または、以前の申請) に含まれるパッケージの番号より常に大きい必要があります。

アーキテクチャごとを Windows8 と Windows8.1 をターゲットとする .appx パッケージでは、同じ規則が適用されます。 新しい申請のパッケージのバージョン番号は最後、同じアーキテクチャのストアに公開されたパッケージのより大きい常にある必要があります。

さらに、Windows8.1 パッケージのバージョン番号常に同じアプリ用の Windows8 パッケージのいずれかのバージョン番号より大きいである必要があります。 つまり、ユーザーが提出した Windows8 パッケージのバージョン番号は、同じアプリについて申請した Windows8.1 パッケージのバージョン番号よりも低いである必要があります。

> [!NOTE]
> アプリでは、windows 10 パッケージもに、windows 10 パッケージのバージョン番号 Windows8、Windows8.1、や Windows Phone 8.1 パッケージのいずれかより大きい場合があります。 詳しくは、[以前に公開されたアプリを windows 10 用の追加のパッケージ](guidance-for-app-package-management.md#adding-packages-for-windows-10-to-a-previously-published-app)を参照してください。

Windows8 と Windows8.1 を対象とするパッケージのさまざまなバージョン番号の更新シナリオで何が起きるの例をいくつかを示します。

| ストア内のアプリのバージョン  | アップロードするバージョン | 新しいバージョンが Microsoft Store にアップロードされた後の動作、新規インストールのバージョン | 新しいバージョンが Microsoft Store にアップロードされた後の動作、既存のバージョンの更新 |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------------------|----------|
| なし                                     | x86, v1.0.0.0               | x86, v1.0.0.0 (x86 と x64 の両方のコンピューター)                                                | なし。 |
| x86, v1.0.0.0                               | x64, v1.0.0.0               | 対応するアーキテクチャ用の v1.0.0.0                                                   | なし:  バージョン番号は同じであるため。 |
| x86, v1.0.0.0 <br> x64, v1.0.0.0            | x64, v1.0.0.1               | x86 の場合は v1.0.0.0 <br> x64 の場合は v1.0.0.1                 | アプリを x86 コンピューターで実行している場合はなし。 <br> アプリを x64 コンピューターで実行している場合は v1.0.0.0 から v1.0.0.1 に更新。 <br> **注:** 場合 x64 バージョンのアプリが実行されている x86 コンピューターで、アプリを x64 更新されませんバージョン アンインストールして再インストールしない限り、します。 |
| なし                                     | neutral, v1.0.0.1           | neutral, v1.0.0.1 (すべてのコンピューター)                                                         | なし。 |
| neutral, v1.0.0.1                           | x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | 対応するアーキテクチャ用の v1.0.0.0          | なし:  neutral, v1.0.0.1 のアプリは引き続き使用される。 |
| neutral, v1.0.0.1 <br> x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | 対応するアーキテクチャ用の v1.0.0.1 | neutral, v1.0.0.1 のアプリを実行している場合はなし。 <br> 特定のアーキテクチャ用の v1.0.0.0 のアプリを実行している場合は v1.0.0.0 から v1.0.0.1 に更新。 |
| x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | x86, v1.0.0.2 <br> x64, v1.0.0.2 <br> ARM, v1.0.0.2 | 対応するアーキテクチャ用の v1.0.0.2  | 特定のアーキテクチャ用の v1.0.0.1 のアプリを実行している場合は v1.0.0.1 から v1.0.0.2 に更新。 |

> [!NOTE]
> .appx パッケージとは異なり、.xap パッケージのバージョン番号は、特定の顧客にどのパッケージを提供するかを決める場合に考慮されません。 特定の .xap パッケージから新しいパッケージへと顧客を更新するには、新しい提出で以前の .xap を削除してください。
