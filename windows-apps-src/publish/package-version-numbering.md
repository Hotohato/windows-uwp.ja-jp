---
Description: Microsoft Store ではバージョン番号に関する特定の規則が適用され、別の OS バージョンでは機能が多少異なります。
title: パッケージ バージョンの番号付け
ms.assetid: DD7BAE5F-C2EE-44EE-8796-055D4BCB3152
ms.date: 10/31/2018
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 7a8ce14094733ef5598c510198f4268744cb581e
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57621877"
---
# <a name="package-version-numbering"></a>パッケージ バージョンの番号付け

提供する各パッケージには、バージョン番号がある必要があります (アプリ マニフェストの [Package/Identity](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity) 要素の **Version** 属性の値として提供されます)。 Microsoft Store ではバージョン番号に関する特定の規則が適用され、別の OS バージョンでは機能が多少異なります。

> [!NOTE]
> このトピックでは「パッケージ」が、記載されていない場合、同じルールが適用.msix/.appx と.msixbundle/.appxbundle の両方のファイル バージョン番号。


## <a name="version-numbering-for-windows10-packages"></a>バージョンの Windows 10 のパッケージの番号付け

> [!IMPORTANT]
> Windows 10 (UWP) のパッケージのバージョン番号の最後の (4) セクションはストアの使用に予約されているし、(ただし、ストアは、このセクションでは値を変更することが)、パッケージをビルドするときに、0 として残す必要です。 他のセクションでは、0 ~ 65535 (0 にすることはできません最初セクション) を除くの整数に設定する必要があります。

パブリッシュされた提出から UWP パッケージを選択するときに Microsoft Store は常にお客様の Windows 10 デバイスに適用できる最も高いバージョン管理されたパッケージを使用します。 これにより高い柔軟性が与えられ、特定のデバイスの種類のユーザーにどのパッケージを提供するかを管理することができます。 重要なことに、これらのパッケージは任意の順序で申請することができます。後続の各申請でより高いバージョンのパッケージを提供する必要はありません。

同じバージョン番号を持つ複数の UWP パッケージを行うことができます。 ただし、バージョン番号を共有するパッケージが同じアーキテクチャを持つことはできません。ストアで各パッケージに使用する完全な ID は一意である必要があるためです。 詳しくは、「[**Identity**](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity)」をご覧ください。

同じバージョン番号を使用する複数の UWP パッケージを提供する場合は (この場合、ストアでは、顧客のデバイスに提供すると、パッケージが決定されます) に、どれが順位の高いが決定する (順番に、x64、x86、ARM、中立) アーキテクチャが使用されます。 バージョン番号が同じアプリ バンドルにランクを付けるときは、x64 パッケージが含まれているアプリ バンドルが x86 パッケージしか含まれていないアプリ バンドルより高いランクとなるようにバンドル内で最高のアーキテクチャのランクを考慮します。

これにより、アプリを時間をかけて進化させる大きな柔軟性が与えられます。 ハードウェアまたは OS の機能を活用するためより厳密な依存関係のある高いバージョン管理されたパッケージを追加することができます。、アップロードし、下のバージョン番号を使用して、以前はサポートしていない Windows 10 デバイスのサポートを追加する新しいパッケージを送信できます。基本を既存の顧客の一部またはすべての更新プログラムとして機能するより高いバージョン管理されたパッケージを追加できます。

次の例は、バージョン番号を管理して複数の申請でユーザーに目的のパッケージを提供する方法について説明します。

### <a name="example-moving-to-a-single-package-over-multiple-submissions"></a>以下に例を示します。複数の送信を 1 つのパッケージへの移行

Windows 10 をにより 1 つのコードベースを記述すること、どこでも実行できることができます。 これにより、新しいクロスプラットフォーム プロジェクトの開始がはるかに簡単になります。 ただし、さまざまな理由から、既存のコードベースを結合してすぐに 1 つのプロジェクトを作成したくない場合があります。

パッケージのバージョン管理規則を使用して、段階的に数 (Windows 10 Api を活用するためのものを含む) の特定のデバイス ファミリの暫定的な更新プログラムの配布中には、ユニバーサル デバイス ファミリの 1 つのパッケージにお客様を移動することができます。 次の例では、同じ規則が同じアプリの提出にわたり一貫して適用されるしくみを示しています。

| 申請 | 目次                                                  | カスタマー エクスペリエンス                                                                                                                                                                             |
|------------|-----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1          | パッケージ バージョン:1.1.10.0 <br> デバイス ファミリ:Windows.Desktop、minVersion 10.0.10240.0 <br> <br> パッケージ バージョン:1.1.0.0 <br> デバイス ファミリ:Windows.Mobile、minVersion 10.0.10240.0     | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上のデバイスでは 1.1.0.0 を取得。 <br> -   その他のデバイス ファミリでアプリの購入とインストールを行うことはできない。 |
| 2          | パッケージ バージョン:1.1.10.0 <br> デバイス ファミリ:Windows.Desktop、minVersion 10.0.10240.0 <br> <br> パッケージ バージョン:1.1.0.0 <br> デバイス ファミリ:Windows.Mobile、minVersion 10.0.10240.0 <br> <br> パッケージ バージョン:1.0.0.0 <br> デバイス ファミリ:Windows.Universal, minVersion 10.0.10240.0    | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上のデバイスでは 1.1.0.0 を取得。 <br> -   導入されているその他の (非デスクトップ、非モバイル) デバイス ファミリでは 1.0.0.0 を取得。 <br> -   アプリが既にインストールされているデスクトップ デバイスとモバイル デバイスでは更新が表示されない (利用可能な最高のバージョンが既にあり、1.1.10.0 と 1.1.0.0 は共に 1.0.0.0 より上位であるため)。 |
| 3          | パッケージ バージョン:1.1.10.0 <br> デバイス ファミリ:Windows.Desktop、minVersion 10.0.10240.0 <br> <br> パッケージ バージョン:1.1.5.0 <br> デバイス ファミリ:Windows.Universal, minVersion 10.0.10250.0 <br> <br> パッケージ バージョン:1.0.0.0 <br> デバイス ファミリ:Windows.Universal, minVersion 10.0.10240.0    | -   Windows 10 デスクトップ ビルド 10.0.10240.0 以上のデバイスでは 1.1.10.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10250.0 以上のデバイスでは 1.1.5.0 を取得。 <br> -   Windows 10 Mobile ビルド 10.0.10240.0 以上 10.010250.0 未満のデバイスでは 1.1.0.0 を取得。 
| 4          | パッケージ バージョン:2.0.0.0 <br> デバイス ファミリ:Windows.Universal, minVersion 10.0.10240.0   | -   Windows 10 ビルド v10.0.10240.0 以上のすべてのデバイス ファミリのすべてのユーザーはパッケージ 2.0.0.0 を取得。 | 

> [!NOTE]
>  すべてのケースでは、お客様のデバイスは、対象となる最大の可能なバージョン番号を含むパッケージに表示されます。 たとえば、上記の 3 番目の申請では、OS バージョン 10.0.10250.0 以上で v1.1.5.0 を取得できる場合でも、すべてのデスクトップ デバイスが v1.1.10.0 を取得します。 1.1.10.0 は利用可能な最も大きいバージョン番号であるため、これが取得するパッケージになります。

### <a name="using-version-numbering-to-roll-back-to-a-previously-shipped-package-for-new-acquisitions"></a>新規の取得のためにバージョン番号を使用して以前配布したパッケージにロールバックする

パッケージのコピーを保持する場合、アプリのパッケージ ストアの場合にロールバック以前の Windows 10 のパッケージのリリースで問題を検出する必要があるオプションがあります。 これは、一時的な問題を解決する時間を取りながら顧客に中断を制限する方法です。

これを行うには、新しい作成[送信](app-submissions.md)します。 問題があるパッケージを削除して、ストアで提供する以前のパッケージをアップロードします。 ロールバックするパッケージを既に受け取っているユーザーは問題のあるパッケージを持ったままになります (以前のパッケージのバージョン番号がより小さいため)。 しかし、これにより、ストアでアプリを利用できるようにした間にその他のユーザーが問題のあるパッケージを取得することができなくなります。

問題のあるパッケージを既に受信しているお客様の場合、問題を解決するを不適切なパッケージより新しいバージョン番号を持つことができ、すぐに新しい Windows 10 のパッケージを送信できます。 その申請の認定プロセスが完了すると、それがより大きいバージョン番号になるため、すべてのユーザーが新しいパッケージに更新されます。


## <a name="version-numbering-for-windows81-and-earlier-and-windows-phone-81-packages"></a>バージョン番号を for Windows 8.1 (以降) および Windows Phone 8.1 パッケージ

> [!IMPORTANT]
> 2018 年 10 月 31 日の時点で、新しく作成された製品が Windows 8.x/Windows を対象とするパッケージを含めることはできません Phone 8.x 以前のバージョン。 詳細については、「この[ブログの投稿](https://blogs.windows.com/buildingapps/2018/08/20/important-dates-regarding-apps-with-windows-phone-8-x-and-earlier-and-windows-8-8-1-packages-submitted-to-microsoft-store/#SzKghBbqDMlmAO4c.97)します。

Windows Phone 8.1 を対象とする .appx パッケージでは、新しい申請のパッケージのバージョン番号は最後の申請 (または、以前の申請) に含まれるパッケージの番号より常に大きい必要があります。

アーキテクチャごとの .appx パッケージを Windows 8 および Windows 8.1 を対象とする、同じルールに適用されます。 新しい提出パッケージ内のパッケージのバージョン番号が、パッケージが最後に、同じアーキテクチャのストアに発行したよりも大きい常に場合があります。

さらに、Windows 8.1 のパッケージのバージョンの数は、同じアプリの Windows 8 パッケージのいずれかのバージョン番号より大きいは常にする必要があります。 つまり、送信する任意の Windows 8 パッケージのバージョン番号は、同じアプリを登録した Windows 8.1 のパッケージのバージョン番号より低くする必要があります。

> [!NOTE]
> アプリでは、Windows 10 のパッケージもに、Windows 10 のパッケージのバージョン番号、Windows 8、Windows 8.1、および Windows Phone 8.1 のパッケージのいずれかの場合よりも高い場合があります。 詳細については、次を参照してください。[以前発行されたアプリを Windows 10 用のパッケージを追加する](guidance-for-app-package-management.md#adding-packages-for-windows-10-to-a-previously-published-app)します。

Windows 8 および Windows 8.1 を対象とするパッケージを別のバージョン番号の更新シナリオでの動作のいくつかの例を示します。

| ストア内のアプリのバージョン  | アップロードするバージョン | 新しいバージョンが Microsoft Store にアップロードされた後の動作、新規インストールのバージョン | 新しいバージョンが Microsoft Store にアップロードされた後の動作、既存のバージョンの更新 |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------------------|----------|
| なし                                     | x86, v1.0.0.0               | x86, v1.0.0.0 (x86 と x64 の両方のコンピューター)                                                | なし。 |
| x86, v1.0.0.0                               | x64, v1.0.0.0               | 対応するアーキテクチャ用の v1.0.0.0                                                   | なし。 バージョン番号は同じであるため。 |
| x86, v1.0.0.0 <br> x64, v1.0.0.0            | x64, v1.0.0.1               | x86 の場合は v1.0.0.0 <br> x64 の場合は v1.0.0.1                 | アプリを x86 コンピューターで実行している場合はなし。 <br> アプリを x64 コンピューターで実行している場合は v1.0.0.0 から v1.0.0.1 に更新。 <br> **注**  場合、x86、x64 バージョンのアプリが実行されているコンピューター、アプリが x64 に更新を取得しませんバージョン顧客をアンインストールし、再インストールしない限り。 |
| なし                                     | neutral, v1.0.0.1           | neutral, v1.0.0.1 (すべてのコンピューター)                                                         | なし。 |
| neutral, v1.0.0.1                           | x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | 対応するアーキテクチャ用の v1.0.0.0          | なし。 neutral, v1.0.0.1 のアプリは引き続き使用される。 |
| neutral, v1.0.0.1 <br> x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | 対応するアーキテクチャ用の v1.0.0.1 | neutral, v1.0.0.1 のアプリを実行している場合はなし。 <br> 特定のアーキテクチャ用の v1.0.0.0 のアプリを実行している場合は v1.0.0.0 から v1.0.0.1 に更新。 |
| x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | x86, v1.0.0.2 <br> x64, v1.0.0.2 <br> ARM, v1.0.0.2 | 対応するアーキテクチャ用の v1.0.0.2  | 特定のアーキテクチャ用の v1.0.0.1 のアプリを実行している場合は v1.0.0.1 から v1.0.0.2 に更新。 |

> [!NOTE]
> .appx パッケージとは異なり、.xap パッケージのバージョン番号は、特定の顧客にどのパッケージを提供するかを決める場合に考慮されません。 特定の .xap パッケージから新しいパッケージへと顧客を更新するには、新しい提出で以前の .xap を削除してください。
