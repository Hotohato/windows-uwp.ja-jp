---
ms.assetid: 69E05E56-B5F0-4D4C-A1FF-B6EAFF5D0E28
description: 提出プロセス中に、表示する広告の仲介動作を構成できます。 コードを変更したり新しいパッケージを提出したりすることなく、この構成を後で調整することができます。
title: アプリの提出と広告の仲介の構成
---

# アプリの提出と広告の仲介の構成


\[Windows 10 の UWP アプリ向けに更新。 Windows 8.x の記事については、[アーカイブ](http://go.microsoft.com/fwlink/p/?linkid=619132)をご覧ください\]


アプリをビルドし、必要なすべての広告ネットワークを組み込み、アプリをテストしてすべてが動作していることを確認したら、アプリを提出する準備が完了します。 提出プロセス中に、表示する広告の仲介動作を構成できます。 コードを変更したり新しいパッケージを提出したりすることなく、この構成を後で調整することができます。

## アプリ パッケージ用の基本構成を作成する


パッケージをアップロードするときに、広告の仲介を使うことがデベロッパー センターで自動的に検出され、どの広告ネットワークを使うかが識別されます。 **[パッケージ]** ページに、**[広告メディエーションの構成]** リンクが表示されます。 このリンクをクリックすると、[[広告で収入を増やす]](https://msdn.microsoft.com/library/windows/apps/mt170658) ページへ移動します。このページの **[Windows 広告仲介]** では、メディエーションのロジックを構成できます。 このページの他のセクションについて詳しくは、「広告で収入を増やす」をご覧ください。

アプリに対して広告仲介に関する設定を初めて構成するときには、基本構成を作成します。 基本構成をセットアップした後、特定の広告ネットワークの強みをさまざまな市場で活用するために、市場に固有の構成を追加できます。 アプリを提出する前に広告仲介に関する設定を構成しなかった場合、デベロッパー センターによって[既定の設定](#default-ad-mediation-settings)が自動的に適用されますが、[これらの設定は後で変更できます](#optimize-ad-mediation-after-the-app-has-been-published)。

次の手順では、**[広告で収入を増やす]** ページの **[Windows 広告仲介]** で基本構成を作成する方法について説明します。

1.  **[メディエーションの構成対象]** で、構成するアプリ パッケージが選ばれていることを確認します。
2.  **[ターゲット]** で、**[ベースライン]** が選ばれていることを確認します。
3.  **[リフレッシュ レート]** で、仲介サイクルの長さ (新しい広告を表示する頻度) を選びます。 継続時間は、30 ～ 120 秒です。
    **注**  既にいずれかの広告ネットワーク ポータルでリフレッシュ レートを構成した場合は、ここで同じリフレッシュ レートを設定してください。
4.  次に、**[Windows 広告仲介]** に、アプリで使われる広告ネットワークの一覧が示され、アプリで各広告ネットワークを使う頻度を指定する 2 つの方法が提示されます。 **[仲介の種類]** ドロップダウン リストで、次のいずれかのオプションを選びます。

    -   **[重さ順］**。 アプリで使用される頻度を指定した割合を各広告ネットワークに適用するには、このオプションを選択します。 すべての広告ネットワークに設定した割合の合計が正確に 100% になる必要があります。 詳しくは、「[広告ネットワークに重みによる順序を適用する](#order-ad-networks-by-weight)」をご覧ください。
    -   **[ランク順]**。 ランク付けの番号 (1 ～ *n*) を各広告ネットワークに適用するには、このオプションを選択します。この番号により、アプリが各広告ネットワークを使う頻度が指定されます。 詳しくは、「[広告ネットワークにランクによる順序を適用する](#order-ad-networkds-by-rank)」をご覧ください。

    アプリが各広告ネットワークを使う頻度を指定する[既定の設定](#default-ad-mediation-settings)は、デベロッパー センターによって自動的に適用されます。

5.  アプリによって使用される広告ネットワークの一覧で、各広告ネットワーク プロバイダーのドロップダウン矢印をクリックし、各ネットワークに必要なパラメーターを表示して、必要なパラメーターを入力します。 パラメーターの一覧については、「[広告ネットワークの選択と管理](select-and-manage-your-ad-networks.md)」をご覧ください。

    各ネットワークのパラメーターの展開された一覧では、オプションで **[タイムアウト]** フィールドを使うことができます。このフィールドでは、広告仲介から広告ネットワークに広告を要求した後、その要求を破棄して別のネットワークへの要求を実行するまでの待機時間を秒数 (2 ～ 120) を指定できます。 既に[この値をコード内で指定](add-and-use-the-ad-mediator-control.md#set-timeouts)済みであれば、ここで指定した値はコード内で指定されている値で上書きされます。

    Microsoft advertising を使用している場合は、次の点に注意してください。

    -   **Microsoft Advertising** 用のパラメーターは、アプリ パッケージのコンテンツに基づいて、自動的に設定されます。 必要に応じて、**Microsoft Advertising** の**アプリケーション Id** と**広告ユニット Id** の値を独自に指定できます。
    -   **Microsoft Advertising** のほかに、**Microsoft Advertising 自社広告**の行もあります。 自社広告を利用すると、自分のアプリのいずれか 1 つを、自分の他のアプリで宣伝する無料の広告を作成できます。 自社広告は無料ですが、自社広告の割り当ては他の広告ネットワークと同じプールに基づいて発生します。 このため、**[Microsoft Advertising 自社広告]** に広告要求を割り当てた場合は、その割合が広告の振り分け合計に対する割合となり、自社広告用に使われます。 広告要求を自社広告に割り当てる場合は、開発者アカウントに登録されている少なくとも 1 つの他のアプリについても、自社広告キャンペーンを作成する必要があります。 詳しくは、「[自社広告について](https://msdn.microsoft.com/library/windows/apps/mt148566)」をご覧ください。

6.  **[保存]** をクリックして、基本構成を保存します。

### 広告ネットワークに重みによる順序を適用する

アプリが各広告ネットワークを使う頻度をパーセント値で指定するには、**[Mediation type]** (メディエーションの種類) ドロップダウン リストでこのオプションを選択します。 すべての広告ネットワークに設定した割合の合計が正確に 100% になる必要があります。

すべての広告ネットワークに対して要求を自動的かつ均等に分散するには、**[すべてのアクティブな広告ネットワークで均等に広告リクエストを配分します。]** をクリックします。 要求を不均等に分散するには、スライダー コントロールを使って、アプリが各広告ネットワークを使う頻度を指定します。 すべての広告ネットワークに設定した割合の合計が正確に 100% になる必要があります。 スライダー コントロールをドラッグするには、いくつかの方法があります。

-   任意の数値までスライダーをドラッグした場合、その数値は、この広告ネットワークが仲介サイクルでアプリの最初の選択肢として呼び出される時間の割合を示します。
-   **[バックアップ]** にスライダーをドラッグした場合は、割合を指定した広告ネットワークのうちどのネットワークも広告を提供できない場合にのみ、この広告ネットワークが呼び出されることを示します。 これは割合を 0% に設定するのと同じです。
-   **[非アクティブ]** にスライダーをドラッグした場合は、この広告ネットワークが呼び出されないことを示します。 広告ネットワークのアセンブリはパッケージに残りますが、メディエーターはその呼び出しを試行しません。 市場に固有の構成でこのオプションを指定し、パフォーマンスが低い、または特定の市場をサポートしていないことがわかっている広告ネットワークを除外できます。
-   広告ネットワークの割合を調整するとき、値を選んだ際のスライダー コントロール (**[バックアップ]** を除く) では、広告を振り分ける合計が 100% になるように自動的に調整されます。 広告ネットワークの **[ロック]** チェック ボックスをオンにした場合、その広告ネットワークは、現在選ばれている値で固定されます。 その後で、他の広告ネットワークの値を調整できます。このとき、ロックされている広告ネットワークの値は影響を受けません。

### 広告ネットワークにランクによる順序を適用する

ランク付けの番号 (1 ～ *n*) を各広告ネットワークに適用するには、**[仲介の種類]** ドロップダウン リストでこのオプションを選択します。この番号により、アプリが各広告ネットワークを使う頻度が指定されます。

特定の広告ネットワークの **[アクティブ]** チェック ボックスをオフにした場合は、その広告ネットワークが呼び出されないことを示します。 広告ネットワークのアセンブリはパッケージに残りますが、メディエーターはその呼び出しを試行しません。 市場に固有の構成でこのオプションを指定し、パフォーマンスが低い、または特定の市場をサポートしていないことがわかっている広告ネットワークを除外できます。

### 広告の仲介に関する既定の設定

既定では、デベロッパー センターは **[広告で収入を増やす]** ページで広告の仲介に関する次の設定をアプリに適用します。 アプリを提出する前に広告の仲介を構成しなかった場合にも、これらと同じ既定値が適用されます。

-   アプリで Microsoft advertising を使う場合は、**[Microsoft Advertising]** が 100 (**[重さ順]** を選択したとき) または 1 (**[ランク順]** を選択したとき) に設定され、他のすべての広告ネットワークは非アクティブに設定されます。
-   アプリで Microsoft advertising を使わない場合は、すべての広告ネットワークが非アクティブに設定されます。

## 新しいターゲット構成を作成する


アプリの基本構成を作成した後で、特定の市場で使われる追加の構成を作成できます。 これらの新しい構成は、基本構成から初期設定を継承しますが、アプリのサポート対象となる特定の市場に合わせて細かく調整することができます。

新しいターゲット構成を作成するには:

1.  **[ターゲット]** で、新しい構成を作成する市場を選びます。
2.  リフレッシュ レートと広告要求の振り分け情報を必要に応じて更新します。
3.  **[保存]** をクリックして、新しい構成を保存します。

## アプリが公開された後に広告仲介を最適化する


特定のアプリ用に広告の仲介を調整する場合は、いつでもそれを行うことができ、アプリを再申請する必要はありません。 これは、以前にアカウントを設定したことのないアプリに広告ネットワークを既に追加している場合や、ある広告ネットワークから特定の市場に広告が確実に提供されていないことがわかった場合に便利です。 市場固有の構成と同様に基本構成も変更することができます。 必要に応じて市場固有の構成を追加または削除することもできます。

アプリの広告の仲介に関する設定に戻るには、次のいずれかを実行します。

-   ダッシュボードのアカウントの概要ページで、**[広告仲介]** にあるアプリをクリックします。
-   ダッシュボードのアプリの概要ページで、**[収益化]** を展開し、**[広告で収入を増やす]** クリックします。

## 広告の仲介に関する設定とアプリの更新プログラム


アプリの更新プログラムを提出するとき、アプリの広告の仲介に関する既存の構成情報は、次の条件が満たされた場合に、更新されたパッケージに自動的に適用されます。

-   **[AdMediatorControl]** コントロールの数が、更新前のアプリ パッケージにあるコントロールの数と同じであり、すべてのコントロールが更新前のアプリ パッケージと同じ ID を持っている場合。
-   広告ネットワーク プロバイダーの一覧が、更新前のアプリ パッケージと同じである場合。

これらの条件のどちらかが満たされなかった場合は、基本構成と適用可能な市場固有のターゲット構成をアプリに対して再作成する必要があります。

**注**  **AdMediatorControl** の ID は、コントロールをアプリのデザイン サーフェイスにドラッグするときに生成されます。 コントロールを削除し、新しいコントロールを同じデザイン サーフェイスにドラッグして置き換えない限り、この ID は変更されません。

 

## 統合デベロッパー センター ダッシュボードで広告仲介レポートを確認する


広告の仲介レポートを確認するには、デベロッパー センターの **[分析]** セクションにアクセスし、**[広告仲介]** をクリックします。 このレポートについて詳しくは、「[広告仲介レポート](https://msdn.microsoft.com/library/windows/apps/mt148521)」をご覧ください。

## シナリオ例


異なる目標とシナリオをサポートするために、さまざまな方法で広告ネットワークを構成できます。 次の例は、3 つの広告ネットワークを指定した場合に、**[重さ順]** を使用して広告仲介を構成する方法を示しています。 ここでは、Microsoft advertising、Inneractive、AdDuplex をネットワーク例として使用します。

### 例 1

最適化を開始する前に、すべてのネットワークのフィル レートと 1000 回の広告表示あたりの料金 (eCPM) を確認します。

作業を開始するには、各ネットワークに仲介トラフィックを均等に振り分けるように設定します。 後で各広告ネットワークのレポートを確認して、各市場で最もパフォーマンスの高い広告ネットワークを判断できます。

数日後または数週間後、広告ネットワーク ポータルごとにフィル レートと eCPM を確認することをお勧めします。 これは各市場向けの最適な広告ネットワークを判断するのに役立ちます。 次に、特定の市場向けの (または全体的な) 調整を行います。新しいパッケージを申請する必要はありません。

### 例 2

可能な場合は常に、Microsoft advertising を最初に使用します。 Microsoft advertising が広告を提供できない場合は、その他の広告ネットワークのいずれかを (特定のネットワークを優先することなく) バックアップとして使用できます。

| 広告ネットワーク            | 構成 |
|-----------------------|---------------|
| Microsoft             | 100%          |
| Inneractive           | バックアップ        |
| AdDuplex              | バックアップ        |

### 例 3

全般的に、Microsoft advertising を最初に使用します。 Microsoft advertising が広告を提供できない場合は、Inneractive が AdDuplex の前に呼び出されるようにします。

| 広告ネットワーク            | 構成 |
|-----------------------|---------------|
| Microsoft             | 90%           |
| Inneractive           | 10%           |
| AdDuplex              | バックアップ        |

### 例 4

Microsoft advertising と Inneractive を均等に使用し、常に同じネットワークを最初に呼び出す場合よりも多くの種類の広告がアプリに表示されるようにします。 どちらの広告ネットワークも利用できない場合、AdDuplex をバックアップとして使います。

| 広告ネットワーク            | 構成 |
|-----------------------|---------------|
| Microsoft             | 50%           |
| Inneractive           | 50%           |
| AdDuplex              | バックアップ        |


## 関連トピック

* [広告ネットワークの選択と管理](select-and-manage-your-ad-networks.md)
* [広告の仲介コントロールの追加と使用](add-and-use-the-ad-mediator-control.md)
* [広告の仲介の実装のテスト](test-your-ad-mediation-implementation.md)
* [広告の仲介のトラブルシューティング](troubleshoot-ad-mediation.md)
 

 


<!--HONumber=Mar16_HO5-->


