---
xxxxx: Xxxxxx Xxxx xxxxxxxxxxx xxxxxxxxx
xxxxxxxxxxx: Xxx xxxxxxxxx xx x XxxxxxX Xxxxxxxxx Xxxxxxx Xxxxxxxx (XXX) xxx xxxxxxx xxxx xxxx xx x xxxxxxxxxxx xxxxxxx xxxxxxxxxxx.
xx.xxxxxxx: YYYYxYxY-YYYx-Yxxx-xYYY-YYxxYxYYYYYY
---

# Xxxxxx Xxxx xxxxxxxxxxx xxxxxxxxx


\[ Xxxxxxx xxx XXX xxxx xx Xxxxxxx YY. Xxx Xxxxxxx Y.x xxxxxxxx, xxx xxx [xxxxxxx](http://go.microsoft.com/fwlink/p/?linkid=619132) \]


Xxx xxxxxxxxx xx x XxxxxxX Xxxxxxxxx Xxxxxxx Xxxxxxxx (XXX) xxx xxxxxxx xxxx xxxx xx x xxxxxxxxxxx xxxxxxx xxxxxxxxxxx. Xxxxxxx xx xxxxxxx xxxx xxxxxx xxxxx xxxx xx **XXXX** xxx xxxxxxxxx xxxx xx **XxxxxxXxxxxx**, xxx Xxxxxxx Xxxxxxx xxxxxxxx xxxxxxxxxx xxxx xx [**Xxxxxxx::XX::Xxxx::XXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208296) xx xxxx xxx xxx xxxxxxx XXX xxxx xx x xxxx xxxxxx, xxxxxx-xxxxxxxx xxxxxx. Xxxx xxxxxxx xx xxx xxxxxxxxxxxxx xxxxx xxx xxx Xxxxxx Xxxx xxxxxxxxxxx xxxx xx xxxxxxxxxx.

> **Xxxx**   Xxx xxxxxx xxxx xxxx xxxxxxxxxxx xx xxxx xxxxxxxx xx xxxxx xx xxx [XxxxxxX Xxxxxx Xxxx xxxx xxxxxx](http://go.microsoft.com/fwlink/?LinkId=624011).

 
## 
Xxxx xxx xxxx xx xxx xxx xxxxxx xxxx xxxx xxxxxxxx xxxxxxxxx xxx xxxx xxx xxxxxxxxx xxxx xxxx xxxx:

-   Xx xxx xxxxxxxxxxxxxx xxxxx, xxx xx xxxxxxx xxx xxxxxxx xxxxxxxxxx xxxx xxxx xxxx xxxx. Xxxx xxxx xxxx-xxxxxxxx xxxxxxxxx.
-   XXX xxxx xxxx xxxxx xxxxxxxxxx xxxxxx xxxxxx Y xxxxxxx xx xxxxxx. Xxxxxxxxx, xxxx xxxx xxxxxxxxx xxxxxxxxx xxxx xxx xxxx xxxx xxx. Xxxxx xxxxxx xxxx xxxxx xxxxxxxxx xx xxx xxxxxxxxxx xxx xxxxxxx x xxxxxxxx xxxxxx.
-   Xx xxx xxxx xxxx, xxxxxxx xx Xxxxxxx xxxxxx, xxxx xxxx xxxxx, xxxxxx xxxxx xxxxxxx, xxx xxxxxx xxx xxxxx.
-   Xxx xxxxx xxxxxxxx xx xxxxxxx xx xxxxxx xxxxxx. (Xxxxx xxxxxxx xxx xxxxxx xxxxxxxx xxxx xxxxxxx Xxxxxxx xxxxxxxxxxxx.)
-   Xxx x xxxxx xxxxxxx xx xxxxxxx xxx xxxx xxx xxxxx xx xxx xxxx xxxxx.

##  Xxxx xxxxxxxxxxxx


Xxxx xx xxx xxxxxxxxxx xx Xxxxxx Xxxx xxx xx xxxxxx xxxx xxx xxxx xxxx xxxxxx xx xx xxxxxxxxxxxx. Xxx xxxx xxx xxxx, xxx xxx xxxxx xxx xxxxxxxxxxxx xxx xxxxx xxxx xxxxx xxxxx xxxxxxx. Xxx xxxxxxxxx xxxxx xxxxxxx xxxxxxxxx xxx xxxxxxxxx xxxxxx xxxx xxxxx.

| Xxxxx                                      | Xxxxxxxxxxx                                                                                                                                                                          |
|--------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Xxxxx.x, Xxxxx.xxx                         | Xxxxxxx xxx **Xxxxx** xxxxx, xxxxx xxxxxxx xxxxx xxxxxxxxx.                                                                                                                          |
| XxxxxXxxxxx.x, XxxxxXxxxxx.xxx             | Xxxxxxx xxx **XxxxxXxxxxx** xxxxx, xxxxx xxxxxxxx xxxxxxx xxxxxxx xxxx xxxx xxx xxxx xxxxxxxx, xxxxxx, xxx xxxxxxx.                                                                  |
| XxxxxXxxx.x                                | Xxxxxxx xxxxxxxxxx xxx xxxxxxxxx xxxx xxxx xxx xxxx xxxx xxxxxx xxx xxxxxx xxxx xxx xxxxxxxxxxxx. Xxxx xx xxxxx xxxxxxxxx xxx xxxxxxxxxx xxxx XXXX xxxxxx xxxxx.                     |
| XxxxxXxxxxxXxxxxx.x, XxxxxXxxxxxXxxxxx.xxx | Xxxxxxx xxx **XxxxxXxxxxxXxxxxx** xxxxx, xxxxx xxxx xxx Xxxxxxx Xxxxxxx xx xxxx xxx xxxxx xxxx xxxx xx x XXX xxx.                                                                    |
| XxxxxXxxxxx.x, XxxxxXxxxxx.xxx             | Xxxxxxx xxx **XxxxxXxxxxx** xxxxx, xxxxx xxxxxxxx xxxxxxx xxxxxxx xxx xxxxxxxx xxxxx xxxxxx xxxx xx xxxxx xxx xxxxxxx. (Xxxxx xxxxx xxx xxx xxxx xx xxx Xxxxxx Xxxx xxxxxxxxxxxxxx). |
| XxxxxXxxxx.x, XxxxxXxxxx.xxx               | Xxxxxxx xxx **XxxxxXxxxx** xxxxx, xxxxx xxxxxxxx xx xxxx xxx xx xxx xxxxx xxx xxxxxxx xxxxx.                                                                                         |
| Xxxxxx.x, Xxxxxx.xxx                       | Xxxxxxx xxx **Xxxxxx** xxxxx, xxxxx xxxxxxxx xxx xxxxxxxx xxx xxxxxxxxxxx xx x xxxxxx.                                                                                               |
| Xxxxxxxxx.x, Xxxxxxxxx.xxx                 | Xxxxxxx xxxxxxxxx xxxx xxxxxxx xxx xxxxxx xxx xxxxx xxxxxxx, xxxx xx xxx xxxx.                                                                                                       |
| XXXXxxxxxxXxxxxx.x, XXXXxxxxxxXxxxxx.xxx   | Xxxxxxx xxx **XxxxxxXXXXxxxxxxXxxxXxxxxx** xxxxxxxx, xxxxx xxxxx xxxxxxxx xxxx xxx xx .xxx xxxxxx xxxx x xxxxxx xxxxxx.                                                              |
| XxxxxxXXxx.x, XxxxxxXXxx.xxx               | Xxxxxxx xxx **XxxxxxXXxx** xxx **XxxxxxXXxxXxxxxx** xxxxxxx, xxxxx xxxxxxxxxxx xxx xxxx (xxxxxx, xxxxxx, xxx xxxxxx) xx xxx xxx.                                                     |
| XxxxxxXXxxx.x, XxxxxxXXxxx.xxx             | Xxxxxxx xxx **XxxxxxXXxxx** xxxxx, xxxxx xxxxxxxx xxxxxxxxxxxxxx xxxx xx xxxxxx xx xxxx XxxxxxX XXX xxxx.                                                                            |
| XxxxxxXXxxxxx.x                            | Xxxxxxx xxxxxxx xxxxxxxxx xxxx xxx xx xxxx xx XxxxxxX XXX xxxx.                                                                                                                      |
| XxxxXxxxxx.x, XxxxXxxxxx.xxx               | Xxxxxxx xxx **XxxxXxxxxx** xxxxx, xxxxx xxxxxxxx x xxxxxxx xxxxxx xxxxxx xxx xxxxxxxxxxxxxx.                                                                                         |
| XxxxxxXxxx.x, XxxxxxXxxx.xxx               | Xxxxxxx xxx **XxxxxxXxxx** xxxxx, xxxxx xxxxxxx xxxx-xxxxxxxx xxxxxxxxx xxx xxxxxxx xxxx xx xxx xxxx xxxxx.                                                                          |
| XxxxxXxxxxxxx.x, XxxxxXxxxxxxx.xxx         | Xxxxxxx xxx **XxxxxXxxxxxxx** xxxxx, xxxxx xxxx Xxxxx Xxxxxxxxxx xx xxxx xxx xxxx xxxxxx xxxxx xxxxxxxxx.                                                                            |
| XxxxxxxxxxXxxxx.x, XxxxxxxxxxXxxxx.xxx     | Xxxxxxx xxx **XxxxxxxxxxXxxxx** xxxxx, xxxxx xxxxx xxx xxxxxx xxxxxxxxx xxxx xxxxx xxxx xxx xx x xxxxxxx xxxxx.                                                                      |
| Xxxxxxx.x, Xxxxxxx.xxx                     | Xxxxxxx xxx **Xxxxxxx** xxxxx, xxxxx xxxxxxxxxx xxx xxxxxxx xxxxxxxxxx xxxxxxx xxx xxxxxx xxx xxx xxxx.                                                                              |
| Xxxxxxxxxx.x                               | Xxxxxxx xxxxxxxxx xxxxx xxxx xxx xxxx xx xxx xxxx.                                                                                                                                   |
| XxxxxxXxxxxxx.x, XxxxxxXxxxxxx.xxx         | Xxxxxxx xxx **XxxxxxXxxxxxx** xxxxx, xxxxx xxxxxxxx xxxxxx Y-X xxx xxxx-xxxxxxxxx xxxx xxx xxxxxxxxxx.                                                                               |
| XXXXxxx.x, XXXXxxx.xxx                     | Xxxxxxx xxx **XXXXxxx** xxxxx, xxxxx xxxxx xxx xxxxxxx xxxxxx xxxx xxx xx XXX Xxxx (.xxxxxxx) xxxxxx.                                                                                |
| XxxxXxxxxxxxx.x, XxxxXxxxxxxxx.xxx         | Xxxxxxx xxxxxxxxxxxxx xxxx'x xxxxxxx xx xxx xxxx xxxxxxxxx, xxxx xx xxx xxxx xxxxxx xxx xxx xxxx xxxxx xxxxx.                                                                        |

 

##  Xxxxxx-xxxx xxxxxx xxx-xxxx xxxxxxxx xxxxxxx


Xxxx xxx xxx, xxx xxx-xxxx xxxxxxx xxxxxxx xx xxxxxx-xxxx xxxxxxx xx xxxx xxxxxxxxxxx xxxx xxxx xxxxxxxxx.

X *xxxxxx-xxxx* xxxxxx xx xxx xxxxxx xxx xxx xxxx xxx xxxxxx xxxx xxxxxxxx. Xxxxxxxxx, Y-X xxxxxxxxx xxxx xxxx xxxxxx-xxxx xxxxxxx. Xxxx xxxxxx-xxxx xxxxxxx xxx xxxx xxxx-xxxxx xx xxxx xxx xxx xxxxxx xxxx xx xxx xxxx-xxxxx xxxxxx. Xxxxxx-xxxx xxxxxxx xxx xx xxxxxxx xxx xxxxxxx xxxx xxxxxxxxxxx xxxx xxxx xxxx xxxxxxxx. X *xxx-xxxx* xxxxxx xx xxx xxxxxx xxxxxx xxxx xx xxxx xx xxxx xxxx. Xxx-xxxx xxxxxxx xxx xxxxxxxxx xxxx xxxxxxx xxx xxxx xxxxxxxxx xx xxxx xxxx xxx xxxxxxxxxxxxx xxxxxx-xxxx xxxxxxx. Xxxx xx xxx xxx xxxxxxxx xx xxxxx xxx xxx-xxxx xxxxxx xx xxx xxxx.

Xxxxxxxx xxxx xxxx xxx xxxxxxxx xxxx x xxxxxx-xxxx xxxxxx, xxxxx xxx xxxxxxx xxxxxxxx xx xxxxx x xxxxxxxx xxx-xxxx xxxxxx. Xxxxxxx xxx-xxxx xxxxxxx xxx xxxxx xxxx xxxxxxx, xxxx xxxxxxx xxxx xxxx xxxxx xxx xxxxxxx xxxx xxxx xx xxxxxxxx xxxx x xxxxxxx. Xxxx, xxx-xxxx xxxxxxx xxx xxxxx xxxxxxxxxxx xx xxxxxx-xxxxxx xxxx xxxxxxxxxx. Xxxxxxxxx, xxxx xxx xx xxxxxx xxxx xxxxxx xxxx xxxxxx xxxx, xxx xxxxxxx, xx XXX-xxxxx xxxx xxxx. Xxxxxxx, xxxxxxx xxxxxxxx xxx-xxxx xxxxxxx xxx xxxxxxxxx xxxxxx-xxxxxxx, xxxx xxx xxxx xxxxxxxxx xxx xxx xxx-xxxx xx xxxxxx.

XXXX xxxxxxx xxx xxx xxxxxxx xx xxxxxxxxx xxxx xxx xxxxxxxxx xxxxxx-xxxx xxx xxx-xxxx xxxxxxx. Xxxxxx Xxxx xxxx .xxxx xx xxx xxxxxx-xxxx xxxxxx, xxx .xxx xx xxx xxx-xxxx xxxxxx. X .xxxx xxxx xxxxx xxxxxx xxxx xxx xxx xxxxxx; x .xxx xxxx xxxxx xxx xxxxxxxxxxxxx xxxxxx xxxx xxxx. Xxxx xxx xxxxxxx .xxxx xxxxx xxxxxxx xxx xxxxxxx .xxx xxxxx xxxx xxxx xxxx, xxx xxxxx xxx xxxx xx xxxxxxx XXXX xxxxxx xxxxx xx xxxx xxxx xxxx xxxx xxxx xxxxx.

Xxx xxxxxxxxxxxxx xxxxxxx, xxx Xxxxxx Xxxx xxxxxxx xxxxxxxx xxxx xxx xxxxxx-xxxx xxxxxx xxx xxx xxx-xxxx xxxxxx xxx xxxx xxxxxxxxx, xxx xxx xxxx xxxx xx xxxxxxxx xxx xxxxxx-xxxx xxxxxxx xx xxx xxxxxx xxxxxxx xxx xxxx xxx xxxx xxxxxxx xxx xxx xxxxxxx xxxx xx xxx-xxxx xxxxxxx xxxx xxx xxxx xxxx. Xxxx xxxxxxxxxxxxx xxxxx xxx xx xxxxxxx xxx xxxxxx-xxxx xxxxxxx xx xxx xxx-xxxx xxxxxxx.

##  Xxxxxxxxxxx xxxx xxxxx


Xxxxxx Xxxx xxxxxxx xxx xxxx xxxxx xx x xxxxxxx XXX xxx. Xxx xxxx xxxx xxxxx xxx xxxx xxxxx xx x XXX xxx, xxx [Xxx xxxxxxxxx](https://msdn.microsoft.com/library/windows/apps/mt243287).

Xxxx x XXX xxxx xxxxxxxxxxx, xx xxxxxxxxx xxxxxxxxxxx xxxxxxx xxxxxxxxxx xxxx xx XxxxxxYX, XxxxxxYX, xxx xxx xxxxx, xxxxx, xx xxxxxxx xxxxxxxxx xxxx xx xxxx. Xx xxxx xxxxx xxxx-xxxxxxxx xxxxxxxxx xxxx xxx xxxxxxxx xxxxxx xxx xxxx xxxxxx. Xxxx xxxxxxxxxxxxxx xxxxxx xxx xxxx xxxxxx x xxxx xxxxxxx.

Xxxxx xxxxxxxxxxxxxx, xxxxx xxxxxxxxx xxx xxx *xxxx xxxx*. Xx xxxx xxxx, xxxxx xxxxxxxxx xxxxxxx xxxx xxxxxxx: xxxxxxx Xxxxxxx xxxxxx, xxxxxxx xxxxx, xxxxxx xxxxx xxxxxxx, xxx xxxxxx xxx xxxxx. Xxxx xxx xxxx xxxxxxx xxx xxxxx, xx xxx xxxxx xxx xxxxxxx xxxxx xxxxx xx xxx xxxxx xxxxxxx xxx xxxxxxxx xxxxxxxx xxxxxx, xxxx xx xxxxxx xxxxxxxxxx. Xxx xxxx xxx xxxx xxxxxxx xxxxx xxxxxxxxxx xxxx xx xxxxxxx xxxxx xxxxxxx xx xxxxxxx xxxx xxxx xxx xxxxxxx. Xxxx xxx xxxx xxxxxxx xxx xxxxx, xx xxxxxxxx xxx xxxxxxx xxxxx xx xxx xxxxx xxx xxxxx xx xx xxx xxxxxxx xxxxxx. Xxx xxxxxxxxx xxxxxxxx xxxxxxxx xxxxx xxxxxxxxxx xx xxxxxxx xxxxxx.

##  Xxxxxx xx xxx xxxxxxxx


Xxx *XxxxxxX YY Xxx (Xxxxxxxxx Xxxxxxx)* xxxxxxxx xxxxxxx x xxxx xxxxxx xxxx xxx xxx xxxxxx xx xxxx XxxxxxYX. Xxx xxxxxxxx xxxx xxxxxxxx xxx **XxxxxxXxxxxxxxx** xxxxx xxxx xxxxxxx xxx xx xxx XxxxxxYX xxxxxx xxxxxxxxx xxxxxx xxx xxxxxxxxx YX xxxxxxx xx x XXX xxx. Xxx **XxxXxxx** xxxxx xxxxxxx xxx **XxxxxxXxxx** xxxxx xxxxxx, xxxxxx xxx xxxxxxx xx xxxxxxxxx, xxxxx xx xxxxxx xxx xxxxx, xxx xxxxx xxx **XxxxxxXxxx** xxxxxx xxxxxx xxxx xxxxx. Xxx **XxxxxxXxxxxxXxxxXxxxxxxxxXxxxxxxxx**, Xxxxxx, xxx Xxxxxx xxxxxxx xxx xxxx xxxxx xxxx xxx xxxxxxxxxxxxx xxxxxxx xx xxx **XxxxxxXxxx** xxxxx. Xxx xxxxxxxxx xxxxxxx xxxxx xxxxx xxx **XxxXxxx** xxxxxxxxxxx xxxxxxx xxx **XxxxxxXxxx** xxxxx xxxxxx. Xxx xxxxxx xxxxxxxxx xxxxx xx xxxxxx xx xxx xxxxx xx xx xxx xxx xxx XxxxxxYX xxxxxxx xxx xxxxxxxxx.

```cpp
    m_marbleMaze = std::unique_ptr<MarbleMaze>(new MarbleMaze(m_deviceResources));
    m_marbleMaze->CreateWindowSizeDependentResources();
```

Xxx **XxxXxxx** xxxxx xxxx xxxxxx xxxxxxx xxx xxxxxxxx xxxxxxxxx xxx xxx xxxx. Xxx xxx xxxx xxxxxxx xxx xxxx xxxxxx. Xxx **XxxxxxXXxxx** xxxxxxxxxxx xxxx xx xxx xxxxx xxxxxxxx, xxxxxxx xxx **XxxxxxXxxxxxxxx** xxxxx, xxx xxxxxxx xxx **XxxXxxx** xxxxx.

Xxxx xxx xxxxxxxx xxx xxxxx xxxxxx xxx xxxxxx, xxxx xxxx xxx xxxxx xx xxx **XxxxxxXxxx** xxxxx.

## Xxxxxxx xxxx xxxxxx xx xxx xxxxxxxxxx


Xx xxxxxx xxxx xxxx xxxx xxx xxxxxxx xx xxxxxx xxxxxx xxxxxx Y xxxxxxx xxxxx xx xx xxxxxxxx, xx xxxxxxxxx xxxx xxx xxxx xxxx xxxx xxxxxx xxxxxxxxxxxxxx, xx xx xxx xxxxxxxxxx. Xx xxxxxx xxxx xx xxx xxxxxxxxxx, xxxx xxxx xxx xxxxxxx xx xxxxxx xxxxxx.

> **Xxxx**  Xxx xxx xxxx xxxxxxx xxx xxxx xxxx xxxx xx xx xxxxx, xxx xxxxx xxx xxxxxxxxx xxxxxx xx xxxxxxxx xxxxxxx xx xxx xxxxxxxxxx. Xx xxx xxxx xxxxxxx xx xxxxxx xxxx xxx xxxx xxxxxx xxx xxxxxxxxx xxx xxxxxx, xxx xxx xxxxxxxx xxxx xxxxx xxxxxxxxx xxx xxxxxxxxxx xx xxxx xx xxxxxxxxxx x xxxxxxxx xxx, xxx xxxxxxx.

 

Xxxx xx xxxx xxxx xxxxxxxx xxxxxxxxxx xxx xxxx xxxxxx, xx xx xxxx xxxxxxxx xx xxxx xxxx xxxxxxxxxxxxxx xxx xxx xxxxxxx. Xxx xxxxxx xx xxxx xx xx xxxxxxxxx xx xxxxxxxxx xxxx xxx xx xxxx xxxxxxxxx xxxx xxxx xxxxxxx xx xxx xxxxxxx xxx xxx xxxxxxxxxxxxxx. Xxxx, xx xxxxxxxxxxxxx xxxxxxxxxxxx xxxxxxx xxxxx, xxxx xxxx xx xxxxx xx xxxxx xx xxx xxx xxxxxxxxxxxxx.

Xxxxxxxxxxxx xxxxx xxxxxxx xxxxxx xxxx xxx **XxxXxxx::Xxxx** xxxxxx. Xxxx xxxxxx xxxx xxx [**xxxx Xxxxx (Xxxxxxxxxxx Xxxxxxx)**](https://msdn.microsoft.com/library/windows/apps/hh750113.aspx) xxxxx xx xxxx xxxx xxxxxx xx xxx xxxxxxxxxx.

```cpp
    task<void>([=]()
    {
        m_marbleMaze->LoadDeferredResources();
    });

```

Xxx **XxxxxxXxxx** xxxxx xxxxxxx xxx *x\_xxxxxxxxXxxxxxxxxXxxxx* xxxx xx xxxxxxxx xxxx xxxxxxxxxxxx xxxxxxx xx xxxxxxxx. Xxx **XxxxxxXxxx::XxxxXxxxxxxxXxxxxxxxx** xxxxxx xxxxx xxx xxxx xxxxxxxxx xxx xxxx xxxx xxxx xxxx. Xxx xxxxxx (**XxxxxxXxxx::Xxxxxx**) xxx xxxxxx (**XxxxxxXxxx::Xxxxxx**) xxxxxx xx xxx xxx xxxxx xxxx xxxx. Xxxx xxxx xxxx xx xxx, xxx xxxx xxxxxxxxx xx xxxxxx. Xx xxx xxxx xx xxx xxx xxx, xxx xxxx xxxxx xxx xxxxxxx xxxxxx.

Xxx xxxx xxxxxxxxxxx xxxxx xxxxxxxxxxxx xxxxxxxxxxx xxx XXX xxxx, xxx [Xxxxxxxxxxxx xxxxxxxxxxx xx X++](https://msdn.microsoft.com/library/windows/apps/mt187334).

>> > **Xxx**   Xx xxx’xx xxxxxxx xxxx xxxx xxxx xx xxxx xx x Xxxxxxx Xxxxxxx X++ Xxxxxxx (xx xxxxx xxxxx, x XXX), xxxxxxxx xxxxxxx xx xxxx [Xxxxxxxx Xxxxxxxxxxxx Xxxxxxxxxx xx X++ xxx Xxxxxxx Xxxxx Xxxx](https://msdn.microsoft.com/library/windows/apps/hh750113.aspx) xx xxxxx xxx xx xxxxxx xxxxxxxxxxxx xxxxxxxxxx xxxx xxx xx xxxxxxxx xx xxxx xxx xxxxx xxxxxxxxx.

 

## Xxx xxxx xxxx


Xxx **XxxxxxXxxx::XxXxxxxxxxx** xxxxxx xxxx xxx xxxx xxxx xxxx. Xxxx xxxxxx xx xxxxxx xxxxx xxxxx.

Xx xxxx xxxxxxxx xxxx xxx xxxxxx xxxx xxxx xxxx-xxxxxxxx xxxx, xx xxxxxxxxxxx xxx **XxxxxxXXxx::Xxx** xxxxxx xx xxxxxxx xxxxxx xxx xxxxxx xxxxx xx xxx **XxxxxxXxxx** xxxxxx. Xxx **XxxxxxXxxx::XxXxxxxxxxx** xxxxxx xxxx xxxxxxx xxx xxxx xxxxx, xxxxx xx xxxx xxx xxxxxxxxx xxx xxxxxxx xxxxxxxxxx.

Xxx xxxxxxxxx xxxxxxx xxxxx xxx **XxxxxxXxxx::XxXxxxxxxxx** xxxxxx, xxxxx xxxxxxxx xxx xxxx xxxx xxxx. Xxx xxxx xxxx xxxxxxx xxx xxxxx xxxx xxx xxxxx xxxx xxxxxxxxx, xxx xxxx xxxxxxx xxx xxxxxxx xxx xxxxx. Xxxx xxxx xxxxx xxxx xxxx xxxxxxx xx xxxx xxxxxxxx xxxx xxx xxxxxx xx xxxxxxx.

```cpp

void DirectXPage::OnRendering(Object^ sender, Object^ args)
{
    if (m_windowVisible)
    {
        m_main->Update();

        if (m_main->Render())
        {
            m_deviceResources->Present();
        }
    }
}
```

## Xxx xxxxx xxxxxxx


Xxxxx xxxxxxxxx xxxxxxx x *xxxxx xxxxxxx* (xxxx xxxxx xx x *xxxxxx xxxxx xxxxxxx*, xx XXX) xx xxxxxxx xxx xxxx xxx xxxxx xx xxx xxxx xxxxx. X xxxxx xxxxxxx xxxxxxxx x xxxxx xxxxxx xx xxxxxx xxx xxx xxxxxxx xx xxxxxxxxxx xxxxx xxxx. X xxxxx xxxxxxx xxxxxxxxx xxxxxx xxxx xx *xxxxxxx* xxxxx, xxxxxxxxxxx xx xxx xx xxxx *xxxxxxxxxxxx* xxxxxx, xxx xxxxxxxx xxxx xx x *xxxxxxxx* xxxxx.

X xxxx xxxx xxxxx xxxx x xxxxx xxxxxxx xx xxxx xx xxx xxxxxxx xxx xxxxx xxxx xx xxxxxxxx xx xxx xxxxxxx xxxx xxxxx. Xxxxxx Xxxx xxxxxxx xxx **XxxxXxxxx** xxxxxxxxxxx, xxxxx xxxxxxx xxxx xxxxxxxx xxxxx xx xxx xxxx.

```cpp
enum class GameState
{
    Initial,
    MainMenu,
    HighScoreDisplay,
    PreGameCountdown,
    InGameActive,
    InGamePaused,
    PostGameResults,
};
```

Xxx **XxxxXxxx** xxxxx, xxx xxxxxxx, xxxxxxx xxxx xxx xxxx xxxx xxxxxxx, xxx xxxx xxx xxxx xx xxx xxxxxx. Xxxxxxxxxx, xxx **XxXxxxXxxxxx** xxxxx xxxxxxx xxxx xxx xxxx xx xxxxxx, xxx xxxx xxx xxxx xxxx xxx xxxxxx. Xxx **XxxxxxXxxx** xxxxx xxxxxxx xxx **x\_xxxxXxxxx** xxxxxx xxxxxxxx xx xxxx xxx xxxxxx xxxx xxxxx.

Xxx **XxxxxxXxxx::Xxxxxx** xxx **XxxxxxXxxx::Xxxxxx** xxxxxxx xxx xxx xxxxxx xxxxxxxxx xx xxxxxxx xxxxx xxx xxx xxxxxxx xxxxx. Xxx xxxxxxxxx xxxxxxx xxxxx xxxx xxxx xxxxxx xxxxxxxxx xxxxx xxxx xxxx xxx xxx **XxxxxxXxxx::Xxxxxx** xxxxxx (xxxxxxx xxx xxxxxxx xx xxxxxxxxxx xxx xxxxxxxxx).

```cpp
switch (m_gameState)
{
case GameState::MainMenu:
    // Do something with the main menu. 
    break;

case GameState::HighScoreDisplay:
    // Do something with the high-score table. 
    break;

case GameState::PostGameResults:
    // Do something with the game results. 
    break;

case GameState::InGamePaused:
    // Handle the paused state. 
    break;
}
```

Xxxx xxxx xxxxx xx xxxxxxxxx xxxxxxx xx x xxxxxxxx xxxx xxxxx, xx xxxxxxxxx xx xx xxxx xxxxxxxxxxxxx.

## Xxxxxxxx xxx xxx xxxxxx xxxxxx


Xxx Xxxxxxx Xxxxxxx xxxxxxxx xx xxxxxx-xxxxxxxx xxxxx-xxxxxxxx xxxxxx xx xxxx xxx xxx xxxx xxxxxx xxxxxx Xxxxxxx xxxxxxxx. Xx xxxxxxx xx xxxxx xx xx xxxxxxxxxxx, xxx xxxx xxxxxxx xx xxxxx xxxxxxx, xx xxxxx-xxxxxxxx xxxxxx, xxxx xxxxxxxx xx xxx xxxxx. Xxx xxxx xxxx xxxxxxxx xxx xxxxx xxxxxxx xxxx xxx xxxxx xxxxxx. Xxxx xxxxxxx xx xxxxx xxxxxxxx xx xx xxxxx xxxxxx.

### Xxxxxxxxxx xxxxxxx, xxxxxx, xxx xxxxxxx

Xxxxxx Xxxx xx xxxxxxxxx xxxx xxx xxxx xxxxxxxx xxxx xxxx xx xx xxxx Xxxxxxx xxxxxx x xxx xxxxx xxxxx. Xxx xxxx xx xxxxxxx xxxx xxx xxxx xxxxx xx xx xxx xxxxxxxxxx xx xxxx Xxxxxxx xxxxx xxx xx x xxx xxxxx xxxxx. Xxxxxxxxx, xxx xxx'x xxxxx xxxx. Xxxxxxx xxx xxxxxxxxx xxx xxx xxxx xx'x xx xxx xxxxxxxxx xxxxx xxx Xxxxxxx xxxxxxxx xxx xxxxxxxxx, xxxx xx xxxxxx, xxxx xxx xxx xx xxxxx. Xxxxxxx xxxxxxxx xx xxx xxxx xx xx xxxxx xx xx xxxxxxxxx xx xxxxxxx, xxx xx xxxxx'x xxxxxx xxx xxx xxxx xx'x xxxxx xx xx xxxxxxxxxx. Xxxxxxxxx, xxxx xxx xxxx xx xxxx xx xxxx—xx xxx xxxxx xxxx Xxxxxxx xxxxxxxx xxxx xxx xxxx xx xx xxxxx xx xx xxxxxxxxx—xxx xxxx xxxx xxxxx xx xxxxxxxx xx xxxxxxx xxx xxxxxxx xxxx xxxxx xxxx xxx xxx xx xxxxxxxxx. Xx xxxx xxx xxx xxxxxxxxxxx xxxx xxxxx xxxx xx xxxxxxxxx xx xxxx, xxx xxx xxxx xxxx xx xxxx xxxxx xxxxxxxxx, xxxx xxxxxx xxxx xxx xxxxxxxx xxx xxxxxxx xxxxxxxxxxxx. Xxxxxx Xxxx xxxxxxxx xx xxxxxxx xxx xxxxxx xxxxxxxxxxxxx xxx xxx xxxxxxx:

1.  Xxxx xxx xxx xx xxxxxxxxx, xxx xxxx xxxxx xxx xxxxxxx xxxx xxxxx xxx xxxxxx xxxxx xxxxxxxx. Xxxx xxx xxx xx xxxxxxx, xxx xxxx xxxxxxx xxxxx xxxxxxxx.
2.  Xxxx xxx xxx xx xxxxxx xxx xxxxx xxxxxxxxx, xxx xxxx xxxxxxx xxxx xxx xxxxxxxx xxxxx.

Xxxxxx Xxxx xxxxxxxx xxx xxxxxxxxx xxxxx xx xxxxxxx xxxxxxx xxx xxxxxx:

-   Xx xxxxx xxx xxxxx xx xxxxxxxxxx xxxxxxx xx xxx xxxxxx xx xxx xxxx, xxxx xx xxxx xxx xxxx xxxxxxx x xxxxxxxxxx.
-   Xx xxxxxxxx xx xxxxxxx xxxxxxxxxxxxx xx xxxxxx xxx xxxxx xx xxxxxxxxxx xxxxxxx.
-   Xx xxxxxxxx xx xxxxxx xxxxxxxxxxxxx xx xxxxxxx xxx xxxxx xxxx xxxxxxxxxx xxxxxxx. Xx xxxx xxxxx xxx xxxxxxxx xxxxx xxxxxx xxxxxxx.

Xx xxxxxxx xxxxxxx xxx xxxxxx, Xxxxxx Xxxx xxxxxxx xxx **XxxxxxxxxxXxxxx** xxxxx. (Xxx XxxxxxxxxxXxxxx.x xxx XxxxxxxxxxXxxxx.xxx). Xxxx xxxxx xxxx xxx [**Xxxxxxx::Xxxxxxxxxx::Xxxxxxxxxxx::XXxxxxxxxXxx**](https://msdn.microsoft.com/library/windows/apps/br226054) xxxxxxxxx xx xxxx xxx xxxxx xxxxxxxxxx. Xxx **XxxxxxxxxxXxxxx** xxxxx xxxxxxxx xxxxxxx xxxx xxxx xxx xxxxx xxxxxxxxx xxxx xxxxx (xxxx xx **xxxx**, **xxx**, **xxxxx**, [**XXXXXXXY**](https://msdn.microsoft.com/library/windows/desktop/ee419475), xxx [**Xxxxxxxx::Xxxxxx**](https://msdn.microsoft.com/library/windows/apps/hh755812.aspx)), xxxx xxx xx x xxxxxxx xxxxx.

```cpp
ref class PersistentState
{
public:
    void Initialize(
        _In_ Windows::Foundation::Collections::IPropertySet^ m_settingsValues,
        _In_ Platform::String^ key
        );

    void SaveBool(Platform::String^ key, bool value);
    void SaveInt32(Platform::String^ key, int value);
    void SaveSingle(Platform::String^ key, float value);
    void SaveXMFLOAT3(Platform::String^ key, DirectX::XMFLOAT3 value);
    void SaveString(Platform::String^ key, Platform::String^ string);

    bool LoadBool(Platform::String^ key, bool defaultValue);
    int  LoadInt32(Platform::String^ key, int defaultValue);
    float LoadSingle(Platform::String^ key, float defaultValue);
    DirectX::XMFLOAT3 LoadXMFLOAT3(Platform::String^ key, DirectX::XMFLOAT3 defaultValue);
    Platform::String^ LoadString(Platform::String^ key, Platform::String^ defaultValue);

private:
    Platform::String^ m_keyName;
    Windows::Foundation::Collections::IPropertySet^ m_settingsValues;
};
```

Xxx **XxxxxxXxxx** xxxxx xxxxx x **XxxxxxxxxxXxxxx** xxxxxx. Xxx **XxxxxxXxxx** xxxxxxxxxxx xxxxxxxxxxx xxxx xxxxxx xxx xxxxxxxx xxx xxxxx xxxxxxxxxxx xxxx xxxxx xx xxx xxxxxxx xxxx xxxxx.

```cpp
m_persistentState = ref new PersistentState();
m_persistentState->Initialize(ApplicationData::Current->LocalSettings->Values, "MarbleMaze");
```

Xxxxxx Xxxx xxxxx xxx xxxxx xxxx xxx xxxxxx xxxxxx xxxx x xxxxxxxxxx xx xxx xxxx (xx xxx **XxxxxxXxxx::Xxxxxx** xxxxxx), xxx xxxx xxx xxxxxx xxxxx xxxxx (xx xxx **XxxxxxXxxx::XxXxxxxXxxxxx** xxxxxx). Xx xxxx xxxx xxxxx x xxxxx xxxxxx xx xxxxx xxxx, xx xxxxxxxxx xxxx xxx xxxxxxxxxxxx xxxx xxxxx xx xxxxxxxxxx xxxxxxx xx x xxxxxxx xxxxxx xxxxxxx xxx xxxx xxxx x xxx xxxxxxx xx xxxxxxx xx xxx xxxxxxx xxxxxxxxxxxx. Xxxxxxxxx, xxxx xxxx xxx xxxxxxxx x xxxxxxx xxxxxxxxxxxx, xx xxxx xxx xx xxxx xxx xxxxx xxxx xxxx xxx xxxxxxx.

Xx xxxxxxx xx xxxxxxx xxx xxxxxx xxxxxxxxxxxxx, xxx **XxxxxxXXxxx** xxxxx xxxxxxx xxx **XxxxXxxxxxxxXxxxx** xxx **XxxxXxxxxxxxXxxxx** xxxxxxx xxxx xxx xxxxxx xx xxxxxxx xxx xxxxxx. Xxx **XxxxxxXxxx::XxXxxxxxxxxx** xxxxxx xxxxxxx xxx xxxxxxx xxxxx xxx xxx **XxxxxxXxxx::XxXxxxxxxx** xxxxxx xxxxxxx xxx xxxxxx xxxxx.

Xxx **XxxxxxXxxx::XxXxxxxxxxxx** xxxxxx xxxxx xxxx xxxxx xxx xxxxxxxx xxxxx.

```cpp
void MarbleMaze::OnSuspending()
{
    SaveState();
    m_audio.SuspendAudio();
}
```

Xxx **XxxxxxXxxx::XxxxXxxxx** xxxxxx xxxxx xxxx xxxxx xxxxxx xxxx xx xxx xxxxxxx xxxxxxxx xxx xxxxxxxx xx xxx xxxxxx, xxx xxxx xxxxxx xxxxxxxxxx, xxx xxx xxxx-xxxxx xxxxx.

```cpp
void MarbleMaze::SaveState()
{
    m_persistentState->SaveXMFLOAT3(":Position", m_physics.GetPosition());
    m_persistentState->SaveXMFLOAT3(":Velocity", m_physics.GetVelocity());
    m_persistentState->SaveSingle(":ElapsedTime", m_inGameStopwatchTimer.GetElapsedTime());

    m_persistentState->SaveInt32(":GameState", static_cast<int>(m_gameState));
    m_persistentState->SaveInt32(":Checkpoint", static_cast<int>(m_currentCheckpoint));

    int i = 0; 
    HighScoreEntries entries = m_highScoreTable.GetEntries();
    const int bufferLength = 16;
    char16 str[bufferLength];

    m_persistentState->SaveInt32(":ScoreCount", static_cast<int>(entries.size()));
    for (auto iter = entries.begin(); iter != entries.end(); ++iter)
    {
        int len = swprintf_s(str, bufferLength, L"%d", i++);
        Platform::String^ string = ref new Platform::String(str, len);

        m_persistentState->SaveSingle(Platform::String::Concat(":ScoreTime", string), iter->elapsedTime);
        m_persistentState->SaveString(Platform::String::Concat(":ScoreTag", string), iter->tag);
    }
}
```

Xxxx xxx xxxx xxxxxxx, xx xxxx xxx xx xxxxxx xxxxx. Xx xxxxx'x xxxx xx xxxx xxxxx xxxx xxxxxxxxxx xxxxxxx xxxxxxx xxx xxxxx xx xxxxxxx xxxxxx xx xxxxxx.

Xxx xxx xxxx xxxxxxxx xxx xxxxxxx xxxxx xx xxxxxxxxx xx xxx xxxxxxxx [Xxxxxx xxxxx xx xxx Xxxxxx Xxxx xxxxxx](adding-audio-to-the-marble-maze-sample.md).

Xx xxxxxxx xxxxxxx, xxx **XxxxxxXxxx::Xxxxxxxxxx** xxxxxx, xxxxx xx xxxxxx xxxxxx xxxxxxx, xxxxx xxx **XxxxxxXxxx::XxxxXxxxx** xxxxxx. Xxx **XxxxxxXxxx::XxxxXxxxx** xxxxxx xxxxx xxx xxxxxxx xxx xxxxx xx xxx xxxx xxxxxxx. Xxxx xxxxxx xxxx xxxx xxx xxxxxxx xxxx xxxxx xx xxxxxx xx xxx xxxx xxx xxxxxx xx xxxxxx xxxx xx xxx xxxxxxxxx. Xx xxxxx xxx xxxx xx xxxx xxx xxxx xx xxx xxxxxxxxx xx xxxxxxxxxx xxxxxxxx. Xx xxxx xxxxx xx xxx xxxx xxxx xx xxx xxxx xxx xxx xx x xxxxxxxx xxxxx xxxx xx xxx xxxxxxxxx.

```cpp
void MarbleMaze::LoadState()
{
    XMFLOAT3 position = m_persistentState->LoadXMFLOAT3(":Position", m_physics.GetPosition());
    XMFLOAT3 velocity = m_persistentState->LoadXMFLOAT3(":Velocity", m_physics.GetVelocity());
    float elapsedTime = m_persistentState->LoadSingle(":ElapsedTime", 0.0f);

    int gameState = m_persistentState->LoadInt32(":GameState", static_cast<int>(m_gameState));
    int currentCheckpoint = m_persistentState->LoadInt32(":Checkpoint", static_cast<int>(m_currentCheckpoint));

    switch (static_cast<GameState>(gameState))
    {
    case GameState::Initial:
        break;

    case GameState::MainMenu:
    case GameState::HighScoreDisplay:
    case GameState::PreGameCountdown:
    case GameState::PostGameResults:
        SetGameState(GameState::MainMenu);
        break;

    case GameState::InGameActive:
    case GameState::InGamePaused:
        m_inGameStopwatchTimer.SetVisible(true);
        m_inGameStopwatchTimer.SetElapsedTime(elapsedTime);
        m_physics.SetPosition(position);
        m_physics.SetVelocity(velocity);
        m_currentCheckpoint = currentCheckpoint;
        SetGameState(GameState::InGamePaused);
        break;
    }

    int count = m_persistentState->LoadInt32(":ScoreCount", 0);

    const int bufferLength = 16;
    char16 str[bufferLength];

    for (int i = 0; i < count; i++)
    {
        HighScoreEntry entry;
        int len = swprintf_s(str, bufferLength, L"%d", i);
        Platform::String^ string = ref new Platform::String(str, len);

        entry.elapsedTime = m_persistentState->LoadSingle(Platform::String::Concat(":ScoreTime", string), 0.0f);
        entry.tag = m_persistentState->LoadString(Platform::String::Concat(":ScoreTag", string), L"");
        m_highScoreTable.AddScoreToTable(entry);
    }
}
```

> **Xxxxxxxxx**  Xxxxxx Xxxx xxxxx'x xxxxxxxxxxx xxxxxxx xxxx xxxxxxxx—xxxx xx, xxxxxxxx xxx xxx xxxxx xxxx xxxxxxx x xxxxx xxxxxxx xxxxx—xxx xxxxxxxx xxxx x xxxxxxxxx xxxxx. Xxxx xx xxxxxxxxxxx xxxxxx xxx xxx XXX xxxx.

 

Xxx xxxx xxxxxxxx xxxx xxxxxxxxxxx xxx xx xxxxx xxx xxxxxxxx xxxxxxxx xxx xxxxx xxxx xxx xxxxx xxxxxxxxxxx xxxx xxxxx, xxx [Xxxxxxxxxx: Xxxxx xxxxxxxxxxx xxxx](https://msdn.microsoft.com/library/windows/apps/hh465118). Xxx xxxx xxxx xxxxx xxxxxxxxxxx xxxx, xxx [Xxxxx xxx xxxxxxxx xxxxxxxx xxx xxxxx xxx xxxx](https://msdn.microsoft.com/library/windows/apps/mt299098).

##  Xxxx xxxxx


Xxxx [Xxxxxx xxxxxx xxxxxxx xx xxx Xxxxxx Xxxx xxxxxx](adding-visual-content-to-the-marble-maze-sample.md) xxx xxxxxxxxxxx xxxxx xxxx xx xxx xxx xxxxxxxxx xx xxxx xx xxxx xxxx xxx xxxx xxxx xxxxxx xxxxxxxxx.

## Xxxxxxx xxxxxx

* [Xxxxxx xxxxxx xxxxxxx xx xxx Xxxxxx Xxxx xxxxxx](adding-visual-content-to-the-marble-maze-sample.md)
* [Xxxxxx Xxxx xxxxxx xxxxxxxxxxxx](marble-maze-sample-fundamentals.md)
* [Xxxxxxxxxx Xxxxxx Xxxx, x XXX xxxx xx X++ xxx XxxxxxX](developing-marble-maze-a-windows-store-game-in-cpp-and-directx.md)

 

 




<!--HONumber=Mar16_HO1-->
