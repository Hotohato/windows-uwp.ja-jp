---
author: msatranjr
ms.assetid: 96361CAF-C347-4671-9721-8208CE118CA4
title: "UWP アプリのパッケージ化"
description: "ユニバーサル Windows プラットフォーム (UWP) アプリを販売、またはその他のユーザーに配布するには、appxupload パッケージを作成する必要があります。"
translationtype: Human Translation
ms.sourcegitcommit: 6530fa257ea3735453a97eb5d916524e750e62fc
ms.openlocfilehash: a77e441cbd1b6826e06064dbd4be449813754b25

---
# UWP アプリのパッケージ化

\[Windows 10 の UWP アプリ向けに更新。 Windows 8.x の記事については、[アーカイブ](http://go.microsoft.com/fwlink/p/?linkid=619132)をご覧ください\]

ユニバーサル Windows プラットフォーム (UWP) アプリを販売、またはその他のユーザーに配布するには、appxupload パッケージを作成する必要があります。 appxupload を作成すると、別の appx パッケージがテストとサイドローディング用に生成されます。 デバイスに appx パッケージをサイドローディングすることで、アプリを直接配布できます。 この記事では、UWP アプリ パッケージを構成、作成、テストする方法について説明します。 サイドローディングについて詳しくは、「[DISM を使ったアプリのサイドローディング](http://go.microsoft.com/fwlink/?LinkID=231020)」をご覧ください。

Windows 10 では、Windows ストアにアップロードできる 1 つのパッケージ (.appxupload) を作成します。 その後、アプリはどの Windows 10 デバイスでもインストールして実行できるようになります。 次に示しているのは、アプリ パッケージを作成する手順です。

1.  [アプリ パッケージを作成する前に](#before-packaging-your-app)。 ここでの手順に従って、アプリがストアへの提出用にパッケージ化の準備ができていることを確認します。
2.  [アプリ パッケージを構成する](#configure-an-app-package)。 マニフェスト デザイナーを使って、パッケージを構成します。 たとえば、タイル画像を追加し、アプリでサポートされる向きを選びます。
3.  [アプリ パッケージを作成する](#create-an-app-package)。 Microsoft Visual Studio のウィザードを使ってアプリ パッケージを作成してから、Windows アプリ認定キットを使ってそのパッケージを認定します。
4.  [アプリ パッケージをサイドローディングする](#sideload-your-app-package)。 アプリをサイドローディングした後、そのアプリが正常に動作することをテストできます。

これらの手順を完了したら、アプリをストアで販売できます。 内部ユーザー専用で販売する予定がない基幹業務 (LOB) アプリがある場合は、そのアプリをサイドローディングして、任意の Windows 10 デバイスにインストールできます。

## アプリ パッケージを作成する前に

1.  アプリをテストする。 ストアへの提出用にアプリ パッケージを作成する前に、サポート予定のすべてのデバイス ファミリでそのアプリが想定どおりに動作することを確認します。 これらのデバイス ファミリには、デスクトップ、モバイル、Surface Hub、XBOX、IoT デバイスなどが含まれる場合があります。
2.  アプリを最適化する。 Visual Studio のプロファイリングおよびデバッグ ツールを使って、UWP アプリのパフォーマンスを最適化できます。 たとえば、UI 応答のタイムライン ツール、メモリ使用率のツール、CPU 使用率のツールを使えます。 これらのツールについて詳しくは、「[デバッグなしの診断ツールの実行](https://msdn.microsoft.com/library/dn957936.aspx)」をご覧ください。
3.  .NET ネイティブ互換性を確認する (VB と C# のアプリの場合)。 UWP で、アプリの実行時のパフォーマンスを向上させる新しいネイティブ コンパイラを使えるようになりました。 この変更により、新しいコンパイル環境でアプリをテストすることをお勧めします。 既定では、**リリース** ビルド構成により、.NET ネイティブ ツール チェーンが可能であるため、重要なのは、この**リリース**構成でアプリをテストし、想定どおりにアプリが動作することを確認することです。 .NET ネイティブで発生する可能性のあるいくつかの一般的なデバッグの問題について詳しくは、[こちら](http://blogs.msdn.com/b/visualstudioalm/archive/2015/07/29/debugging-net-native-windows-universal-apps.aspx) (英語) をご覧ください。

## アプリ パッケージを構成する

アプリ マニフェスト ファイル (package.appxmanifest.xml) には、アプリ パッケージの作成に必要なプロパティと設定があります。 たとえば、マニフェスト ファイル内のプロパティには、アプリのタイルとして使う画像や、ユーザーがデバイスを回転するときにアプリでサポートされる向きを定義します。

Visual Studio のマニフェスト デザイナーを使えば、生の XML を編集することなくマニフェスト ファイルを簡単に更新できます。

Visual Studio では、パッケージをストアに関連付けることができます。 これを行うと、マニフェスト デザイナーの [パッケージ化] タブの一部のフィールドが自動的に更新されます。

**マニフェスト デザイナーを使ってパッケージを構成する**

1.  **ソリューション エクスプローラー**で、UWP アプリのプロジェクト ノードを展開します。
2.  **[Package.appxmanifest]** ファイルをダブルクリックします。 マニフェスト ファイルが既に XML コード ビューで開かれている場合は、ファイルを閉じるよう指示するプロンプトが Visual Studio で表示されます。
3.  この時点で、アプリをどのように構成するかを決めることができます。 各タブには、アプリについて構成可能な情報や、さらに情報が必要なときのためのリンクがあります。<br/>
    ![](images/packaging-screen1.jpg)

    [**ビジュアル資産**] タブで、UWP アプリに必要なすべての画像があることを確認します。

    [**パッケージ化**] タブで、公開するデータを入力できます。 ここで、アプリの署名に使う証明書を選べます。 すべての UWP アプリは証明書で署名する必要があります。 アプリ パッケージをサイドローディングするには、パッケージを信頼する必要があります。 証明書は、パッケージを信頼するデバイスにインストールされていなければなりません。 サイドローディングについて詳しくは、「[デバイスを開発用に有効にする](https://msdn.microsoft.com/library/windows/apps/Dn706236)」をご覧ください。

4.  アプリに必要な編集を行った後に、ファイルを保存します。

## アプリ パッケージを作成する

ストアを通じてアプリを配布するには、appxupload パッケージを作成する必要があります。 これは**アプリ パッケージの作成**ウィザードを使って行えます。 ここでの手順に従って、Microsoft Visual Studio 2015 でストアへの提出用にパッケージを作成します。

**アプリ パッケージを作成するには**

1.  **ソリューション エクスプローラー**で、UWP アプリ プロジェクトのソリューションを開きます。
2.  プロジェクトを右クリックし、**[ストア]** -> **[アプリ パッケージの作成]** の順に選択します。 このオプションが無効になっているか、まったく表示されない場合は、プロジェクトが UWP プロジェクトであることを確認します。<br/>
    ![](images/packaging-screen2.jpg)

    **アプリ パッケージの作成**ウィザードが表示されます。

3.  Windows ストアにアップロードするパッケージを作成するかどうかを確認する最初のダイアログ ボックスで [はい] を選び、[次へ] をクリックします。<br/>
    ![](images/packaging-screen3.jpg)

    ここで [いいえ] を選んだ場合、Visual Studio では、ストアの提出に必要な .appxupload パッケージは生成されません。 アプリをサイドローディングして社内デバイスで実行するだけの場合は、このオプションを選べます。 サイドローディングについて詳しくは、「[デバイスを開発用に有効にする](https://msdn.microsoft.com/library/windows/apps/Dn706236)」をご覧ください。

4.  開発者アカウントで Windows デベロッパー センターにログインします (まだ開発者アカウントがない場合は、ウィザードで作成できます)。
5.  パッケージのアプリ名を選びます。または、Windows デベロッパー センター ポータルでまだ予約していない場合は、新しいアプリ名を予約します。<br/>
    ![](images/packaging-screen4.jpg)
6.  [**パッケージの選択と構成**] ダイアログ ボックスで、必ず 3 つのアーキテクチャ構成 (x86、x64、ARM) をすべて選んでください。 それにより、アプリを多様なデバイスに展開できるようになります。 [**アプリケーション バンドルの生成**] ボックスで [**常に行う**] を選びます。 これにより、ストア提出プロセスははるかに簡単になります。アップロードするファイルが 1 つのみ (.appxupload) で済むためです。 1 つのバンドルには、各プロセッサ アーキテクチャのデバイスに展開するために必要なすべてのパッケージが含まれています。<br/>
    ![](images/packaging-screen5.jpg)
7.  Windows デベロッパー センターからの[クラッシュ分析](http://blogs.windows.com/buildingapps/2015/07/13/crash-analysis-in-the-unified-dev-center/)のエクスペリエンスを最大限に高めるために、完全な PDB シンボル ファイルを含めることをお勧めします。 シンボルを使ったデバッグについて詳しくは、「[シンボルを使用したデバッグ](https://msdn.microsoft.com/library/windows/desktop/Ee416588)」をご覧ください。
8.  これで、パッケージを作成するための詳細を構成できるようになりました。 アプリを公開する準備ができたら、出力場所からパッケージをアップロードします。
9.  [**作成**] をクリックして、appxupload パッケージを生成します。
10. すると、次のダイアログ ボックスが表示されます。<br/>
    ![](images/packaging-screen6.jpg)

    アプリをストアに提出する前に、認定されるようにローカルまたはリモート コンピューターで検証します (アプリ パッケージのデバッグ ビルドではなくリリース ビルドのみを検証できます)。

11. ローカルで検証するには、[**ローカル コンピューター**] オプションを選んだままで、[**Windows アプリ認定キットを起動する**] をクリックします。 Windows アプリ認定キットでアプリをテストする方法について詳しくは、「[Windows アプリ認定キット](https://msdn.microsoft.com/library/windows/apps/Mt186449)」をご覧ください。

    Windows アプリ認定キットはテストを実行し、結果を表示します。 「[Windows アプリ認定キットのテスト](https://msdn.microsoft.com/library/windows/apps/mt186450)」をご覧ください。

    リモート Windows 10 デバイスを使ってテストする場合は、そのデバイスに Windows アプリ認定キットを手動でインストールする必要があります。 この手順については、次のセクションで説明します。 その後、[**リモート コンピューター**] を選び、[**Windows アプリ認定キットを起動する**] をクリックしてリモート デバイスに接続し、検証テストを実行します。

12. WACK の終了後、アプリが合格したら、ストアにアップロードできます。 必ず正しいファイルをアップロードしてください。 そのファイルはソリューションのルート フォルダー \\\[AppName\]\\AppPackages にあり、.appxupload というファイル拡張子が付いています。 名前は \[AppName\]\_\[AppVersion\]\_x86\_x64\_arm\_bundle.appxupload という形式になります。

**リモート Windows 10 デバイスでアプリ パッケージを検証する**

1.  「[デバイスを開発用に有効にする](https://msdn.microsoft.com/library/windows/apps/Dn706236)」の手順に従って、開発用に Windows 10 デバイスを有効にします。
    **重要:** Windows 10 対応のリモート ARM デバイスでアプリ パッケージを検証することはできません。
2.  Visual Studio のリモート ツールをダウンロードしてインストールします。 これらのツールを使って Windows アプリ認定キットをリモートで実行します。 これらのツールについてダウンロード場所など詳しくは、[リモート コンピューターでの Windows ストア アプリの実行](https://msdn.microsoft.com/library/hh441469.aspx#BKMK_Starting_the_Remote_Debugger_Monitor)に関するページをご覧ください。
3.  必要な [Windows アプリ認定キット](http://go.microsoft.com/fwlink/p/?LinkID=309666)をダウンロードし、リモート Windows 10 デバイスにインストールします。
4.  **パッケージの作成が完了しました**ウィザードのページで、[**リモート コンピューター**] オプション ボタンを選び、[**テスト接続**] ボタンの横にある省略記号ボタンをクリックします。
    **注:** **[リモート コンピューター]** オプション ボタンを使用できるのは、検証をサポートするソリューション構成を少なくとも 1 つ選んだ場合のみです。 WACK でアプリをテストする方法について詳しくは、「[Windows アプリ認定キット](https://msdn.microsoft.com/library/windows/apps/Mt186449)」をご覧ください。
5.  サブネットの内部にあるデバイスの形式を指定するか、サブネットの外部にあるデバイスのドメイン ネーム サーバー (DNS) 名または IP アドレスを指定します。
6.  Windows 資格情報を使ってデバイスにログオンする必要がない場合は、[**認証モード**] ボックスの一覧で [**なし**] を選びます。
7.  [**選択**]、[**Windows アプリ認定キットを起動する**] の順に選びます。 デバイスでリモート ツールが実行されていれば、Visual Studio がデバイスに接続されてから、検証テストが実行されます。 「[Windows アプリ認定キットのテスト](https://msdn.microsoft.com/library/windows/apps/mt186450)」をご覧ください。

## アプリ パッケージをサイドローディングする

UWP アプリ パッケージは、デスクトップ アプリとは異なり、デバイスにアプリを簡単にインストールすることはできません。 通常、ストアからこれらのアプリをダウンロードします。それがアプリをデバイスにインストールする方法です。 ただし、アプリをストアに提出することなく、デバイスにサイドローディングできます。 これにより、作成したアプリ パッケージ (.appx) を使って、アプリをインストールし、テストできます。 基幹業務 (LOB) アプリのように、ストアで販売しないアプリの場合は、そのアプリをサイドローディングして、社内の他のユーザーが使えるようにできます。

次に示しているのは、アプリをサイドローディングするための要件です。

-   [開発用にデバイスを有効にする](https://msdn.microsoft.com/library/windows/apps/Dn706236)必要があります。
-   Windows 10 Mobile デバイスにアプリをサイドローディングするには、[WinAppDeployCmd.exe](install-universal-windows-apps-with-the-winappdeploycmd-tool.md) ツールを使う必要があります。

**デスクトップ、ラップトップ、またはタブレットにアプリをサイドローディングする**

1.  インストールするバージョンのフォルダーをターゲット デバイスにコピーします。

    アプリ バンドルを作成した場合は、バージョン番号に基づいたフォルダーおよび \_test フォルダーが必要です。 たとえば、2 つのフォルダーは次のようになります (インストールするバージョンは 1.0.2)。

    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0
    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_Test

    アプリ バンドルがない場合は、適切な構造になっているフォルダーおよび対応するテスト フォルダーをコピーできます。 たとえば、2 つのフォルダーは次のようになります。

    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_x64
    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_x64\_Test
2.  ターゲット デバイスでテスト フォルダーを開きます。 たとえば、C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_Test です。
3.  **Add-AppDevPackage.ps1** ファイルを右クリックし、[**PowerShell で実行**] を選んで、画面の指示に従います。<br/>
    ![](images/packaging-screen7.jpg)

    アプリ パッケージがインストールされると、PowerShell のウィンドウで "アプリが正常にインストールされました" というメッセージが表示されます。

    **注:** タブレットでショートカット メニューを開くには、右クリックする画面をタッチし、完全な円が表示されてから指を離します。 指を放した後にショートカット メニューが表示されます。
4.  スタート ボタンをクリックし、起動するアプリの名前を入力します。

 

 







<!--HONumber=Jun16_HO4-->


