---
Description: Xxxxxxxxxxx: Xxxxxxx, xxxxxxx, xxx xxxxxx xxxxx xxxx xxxx xxxxxxxx xxxxxxx, xxxx xx xxxxx, xxxxx, xxx/xxxxxx, xxx xxxxxxxx, xx Xxxxxxxxx Xxxxxxx Xxxxxxxx (XXX) xxxx.
title: xxxxx: Xxxxxx xxxxxxx xxxxx
ms.assetid: BDBC9E33-4037-4671-9596-471DCF855C82
label: Handle pointer input
template: detail.hbs
---

# xx.xxxxxxx: XXXXYXYY-YYYY-YYYY-YYYY-YYYXXXYYYXYY


xxxxx: Xxxxxx xxxxxxx xxxxx xxxxxxxx: xxxxxx.xxx


Xxxxxx xxxxxxx xxxxx

**\[ Xxxxxxx xxx XXX xxxx xx Xxxxxxx YY.**

-   [**Xxx Xxxxxxx Y.x xxxxxxxx, xxx xxx [xxxxxxx](http://go.microsoft.com/fwlink/p/?linkid=619132) \]**](https://msdn.microsoft.com/library/windows/apps/br225648)
-   [**Xxxxxxx, xxxxxxx, xxx xxxxxx xxxxx xxxx xxxx xxxxxxxx xxxxxxx, xxxx xx xxxxx, xxxxx, xxx/xxxxxx, xxx xxxxxxxx, xx Xxxxxxxxx Xxxxxxx Xxxxxxxx (XXX) xxxx.**](https://msdn.microsoft.com/library/windows/apps/br208383)
-   [**Xxxxxxxxx XXXx**](https://msdn.microsoft.com/library/windows/apps/br242084)


**Xxxxxxx.Xxxxxxx.Xxxxx**  
Xxxxxxx.XX.Xxxxx Xxxxxxx.XX.Xxxx.Xxxxx **Xxxxxxxxx** Xx xxx xxxxxxxxx xxxx xxx xxxxxxxxxxx xxxxxxx, xxxx xx xxxx xxxx xxxxx xxxxxx xx xxxxxxxxx xxxxxxxxxx xxxxxxxxx xxxxxx xxxxxxxxxxx xxxx xxx XX xxxxxxxx xx xxxx xxx.


## Xx xxxxxxxxx xxxx xxx xxxxx xxxx xxxxxx xxxxxxxxxxxx xx xxx [Xxxxxxxx xxxx](https://msdn.microsoft.com/library/windows/apps/mt185406) xx xxxx xxxxxx xxxxxxxxxx xxx xxxxxxxxxxxx.


Xxx xxxxxxxx xxxxxxxx xxxxxxx xxx xxxx Xxxxxxxxx Xxxxxxx Xxxxxxxx (XXX) xxxx xxxxxxxxxxx xxxxxxxxxx, xxxxxxxxx xxxxxxxx xxxxxxxxxxxx, xxxxxxxx xxxxxxx xxxxxxx, xxxxxx xxxxxxxx, xxx xxxxxxxxxxxxx. Xxxxxx xxxxxx xxxxxxxxxxxx xxxx xx xxxxx xx x xxxxx, xxxx-xxxxxxx xxxxxxxxxxx xxx xxxxx xxxxxxxxxxxx xxx'x xxxxxxx xxxx xxxxxxxx. <span id="Pointers">
            </span>
            <span id="pointers">
            </span>
            <span id="POINTERS">
            </span>Xxxxxxxx

Xxxx xxxxxxxxxxx xxxxxxxxxxx xxxxxxx xxx xxxx xxxxxxxxxxx xxx xxxxxx xxxx xxxx xx xxxxxxxx xxxx xx xxxxxxxx xx xx xxxxx xxxxx xxxxxxx xxxx xx xxxxx, xxxxx, xxx/xxxxxx, xxx xxxxxxxx.

 

Xxxxxxx xxx xxx Xxxxx Xxxxxxxxx Xxxxxx (XXX) xxxx xxxxxxxx xx xxxxx xxxxx xxxxxxx xxxxxxxx xxxx xxxxxx xxxxxxxxxx, xxx xxxx xx xxxxxxxx xxxx x xxxxxxx xxxxx xxxxx xxx xxxxxxx xx xxxxxxxxxxxx, xxxxxx-xxxxxxxx xxxxxxx xxxx. Xxxx XXX xxxx xxx xxxx xxxxxxx xxxx xxxx xxxxxxx xxxxxxxx xxxxx xxx xxxxx xxxxxx xxxxx xxxx.

## **Xxxx**  Xxxxxx-xxxxxxxx xxxx xx xxxx xxxxxxxx xxxx xxx xxx XXX xxxx xxxxxx xxxx xxx xxxxxxx xx.


Xxxx xxxxx xxxxx (xx xxxxxxx) xx xxx xxxxx xxxxx xx xxxxxxxxxxx xx x [**Xxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br227968) xxxxxx xxxxxxx xxxxxxx xxx [**XxxxxxxXxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/hh943076) xxxxxxxxx xxxxxxxx xx xxxxxxx xxxxxxx xxxxxx. Xx xxx xxxx xx xxxxx-xxx xx xxxxx-xxxxx xxxxx, xxxx xxxxxxx xx xxxxxxx xx x xxxxxx xxxxx xxxxx. <span id="Pointer_events">
            </span>
            <span id="pointer_events">
            </span>
            <span id="POINTER_EVENTS">
            </span>Xxxxxxx xxxxxx

Xxxxxxx xxxxxx xxxxxx xxxxx xxxx xxxx xx xxxxxxxxx xxxxx (xx xxxxx xx xx xxxxxxx) xxx xxxxxx xxxx, xxx xxxxxxxx xxxx xxxx xx xxxxxxxx, xxxxxxxx, xxx xxxxxxx xxxxxxxx.

Xx xxxxxxxx, xxxxxxxx xxxxxx xxxxxxxxxx xxxx xx xxxxx xxxxx xxxxxx x xxxx xxxxxxx xx xxxxxxx xxx xxx xxxxxx xxx xx xxxxx xxxx xxx xxxx xxxxxxxxx. Xx xxxx xxx xxxxx xx xxxxxxxxxxxxx xxxxxxx xxxxx xxxxxxx xxx xxxxx xxxxxxxxxxxx, xxx [Xxxxxxxx xxxxx xxxxxxx](identify-input-devices.md). XXX xxxx xxx xxxxxx xxx xxx xxxxxxxxx xxxxxxx xxxxxx:

 

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">**Xxxx**  Xxxx [**XxxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208918) xx xxxxxxxxx xxxxxxx xxxxx xx x xxxxxxxx XX xxxxxxx.</th>
<th align="left">Xxxx x xxxxxxx xx xxxxxxxx xx xx xxxxxxx, xxxx xxxx xxxxxx xxxxxxxx xxx xxxxxxx xxxxx xxxxxx, xxxx xxxx xxx xxxxxxx xxxxx xxxxxxx xxx xxxxxxxx xxxx xx xxx xxxxxx.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p><span id="PointerCanceled"></span><span id="pointercanceled"></span><span id="POINTERCANCELED"></span>Xxx xxxxxxxxx xxxxxxx xxx xxxxxxx xxxxxx x [**XxxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208971) xxxxx xxxxxxx xx [**XxXxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br227976) (xxxxx xxxxxx xxxxxxx, xxxxx xx xxxxxx xx xxxxxxx) xxxx xx xxxx xxx **XxxxxxxXxxxxxx** xx xx xxxxxxxxxx.</p></td>
<td align="left"><p>Xxxxx</p>
<ul>
<li>Xxxxxxxxxxx</li>
<li>[<strong>XxxxxxxXxxxxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</li>
<li>Xxxxxx xxxx x xxxxxxx xx xxxxxxxx xx xxx xxxxxxxx.</li>
<li>Xxxxx xxxxxxxx xxx xxxxxxxx xxxx x xxx xx xxxxxxxx xxxxxx xxxxx xx xxx xxxxx xxxxxxx.</li>
<li>Xx xxxxxx xxxxxxx xx xxx xxxxxxxx xxx xxxx xxxx YYY xx.</li>
</ul></td>
</tr>
<tr class="even">
<td align="left"><p><span id="PointerCaptureLost"></span><span id="pointercapturelost"></span><span id="POINTERCAPTURELOST"></span>Xxxxxxx/xxxxxxx xx xxxxxxx (xxxxxxxxxx, xxxxxxxx, xxxxx-xxx xxxxxxxxxxxxx).</p></td>
<td align="left"><p>Xxx xxxxxxx xx xxxxxx xx xxx xxxx xxx xxxxxx xxx.</p>
<div class="alert">Xxx xxxxxx xx xxxxxxxxxxxx xxxxxxxx xxxxxxxx xxx xxxxxx xxxxxxxxx xx xxx xxxxxx.
</div>
<div>
 
</div></td>
</tr>
<tr class="odd">
<td align="left"><p><span id="PointerEntered"></span><span id="pointerentered"></span><span id="POINTERENTERED"></span>[<strong>XxxxxxxXxxxxxxXxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</p></td>
<td align="left"><p>Xxxxxx xxxx xxxxxxx XX xxxxxxx xxxxxxxx xxx xxxxxxx, xxx xxxxxxx xxx xxxxxxxx, xx xxxxxxx xxxxxxx xxx xxxxxxxxxxxxxxxx xxxxxxxx. 
<strong>Xxxx</strong>  Xxxxx xx xx xxxxxxxxxxxxx xxxxxxx xxxxxxx xxxxx.</p>
<ul>
<li>[<strong>XxxxxxxXxxxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</li>
<li>Xxxxxx xxxx x xxxxxxx xxxxxx xxx xxxxxxxx xxxx xx xx xxxxxxx.</li>
<li>Xxxx xxx xxxxxx xx xxxxxxxx xxxxxxxxx xxxx xxx xxxxx, xxxxxxxx, xxxxx, xxx xxx xxxxx. Xxxxx xxxxxxxx x xxxxxx xxxxxxx xx xxxx xxxx xxxxx, xxxxxx xxxx x xxxxxx xxxxx xxxx xx xxx xxxxxxx xx xxxx xxxxxx xxxx xxx xxxxxxxx xxxx xx xxx xxxxxxx.</li>
</ul></td>
</tr>
<tr class="even">
<td align="left"><p><span id="PointerExited"></span><span id="pointerexited"></span><span id="POINTEREXITED"></span>Xxxxx xxx xxxxxxxx xxxx xxxx xx xx-xxxxxx xxxxxx xxxx xx xxxxxx xxxxxxx xxx xxxxx xxxx xxxxx xxxx xx xx xxxxx xx xxxxxxxx xxxxxx xx xxxxxxx.</p></td>
<td align="left"><p>Xxxx xxxxx, xxx xxxxx xxxx xxxxx xxxx x xxxxxx xxx xxxx xx xxx xxxxxxx xx xxxx xxxxxx xxxx xxx xxxxxxxx xxxx xx xxx xxxxxxx. Xxxxxxx, xxx xxxx xxx x xxxxx xxxxx ([<strong>XxXxXxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)) xxxx, xxxx xxxx, xxxxx xxxx xxxxx.</p>
<ul>
<li>[<strong>XxxxxxxXxxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</li>
<li>Xxxxxx xxxx x xxxxxxx xxxxxx xxx xxxxxxxx xxxx xx xx xxxxxxx.</li>
<li>Xxxx xxx xxxxxx xx xxxxxxxx xxxxxxxxx xxxx xxx xxxxx, xxxxxxxx, xxxxx, xxx xxx xxxxx. Xxxxx xxxxxxxx x xxxxxx xxxxxxx xxx xxxxx xxxx xxxxx xxxx xxx xxxxxxx xxxxx xxx xx xxx xxxxxxxx xxxx xx xxx xxxxxxx.</li>
</ul></td>
</tr>
<tr class="odd">
<td align="left"><p><span id="PointerMoved"></span><span id="pointermoved"></span><span id="POINTERMOVED"></span>Xxxxx xxx xxxxxxxx xxxx xxxx xx xx-xxxxxx xxxxxx xxxx xx xxxxxx xxxxxxx xxx xxxxx xxxx xxxxx xxxx xx xx xxxxx xx xxxxxxxx xxxxxx xx xxxxxxx.</p></td>
<td align="left"><p>Xxxx xxxxx, xxx xxxxx xxxx xxxxx xxxx xxxxxx xxx xx xxx xxxxxxxx xxxx xx xxx xxxxxxx. Xxxxxxx, xxx xxxx xxx x xxxxx xxxxx ([<strong>XxXxXxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)) xxxx xxxxx xxxx xxxxx xxxx xxx xxxxx xxxxxxx xxxx xxxx xx xxxxx.</p>
<ul>
<li>[<strong>XxxxxxxXxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</li>
<li>Xxxxxx xxxx x xxxxxxx xxxxxxx xxxxxxxxxxx, xxxxxx xxxxx, xxxxxxxx, xxxx, xx xxxxxxx xxxxxxxx (xxx xxxxxxx, xxxxx xxx xxxxxx) xxxxxx xxx xxxxxxxx xxxx xx xx xxxxxxx.</li>
<li>Xxxx xxx xxxxxx xx xxxxxxxx xxxxxxxxx xxxx xxx xxxxx, xxxxxxxx, xxxxx, xxx xxx xxxxx. Xxxxx xxxxxxxx x xxxxxx xxxxxxx xxx xxxxx xxxx xxxxx xxxx xxxx xx xxxxxxx xxxxxx xxx xxxxxxxx xxxx xx xxx xxxxxxx.</li>
</ul></td>
</tr>
<tr class="even">
<td align="left"><p><span id="PointerPressed"></span><span id="pointerpressed"></span><span id="POINTERPRESSED"></span>Xxxxx xxx xxxxxxxx xxxx xxxx xx xx-xxxxxx xxxxxx xxxx xx xxxxxx xxxxxxx xxx xxxxx xxxx xxxxx xxxx xx xx xxxxx xx xxxxxxxx xxxxxx xx xxxxxxx.</p></td>
<td align="left"><p>Xxxx xxxxx, xxx xxxxx xxxx xxxxx xxxx xx xxxxxxx xxxxxx xxx xxxxxxxx xxxx xx xxx xxxxxxx.</p>
<p>Xxxxxxx, xxx xxxx xxx x xxxxx xxxxx ([<strong>XxXxXxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)) xxxx, xxxx xxxx xxx xxxxxx xxx xxxxxxxx xxxx xx xxx xxxxxxx, xxxxx xxxx xxxxx.</p></td>
</tr>
<tr class="odd">
<td align="left"><p><span id="PointerReleased"></span><span id="pointerreleased"></span><span id="POINTERRELEASED"></span>[<strong>XxxxxxxXxxxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</p></td>
<td align="left"><p>Xxxxxx xxxx xxx xxxxxxx xxxxxxxxx x xxxxx xxxxxx (xxxx xx x xxxxx xxxx, xxxxx xxxxxx xxxx, xxx xxxx, xx xxxxxxxx xxxxxx xxxx) xxxxxx xxx xxxxxxxx xxxx xx xx xxxxxxx.</p></td>
</tr>
<tr class="even">
<td align="left"><p><span id="PointerWheelChanged"></span><span id="pointerwheelchanged"></span><span id="POINTERWHEELCHANGED"></span>[<strong>XxxxxxxXxxxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY) xxxx xx xxxxxx xxxx xxx xxxxxxx xxx xxxx xxxxx.</p></td>
<td align="left"><p>[<strong>XxxxxxxXxxxxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</p>
<p>Xxxxxx xxxx xxx xxxxxxx xxxxxxxxx x xxxxxxx xxxxxx (xxxx xx x xxxxx xx, xxxxx xxxxxx xx, xxx xx, xx xxxxxxxx xxxxxx xx) xxxxxx xxx xxxxxxxx xxxx xx xx xxxxxxx xx, xx xxx xxxxxxx xx xxxxxxxx, xxxxxxx xxx xxxxxxxx xxxx. [<strong>XxxxxxxXxxxxXxxxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY)</p></td>
</tr>
</tbody>
</table>

 

## Xxxxxx xxxx xxx xxxxx xxxxx xx xxxxxxx.


Xxxxx xxxxx xx xxxxxxxxxx xxxx x xxxxxx xxxxxxx xxxxxxxx xxxx xxxxx xxxxx xx xxxxx xxxxxxxx.

### Xxxxxxxx x xxxxx xxxxxx (xxxx, xxxxx, xx xxxxx) xxxxxxx x xxxxxxxxx xxxxxxxxxxx xxxxxxx xxx xxxxxxx xxx xxxx xxxxxx xxxxxxx xxx [<strong>XxxxxxxXxxxx</strong>](xxxxx://xxxx.xxxxxxxxx.xxx/xxxxxxx/xxxxxxx/xxxx/xxYYYYYY) xxxxx.

<span id="Example">
            </span>
            <span id="example">
            </span>
            <span id="EXAMPLE">
            </span>Xxxxxxx Xxxx'x xxxx xxxx xxxxxxxx xxxx x xxxxx xxxxxxx xxxxxxxx xxx xxxx xxxx xxx xx xxxxxx xxx xxx xxxxxx xxxxxxx xxxxxx xxx xxx xxxxxxx xxxxxxxxxx xxx xxxxxx xxxxxxxx.

<span id="Create_the_UI">
            </span>
            <span id="create_the_ui">
            </span>
            <span id="CREATE_THE_UI">
            </span>Xxxxxx xxx XX Xxx xxxx xxxxxxx, xx xxx x xxxxxxxxx (`targetContainer`) xx xxx xxxxxx xxxxxx xxx xxxxxxx xxxxx.

Xxx xxxxx xx xxx xxxxxx xxxxxxx xxxx xxx xxxxxxx xxxxxx xxxxxxx.

```XAML
<Page
    x:Class="PointerInput.MainPage"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PointerInput"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Name="page">

    <Grid Background="{StaticResource ApplicationForegroundThemeBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="69.458" />
            <ColumnDefinition Width="80.542"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="320" />
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Canvas Name="Container" 
                Grid.Column="0"
                Grid.Row="1"
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Margin="245,0" 
                Height="320"  Width="640">
            <Rectangle Name="Target" 
                       Fill="#FF0000" 
                       Stroke="Black" 
                       StrokeThickness="0"
                       Height="320" Width="640" />
        </Canvas>
        <Button Name="buttonClear"
                Foreground="White"
                Width="100"
                Height="100">
            clear
        </Button>
        <TextBox Name="eventLog" 
                 Grid.Column="1"
                 Grid.Row="0"
                 Grid.RowSpan="3" 
                 Background="#000000" 
                 TextWrapping="Wrap" 
                 Foreground="#FFFFFF" 
                 ScrollViewer.VerticalScrollBarVisibility="Visible" 
                 BorderThickness="0" Grid.ColumnSpan="2"/>
    </Grid>
</Page>
```

### Xxxxxxx xxx xxxx xxxxxxx xxx xxxxxxxxx xx x xxxxxxxx xxxx xxxxx xxxx xxxxx xxxx xxx xxxxxxx.

Xxx xxxxxxx xxxxxx xxxxxxxxxx xxx xxxxxxxxx xx xxx xxxx xx xxx xxxxxxxxx (xxx xxxxxxxxx xxxxx xxxxxxxx).

Xxxx xx xxx Xxxxxxxxxx Xxxxxxxxxxx Xxxxxx Xxxxxxxx (XXXX) xxx xxxx xxxxxxx.

<span id="Listen_for_pointer_events">
            </span>
            <span id="listen_for_pointer_events">
            </span>
            <span id="LISTEN_FOR_POINTER_EVENTS">
            </span>Xxxxxx xxx xxxxxxx xxxxxx Xx xxxx xxxxx, xx xxxxxxxxx xxxx xxx xxx xxxxxxx xxxx xxxxxxx xxx [**XxxxxxxXxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/hh943076) xx xxx xxxxx xxxxxxx.

Xx xxx xxxxx xxxxxxxx xxxxx'x xxxxxx xxx xxxxxxx xxxxxxx xxxxxxxx, xxx xxx xxx xxxxxx xx xxxxxxxx [**XxxxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/br242038) xxxx xxxxxxx xxxxxxx xxx [**XxxXxxxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/hh943077) xxx [**XxxXxxxxxxxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/hh943078) xxxxxxx xx [**XxxxxxxXxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/hh943076).

```CSharp
        // For this example, we track simultaneous contacts in case the 
        // number of contacts has reached the maximum supported by the device.
        // Depending on the device, additional contacts might be ignored 
        // (PointerPressed not fired). 
        uint numActiveContacts;
        Windows.Devices.Input.TouchCapabilities touchCapabilities = new Windows.Devices.Input.TouchCapabilities();

        // Dictionary to maintain information about each active contact. 
        // An entry is added during PointerPressed/PointerEntered events and removed 
        // during PointerReleased/PointerCaptureLost/PointerCanceled/PointerExited events.
        Dictionary<uint, Windows.UI.Xaml.Input.Pointer> contacts;

        public MainPage()
        {
            this.InitializeComponent();
            numActiveContacts = 0;
            // Initialize the dictionary.
            contacts = new Dictionary<uint, Windows.UI.Xaml.Input.Pointer>((int)touchCapabilities.Contacts);
            // Declare the pointer event handlers.
            Target.PointerPressed += new PointerEventHandler(Target_PointerPressed);
            Target.PointerEntered += new PointerEventHandler(Target_PointerEntered);
            Target.PointerReleased += new PointerEventHandler(Target_PointerReleased);
            Target.PointerExited += new PointerEventHandler(Target_PointerExited);
            Target.PointerCanceled += new PointerEventHandler(Target_PointerCanceled);
            Target.PointerCaptureLost += new PointerEventHandler(Target_PointerCaptureLost);
            Target.PointerMoved += new PointerEventHandler(Target_PointerMoved);
            Target.PointerWheelChanged += new PointerEventHandler(Target_PointerWheelChanged);

            buttonClear.Click += new RoutedEventHandler(ButtonClear_Click);
        }

        private void ButtonClear_Click(object sender, RoutedEventArgs e)
        {
            eventLog.Text = "";
        }

```

### Xxx xxxx xxxxxxx, xx xxx x xxxxxxxxx (`targetContainer`) xx xxx xxxxxx xxxxxx xxx xxxxxxx xxxxx.

Xxx xxxxx xx xxx xxxxxx xxxxxxx xxxx xxx xxxxxxx xxxxxx xxxxxxx.

-   Xxx xxxxxxxxx xxxx xxxx xx xxx xxxxxx xxxxxx, xxxxxxxx xxxxxx xxxxxxxxx, xxx xxxxxxxxxx xxx xxxxxxx xxxxxxx xxxxx xxxxxxxxx xxx xxx xxxxxx. <span id="Handle_pointer_events">
            </span>
            <span id="handle_pointer_events">
            </span>
            <span id="HANDLE_POINTER_EVENTS">
            </span>Xxxxxx xxxxxxx xxxxxx

    Xxxx, xx xxx XX xxxxxxxx xx xxxxxxxxxxx xxxxx xxxxxxx xxxxx xxxxxxxx. Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208971) xxxxx.

     

```    CSharp
        // PointerPressed and PointerReleased events do not always occur in pairs. 
            // Your app should listen for and handle any event that might conclude a pointer down action 
            // (such as PointerExited, PointerCanceled, and PointerCaptureLost).
            // For this example, we track the number of contacts in case the 
            // number of contacts has reached the maximum supported by the device.
            // Depending on the device, additional contacts might be ignored 
            // (PointerPressed not fired). 
            void Target_PointerPressed(object sender, PointerRoutedEventArgs e)
            {
                Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

                // Update event sequence.
                eventLog.Text += "\nDown: " + ptr.PointerId;

                // Change background color of target when pointer contact detected.
                Target.Fill = new SolidColorBrush(Windows.UI.Colors.Green);

                // Prevent most handlers along the event route from handling the same event again.
                e.Handled = true;

                // Lock the pointer to the target.
                Target.CapturePointer(e.Pointer);

                // Update event sequence.
                eventLog.Text += "\nPointer captured: " + ptr.PointerId;

                // Check if pointer already exists (for example, enter occurred prior to press).
                if (contacts.ContainsKey(ptr.PointerId))
                {
                    return;
                }
                // Add contact to dictionary.
                contacts[ptr.PointerId] = ptr;
                ++numActiveContacts;

                // Display pointer details.
                createInfoPop(e);
            }
```

-   Xx xxx xxx xxxxx xx xxx xxxxx xxx, xxx xxx xxxxxxx xx xxx xxxxxxx xxxxx xxxx xxx xxxxxxxx xxx xxxxxxxx xx xxxxxxxx, xxx xxxxxxx xxx xxxxxxx xxxxxxx. **Xxxx**[**XxxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208971) xxx [**XxxxxxxXxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208972) xxxxxx xx xxx xxxxxx xxxxx xx xxxxx.

```    CSharp
        private void Target_PointerEntered(object sender, PointerRoutedEventArgs e)
            {
                Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

                // Update event sequence.
                eventLog.Text += "\nEntered: " + ptr.PointerId;

                if (contacts.Count == 0)
                {
                    // Change background color of target when pointer contact detected.
                    Target.Fill = new SolidColorBrush(Windows.UI.Colors.Blue);
                }

                // Check if pointer already exists (if enter occurred prior to down).
                if (contacts.ContainsKey(ptr.PointerId))
                {
                    return;
                }

                // Add contact to dictionary.
                contacts[ptr.PointerId] = ptr;
                ++numActiveContacts;

                // Prevent most handlers along the event route from handling the same event again.
                e.Handled = true;

                // Display pointer details.
                createInfoPop(e);
            }
```

-   Xxxx xxx xxxxxx xxxxxx xxx xxx xxxxxx xxx xxxxx xxxx xxxxx xxxxxxxx x xxxxxxx xxxx xxxxxx (xxxx xx [**XxxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208969), [**XxxxxxxXxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208964), xxx [**XxxxxxxXxxxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/br208965)). Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208968) xxxxx.

    Xx xxx xxx xxxxx xx xxx xxxxx xxx, xxx xxx xxxxxxx xx xxx xxxxxxx xxxxxxxxxx, xxx xxxxxxx xxx xxxxxxx xxxxxxx. Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/br208970) xxxxx. Xx xxx xxx xxxxx xx xxx xxxxx xxx xxx xxxxxx xxx xxxxxxx xxxxxxx. **Xxxxxxxxx**  Xxxxx xxxxx xx xxxxxxxxxx xxxx x xxxxxx xxxxxxx xxxxxxxx xxxx xxxxx xxxxx xx xxxxx xxxxxxxx.

     

```    CSharp
private void Target_PointerMoved(object sender, PointerRoutedEventArgs e)
    {
        Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

        // Multiple, simultaneous mouse button inputs are processed here.
        // Mouse input is associated with a single pointer assigned when 
        // mouse input is first detected. 
        // Clicking additional mouse buttons (left, wheel, or right) during 
        // the interaction creates secondary associations between those buttons 
        // and the pointer through the pointer pressed event. 
        // The pointer released event is fired only when the last mouse button 
        // associated with the interaction (not necessarily the initial button) 
        // is released. 
        // Because of this exclusive association, other mouse button clicks are 
        // routed through the pointer move event.          
        if (ptr.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Mouse)
        {
            // To get mouse state, we need extended pointer details.
            // We get the pointer info through the getCurrentPoint method
            // of the event argument. 
            Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
            if (ptrPt.Properties.IsLeftButtonPressed)
            {
                eventLog.Text += "\nLeft button: " + ptrPt.PointerId;
            }
            if (ptrPt.Properties.IsMiddleButtonPressed)
            {
                eventLog.Text += "\nWheel button: " + ptrPt.PointerId;
            }
            if (ptrPt.Properties.IsRightButtonPressed)
            {
                eventLog.Text += "\nRight button: " + ptrPt.PointerId;
            }
        }

        // Prevent most handlers along the event route from handling the same event again.
        e.Handled = true;

        // Display pointer details.
        updateInfoPop(e);
    }
```

-   Xxxxxxxx x xxxxx xxxxxx (xxxx, xxxxx, xx xxxxx) xxxxxxx x xxxxxxxxx xxxxxxxxxxx xxxxxxx xxx xxxxxxx xxx xxxx xxxxxx xxxxxxx xxx [**XxxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208971) xxxxx. Xxx [**XxxxxxxXxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208972) xxxxx xx xxxxx xxxx xxxx xxxx xxxx xxxxx xxxxxx xx xxxxxxxx (xx xxxxx xxxxxx xxx xx xxxxxxxxxx xxxx xxx xxxxxxx xxxxx xxxx xxxxx xx xxxxxxxx).

```    CSharp
private void Target_PointerWheelChanged(object sender, PointerRoutedEventArgs e)
    {
        Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

        // Update event sequence.
        eventLog.Text += "\nMouse wheel: " + ptr.PointerId;

        // Check if pointer already exists (for example, enter occurred prior to wheel).
        if (contacts.ContainsKey(ptr.PointerId))
        {
            return;
        }

        // Add contact to dictionary.
        contacts[ptr.PointerId] = ptr;
        ++numActiveContacts;

        // Prevent most handlers along the event route from handling the same event again.
        e.Handled = true;

        // Display pointer details.
        createInfoPop(e);
    }
```

-   Xxxxxxx xx xxxx xxxxxxxxx xxxxxxxxxxx, xxxxx xxxxx xxxxxx xxxxxx xxx xxxxxx xxxxxxx xxx [**XxxxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/br208970) xxxxx. Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208973) xxxxx.

```    CSharp
void Target_PointerReleased(object sender, PointerRoutedEventArgs e)
    {
        Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

        // Update event sequence.
        eventLog.Text += "\nUp: " + ptr.PointerId;

        // If event source is mouse or touchpad and the pointer is still 
        // over the target, retain pointer and pointer details.
        // Return without removing pointer from pointers dictionary.
        // For this example, we assume a maximum of one mouse pointer.
        if (ptr.PointerDeviceType != Windows.Devices.Input.PointerDeviceType.Mouse)
        {
            // Update target UI.
            Target.Fill = new SolidColorBrush(Windows.UI.Colors.Red);

            destroyInfoPop(ptr);

            // Remove contact from dictionary.
            if (contacts.ContainsKey(ptr.PointerId))
            {
                contacts[ptr.PointerId] = null;
                contacts.Remove(ptr.PointerId);
                --numActiveContacts;
            }

            // Release the pointer from the target.
            Target.ReleasePointerCapture(e.Pointer);

            // Update event sequence.
            eventLog.Text += "\nPointer released: " + ptr.PointerId;

            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;
        }
        else
        {
            Target.Fill = new SolidColorBrush(Windows.UI.Colors.Blue);
        }

    }
```

-   Xx xxx xxx xxxxx xx xxx xxxxx xxx, xxx xxx xxxxxxx xx xxx xxxxxxx xxxxx (xx xxxxxxxxx), xxx xxxxxxx xxx xxxxxxx xxxxxxx. Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208972) xxxxx xxxxx xxxxxxx xxxx xxx xxxxxxxxx xx xxxxxxxxxx.

```    CSharp
private void Target_PointerExited(object sender, PointerRoutedEventArgs e)
    {
        Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

        // Update event sequence.
        eventLog.Text += "\nPointer exited: " + ptr.PointerId;

        // Remove contact from dictionary.
        if (contacts.ContainsKey(ptr.PointerId))
        {
            contacts[ptr.PointerId] = null;
            contacts.Remove(ptr.PointerId);
            --numActiveContacts;
        }

        // Update the UI and pointer details.
        destroyInfoPop(ptr);

        if (contacts.Count == 0)
        {
            Target.Fill = new SolidColorBrush(Windows.UI.Colors.Red);
        }
        
        // Prevent most handlers along the event route from handling the same event again.
        e.Handled = true;
    }
```

-   Xx xxx xxx xxxxx xx xxx xxxxx xxx, xxxxxx xxx xxxxxxx xxxx xxx xxxxxxx xxxxxxxxxx, xxx xxxxxx xxx xxxxxxx xxxxxxx. Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208969) xxxxx xxxxx xxxxxxx xxxx xxx xxxxxxxxx xx xxxxxxxxxx.

```    CSharp
// Fires for for various reasons, including: 
    //    - Touch contact canceled by pen coming into range of the surface.
    //    - The device doesn&#39;t report an active contact for more than 100ms.
    //    - The desktop is locked or the user logged off. 
    //    - The number of simultaneous contacts exceeded the number supported by the device.
    private void Target_PointerCanceled(object sender, PointerRoutedEventArgs e)
    {
        Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

        // Update event sequence.
        eventLog.Text += "\nPointer canceled: " + ptr.PointerId;

        // Remove contact from dictionary.
        if (contacts.ContainsKey(ptr.PointerId))
        {
            contacts[ptr.PointerId] = null;
            contacts.Remove(ptr.PointerId);
            --numActiveContacts;
        }

        destroyInfoPop(ptr);

        if (contacts.Count == 0)
        {
            Target.Fill = new SolidColorBrush(Windows.UI.Colors.Black);
        }
        // Prevent most handlers along the event route from handling the same event again.
        e.Handled = true;
    }
```

-   Xx xxx xxx xxxxx xx xxx xxxxx xxx, xxxxxx xxx xxxxxxx xxxx xxx xxxxxxx xxxxx, xxx xxxxxx xxx xxxxxxx xxxxxxx. Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208964) xxxxx.

    Xx xxx xxx xxxxx xx xxx xxxxx xxx, xxxxxx xxx xxxxxxx xxxx xxx xxxxxxx xxxxx, xxx xxxxxx xxx xxxxxxx xxxxxxx. Xxxx xxxxxxx xxxxxxx x [**XxxxxxxXxxxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/br208965) xxxxx.

     

```    CSharp
// Fires for for various reasons, including: 
    //    - User interactions
    //    - Programmatic capture of another pointer
    //    - Captured pointer was deliberately released
    // PointerCaptureLost can fire instead of PointerReleased. 
    private void Target_PointerCaptureLost(object sender, PointerRoutedEventArgs e)
    {
        Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

        // Update event sequence.
        eventLog.Text += "\nPointer capture lost: " + ptr.PointerId;

        // Remove contact from dictionary.
        if (contacts.ContainsKey(ptr.PointerId))
        {
            contacts[ptr.PointerId] = null;
            contacts.Remove(ptr.PointerId);
            --numActiveContacts;
        }

        destroyInfoPop(ptr);

        if (contacts.Count == 0)
        {
            Target.Fill = new SolidColorBrush(Windows.UI.Colors.Black);
        }
        // Prevent most handlers along the event route from handling the same event again.
        e.Handled = true;
    }
```

### Xx xxx xxx xxxxx xx xxx xxxxx xxx, xxxxxx xxx xxxxxxx xxxx xxx xxxxxxx xxxxx, xxx xxxxxx xxx xxxxxxx xxxxxxx.

**Xxxx**[**XxxxxxxXxxxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/br208965) xxx xxxxx xxxxxxx xx [**XxxxxxxXxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/br208972).

-   Xxxxxxx xxxxxxx xxx xx xxxx xxx xxxxxxx xxxxxxx.

```    CSharp
        void createInfoPop(PointerRoutedEventArgs e)
            {
                TextBlock pointerDetails = new TextBlock();
                Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
                pointerDetails.Name = ptrPt.PointerId.ToString();
                pointerDetails.Foreground = new SolidColorBrush(Windows.UI.Colors.White);
                pointerDetails.Text = queryPointer(ptrPt);

                TranslateTransform x = new TranslateTransform();
                x.X = ptrPt.Position.X + 20;
                x.Y = ptrPt.Position.Y + 20;
                pointerDetails.RenderTransform = x;

                Container.Children.Add(pointerDetails);
            }
```

-   <span id="Get_pointer_properties">
            </span>
            <span id="get_pointer_properties">
            </span>
            <span id="GET_POINTER_PROPERTIES">
            </span>Xxx xxxxxxx xxxxxxxxxx

```    CSharp
        void updateInfoPop(PointerRoutedEventArgs e)
            {
                foreach (var pointerDetails in Container.Children)
                {
                    if (pointerDetails.GetType().ToString() == "Windows.UI.Xaml.Controls.TextBlock")
                    {
                        TextBlock _TextBlock = (TextBlock)pointerDetails;
                        if (_TextBlock.Name == e.Pointer.PointerId.ToString())
                        {
                            // To get pointer location details, we need extended pointer info.
                            // We get the pointer info through the getCurrentPoint method
                            // of the event argument. 
                            Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
                            TranslateTransform x = new TranslateTransform();
                            x.X = ptrPt.Position.X + 20;
                            x.Y = ptrPt.Position.Y + 20;
                            pointerDetails.RenderTransform = x;
                            _TextBlock.Text = queryPointer(ptrPt);
                        }
                    }
                }
            }
```

-   Xx xxxxxx xxxxxxx, xxx xxxx xxx xxxx xxxxxxxx xxxxxxx xxxx xxxx x [**Xxxxxxx.XX.Xxxxx.XxxxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/br242038) xxxxxx xxxxxxxx xxxxxxx xxx [**XxxXxxxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/hh943077) xxx [**XxxXxxxxxxxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/hh943078) xxxxxxx xx [**XxxxxxxXxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/hh943076).

```    CSharp
         String queryPointer(PointerPoint ptrPt)
             {
                 String details = "";

                 switch (ptrPt.PointerDevice.PointerDeviceType)
                 {
                     case Windows.Devices.Input.PointerDeviceType.Mouse:
                         details += "\nPointer type: mouse";
                         break;
                     case Windows.Devices.Input.PointerDeviceType.Pen:
                         details += "\nPointer type: pen";
                         if (ptrPt.IsInContact)
                         {
                             details += "\nPressure: " + ptrPt.Properties.Pressure;
                             details += "\nrotation: " + ptrPt.Properties.Orientation;
                             details += "\nTilt X: " + ptrPt.Properties.XTilt;
                             details += "\nTilt Y: " + ptrPt.Properties.YTilt;
                             details += "\nBarrel button pressed: " + ptrPt.Properties.IsBarrelButtonPressed;
                         }
                         break;
                     case Windows.Devices.Input.PointerDeviceType.Touch:
                         details += "\nPointer type: touch";
                         details += "\nrotation: " + ptrPt.Properties.Orientation;
                         details += "\nTilt X: " + ptrPt.Properties.XTilt;
                         details += "\nTilt Y: " + ptrPt.Properties.YTilt;
                         break;
                     default:
                         details += "\nPointer type: n/a";
                         break;
                 }

                 GeneralTransform gt = Target.TransformToVisual(page);
                 Point screenPoint;

                 screenPoint = gt.TransformPoint(new Point(ptrPt.Position.X, ptrPt.Position.Y));
                 details += "\nPointer Id: " + ptrPt.PointerId.ToString() +
                     "\nPointer location (parent): " + ptrPt.Position.X + ", " + ptrPt.Position.Y +
                     "\nPointer location (screen): " + screenPoint.X + ", " + screenPoint.Y;
                 return details;
             }
```

### Xxxxx, xx xxxxxx x xxx [**XxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/br209652) xxx xxxx xxxxxxx.

Xxxx xx xxxxxxx x xxx xx xxxxxx xxx xxxxxxx xxxx xx xx xxxxxxxx [**XxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/br209652) xxxxxxxxxx xxxx xxxx xxxxxxx. Xxxxxxx, xx xxxxx xxxxxxx xxxxxxx xxxxxxxxxx.

```CSharp
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Input;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;

// The Blank Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234238

namespace PointerInput
{
    /// <summary>
    /// An empty page that can be used on its own or navigated to within a Frame.
    /// </summary>
    public sealed partial class MainPage : Page
    {
        // For this example, we track simultaneous contacts in case the 
        // number of contacts has reached the maximum supported by the device.
        // Depending on the device, additional contacts might be ignored 
        // (PointerPressed not fired). 
        uint numActiveContacts;
        Windows.Devices.Input.TouchCapabilities touchCapabilities = new Windows.Devices.Input.TouchCapabilities();

        // Dictionary to maintain information about each active contact. 
        // An entry is added during PointerPressed/PointerEntered events and removed 
        // during PointerReleased/PointerCaptureLost/PointerCanceled/PointerExited events.
        Dictionary<uint, Windows.UI.Xaml.Input.Pointer> contacts;

        public MainPage()
        {
            this.InitializeComponent();
            numActiveContacts = 0;
            // Initialize the dictionary.
            contacts = new Dictionary<uint, Windows.UI.Xaml.Input.Pointer>((int)touchCapabilities.Contacts);
            // Declare the pointer event handlers.
            Target.PointerPressed += new PointerEventHandler(Target_PointerPressed);
            Target.PointerEntered += new PointerEventHandler(Target_PointerEntered);
            Target.PointerReleased += new PointerEventHandler(Target_PointerReleased);
            Target.PointerExited += new PointerEventHandler(Target_PointerExited);
            Target.PointerCanceled += new PointerEventHandler(Target_PointerCanceled);
            Target.PointerCaptureLost += new PointerEventHandler(Target_PointerCaptureLost);
            Target.PointerMoved += new PointerEventHandler(Target_PointerMoved);
            Target.PointerWheelChanged += new PointerEventHandler(Target_PointerWheelChanged);

            buttonClear.Click += new RoutedEventHandler(ButtonClear_Click);
        }

        private void ButtonClear_Click(object sender, RoutedEventArgs e)
        {
            eventLog.Text = "";
        }


        // PointerPressed and PointerReleased events do not always occur in pairs. 
        // Your app should listen for and handle any event that might conclude a pointer down action 
        // (such as PointerExited, PointerCanceled, and PointerCaptureLost).
        // For this example, we track the number of contacts in case the 
        // number of contacts has reached the maximum supported by the device.
        // Depending on the device, additional contacts might be ignored 
        // (PointerPressed not fired). 
        void Target_PointerPressed(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Update event sequence.
            eventLog.Text += "\nDown: " + ptr.PointerId;

            // Change background color of target when pointer contact detected.
            Target.Fill = new SolidColorBrush(Windows.UI.Colors.Green);

            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;

            // Lock the pointer to the target.
            Target.CapturePointer(e.Pointer);

            // Update event sequence.
            eventLog.Text += "\nPointer captured: " + ptr.PointerId;

            // Check if pointer already exists (for example, enter occurred prior to press).
            if (contacts.ContainsKey(ptr.PointerId))
            {
                return;
            }
            // Add contact to dictionary.
            contacts[ptr.PointerId] = ptr;
            ++numActiveContacts;

            // Display pointer details.
            createInfoPop(e);
        }

        void Target_PointerReleased(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Update event sequence.
            eventLog.Text += "\nUp: " + ptr.PointerId;

            // If event source is mouse or touchpad and the pointer is still 
            // over the target, retain pointer and pointer details.
            // Return without removing pointer from pointers dictionary.
            // For this example, we assume a maximum of one mouse pointer.
            if (ptr.PointerDeviceType != Windows.Devices.Input.PointerDeviceType.Mouse)
            {
                // Update target UI.
                Target.Fill = new SolidColorBrush(Windows.UI.Colors.Red);

                destroyInfoPop(ptr);

                // Remove contact from dictionary.
                if (contacts.ContainsKey(ptr.PointerId))
                {
                    contacts[ptr.PointerId] = null;
                    contacts.Remove(ptr.PointerId);
                    --numActiveContacts;
                }

                // Release the pointer from the target.
                Target.ReleasePointerCapture(e.Pointer);

                // Update event sequence.
                eventLog.Text += "\nPointer released: " + ptr.PointerId;

                // Prevent most handlers along the event route from handling the same event again.
                e.Handled = true;
            }
            else
            {
                Target.Fill = new SolidColorBrush(Windows.UI.Colors.Blue);
            }

        }

        private void Target_PointerMoved(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Multiple, simultaneous mouse button inputs are processed here.
            // Mouse input is associated with a single pointer assigned when 
            // mouse input is first detected. 
            // Clicking additional mouse buttons (left, wheel, or right) during 
            // the interaction creates secondary associations between those buttons 
            // and the pointer through the pointer pressed event. 
            // The pointer released event is fired only when the last mouse button 
            // associated with the interaction (not necessarily the initial button) 
            // is released. 
            // Because of this exclusive association, other mouse button clicks are 
            // routed through the pointer move event.          
            if (ptr.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Mouse)
            {
                // To get mouse state, we need extended pointer details.
                // We get the pointer info through the getCurrentPoint method
                // of the event argument. 
                Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
                if (ptrPt.Properties.IsLeftButtonPressed)
                {
                    eventLog.Text += "\nLeft button: " + ptrPt.PointerId;
                }
                if (ptrPt.Properties.IsMiddleButtonPressed)
                {
                    eventLog.Text += "\nWheel button: " + ptrPt.PointerId;
                }
                if (ptrPt.Properties.IsRightButtonPressed)
                {
                    eventLog.Text += "\nRight button: " + ptrPt.PointerId;
                }
            }

            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;

            // Display pointer details.
            updateInfoPop(e);
        }

        private void Target_PointerEntered(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Update event sequence.
            eventLog.Text += "\nEntered: " + ptr.PointerId;

            if (contacts.Count == 0)
            {
                // Change background color of target when pointer contact detected.
                Target.Fill = new SolidColorBrush(Windows.UI.Colors.Blue);
            }

            // Check if pointer already exists (if enter occurred prior to down).
            if (contacts.ContainsKey(ptr.PointerId))
            {
                return;
            }

            // Add contact to dictionary.
            contacts[ptr.PointerId] = ptr;
            ++numActiveContacts;

            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;

            // Display pointer details.
            createInfoPop(e);
        }

        private void Target_PointerWheelChanged(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Update event sequence.
            eventLog.Text += "\nMouse wheel: " + ptr.PointerId;

            // Check if pointer already exists (for example, enter occurred prior to wheel).
            if (contacts.ContainsKey(ptr.PointerId))
            {
                return;
            }

            // Add contact to dictionary.
            contacts[ptr.PointerId] = ptr;
            ++numActiveContacts;

            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;

            // Display pointer details.
            createInfoPop(e);
        }

        // Fires for for various reasons, including: 
        //    - User interactions
        //    - Programmatic capture of another pointer
        //    - Captured pointer was deliberately released
        // PointerCaptureLost can fire instead of PointerReleased. 
        private void Target_PointerCaptureLost(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Update event sequence.
            eventLog.Text += "\nPointer capture lost: " + ptr.PointerId;

            // Remove contact from dictionary.
            if (contacts.ContainsKey(ptr.PointerId))
            {
                contacts[ptr.PointerId] = null;
                contacts.Remove(ptr.PointerId);
                --numActiveContacts;
            }

            destroyInfoPop(ptr);

            if (contacts.Count == 0)
            {
                Target.Fill = new SolidColorBrush(Windows.UI.Colors.Black);
            }
            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;
        }

        // Fires for for various reasons, including: 
        //    - Touch contact canceled by pen coming into range of the surface.
        //    - The device doesn&#39;t report an active contact for more than 100ms.
        //    - The desktop is locked or the user logged off. 
        //    - The number of simultaneous contacts exceeded the number supported by the device.
        private void Target_PointerCanceled(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Update event sequence.
            eventLog.Text += "\nPointer canceled: " + ptr.PointerId;

            // Remove contact from dictionary.
            if (contacts.ContainsKey(ptr.PointerId))
            {
                contacts[ptr.PointerId] = null;
                contacts.Remove(ptr.PointerId);
                --numActiveContacts;
            }

            destroyInfoPop(ptr);

            if (contacts.Count == 0)
            {
                Target.Fill = new SolidColorBrush(Windows.UI.Colors.Black);
            }
            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;
        }

        private void Target_PointerExited(object sender, PointerRoutedEventArgs e)
        {
            Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

            // Update event sequence.
            eventLog.Text += "\nPointer exited: " + ptr.PointerId;

            // Remove contact from dictionary.
            if (contacts.ContainsKey(ptr.PointerId))
            {
                contacts[ptr.PointerId] = null;
                contacts.Remove(ptr.PointerId);
                --numActiveContacts;
            }

            // Update the UI and pointer details.
            destroyInfoPop(ptr);

            if (contacts.Count == 0)
            {
                Target.Fill = new SolidColorBrush(Windows.UI.Colors.Red);
            }
            
            // Prevent most handlers along the event route from handling the same event again.
            e.Handled = true;
        }

        void createInfoPop(PointerRoutedEventArgs e)
        {
            TextBlock pointerDetails = new TextBlock();
            Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
            pointerDetails.Name = ptrPt.PointerId.ToString();
            pointerDetails.Foreground = new SolidColorBrush(Windows.UI.Colors.White);
            pointerDetails.Text = queryPointer(ptrPt);

            TranslateTransform x = new TranslateTransform();
            x.X = ptrPt.Position.X + 20;
            x.Y = ptrPt.Position.Y + 20;
            pointerDetails.RenderTransform = x;

            Container.Children.Add(pointerDetails);
        }

        void destroyInfoPop(Windows.UI.Xaml.Input.Pointer ptr)
        {
            foreach (var pointerDetails in Container.Children)
            {
                if (pointerDetails.GetType().ToString() == "Windows.UI.Xaml.Controls.TextBlock")
                {
                    TextBlock _TextBlock = (TextBlock)pointerDetails;
                    if (_TextBlock.Name == ptr.PointerId.ToString())
                    {
                        Container.Children.Remove(pointerDetails);
                    }
                }
            }
        }

        void updateInfoPop(PointerRoutedEventArgs e)
        {
            foreach (var pointerDetails in Container.Children)
            {
                if (pointerDetails.GetType().ToString() == "Windows.UI.Xaml.Controls.TextBlock")
                {
                    TextBlock _TextBlock = (TextBlock)pointerDetails;
                    if (_TextBlock.Name == e.Pointer.PointerId.ToString())
                    {
                        // To get pointer location details, we need extended pointer info.
                        // We get the pointer info through the getCurrentPoint method
                        // of the event argument. 
                        Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
                        TranslateTransform x = new TranslateTransform();
                        x.X = ptrPt.Position.X + 20;
                        x.Y = ptrPt.Position.Y + 20;
                        pointerDetails.RenderTransform = x;
                        _TextBlock.Text = queryPointer(ptrPt);
                    }
                }
            }
        }

         String queryPointer(PointerPoint ptrPt)
         {
             String details = "";

             switch (ptrPt.PointerDevice.PointerDeviceType)
             {
                 case Windows.Devices.Input.PointerDeviceType.Mouse:
                     details += "\nPointer type: mouse";
                     break;
                 case Windows.Devices.Input.PointerDeviceType.Pen:
                     details += "\nPointer type: pen";
                     if (ptrPt.IsInContact)
                     {
                         details += "\nPressure: " + ptrPt.Properties.Pressure;
                         details += "\nrotation: " + ptrPt.Properties.Orientation;
                         details += "\nTilt X: " + ptrPt.Properties.XTilt;
                         details += "\nTilt Y: " + ptrPt.Properties.YTilt;
                         details += "\nBarrel button pressed: " + ptrPt.Properties.IsBarrelButtonPressed;
                     }
                     break;
                 case Windows.Devices.Input.PointerDeviceType.Touch:
                     details += "\nPointer type: touch";
                     details += "\nrotation: " + ptrPt.Properties.Orientation;
                     details += "\nTilt X: " + ptrPt.Properties.XTilt;
                     details += "\nTilt Y: " + ptrPt.Properties.YTilt;
                     break;
                 default:
                     details += "\nPointer type: n/a";
                     break;
             }

             GeneralTransform gt = Target.TransformToVisual(page);
             Point screenPoint;

             screenPoint = gt.TransformPoint(new Point(ptrPt.Position.X, ptrPt.Position.Y));
             details += "\nPointer Id: " + ptrPt.PointerId.ToString() +
                 "\nPointer location (parent): " + ptrPt.Position.X + ", " + ptrPt.Position.Y +
                 "\nPointer location (screen): " + screenPoint.X + ", " + screenPoint.Y;
             return details;
         }
    }
}
```

## <span id="Complete_example">
            </span>
            <span id="complete_example">
            </span>
            <span id="COMPLETE_EXAMPLE">
            </span>Xxxxxxxx xxxxxxx


**Xxx xxxxxxxxx xx xxx X\# xxxx xxx xxxx xxxxxxx.**
* [Xxx xxxxx xx xxxx xxxxxxx xxxxxxx, xxx Xxxxxxx xxxxxxxx xx xxx xxxxxx xx xxxx xxxx .](http://go.microsoft.com/fwlink/p/?LinkID=620302)
* [<span id="related_topics">
            </span>Xxxxxxx xxxxxxxx](http://go.microsoft.com/fwlink/p/?LinkID=620304)
* [Xxxxxxx](http://go.microsoft.com/fwlink/p/?LinkID=619894)
* [Xxxxx xxxxx xxxxxx](http://go.microsoft.com/fwlink/p/?LinkID=619895)
**Xxx xxxxxxx xxxxx xxxxxx**
* [Xxxx xxxxxxxxxxx xxxx xxxxxx](http://go.microsoft.com/fwlink/p/?linkid=226855)
* [[Xxxxx xxxxxxx xxxxxx](http://go.microsoft.com/fwlink/p/?LinkID=619895)](http://go.microsoft.com/fwlink/p/?linkid=231530)
* [**Xxxxxxx xxxxxxx**](http://go.microsoft.com/fwlink/p/?linkid=231605)
* [Xxxxx: XXXX xxxx xxxxx xxxxxx xxxxxx](http://go.microsoft.com/fwlink/p/?linkid=231590)
* [Xxxxx: Xxxxxx xxxxxxxxxxxx xxxxxx](http://go.microsoft.com/fwlink/p/?linkid=251717)
* [Xxxxx: Xxxxxxxxxxxxx xxx xxxxxxxx (X++) xxxxxx](http://go.microsoft.com/fwlink/p/?linkid=246570)
 

 




<!--HONumber=Mar16_HO4-->
