---
xxxxx: Xxxxxxx xxxxx xxxxxx xx x xxx
xxxxxxxxxxx: Xxxxxxx xxxxx-xxxxx xx xxxxxx xxxxx xxxxxx xx x xxx xx xxxxx xxxx xxxxxxx. Xxx xxxx xxxxxxx xx xxxxxxx xxxxxxxxxxx xxxxxxxxxxx xxxx xx xxxxxxx xxxx, xxxxxxxxxx xxxx, xx xxxxxxx xxxx; xx xxx xxxx xxxxxxx xx xxxxxxx xxx xxxxxxx xxx xxxxxxxx.
xx.xxxxxxx: YYYXXYXY-XYYX-YXYX-XXYY-YXYXYYXYYXXX
---

# Xxxxxxx xxxxx xxxxxx xx x xxx


\[ Xxxxxxx xxx XXX xxxx xx Xxxxxxx YY. Xxx Xxxxxxx Y.x xxxxxxxx, xxx xxx [xxxxxxx](http://go.microsoft.com/fwlink/p/?linkid=619132) \]


Xxxxxxx xxxxx-xxxxx xx xxxxxx xxxxx xxxxxx xx x xxx xx xxxxx xxxx xxxxxxx. Xxx xxxx xxxxxxx xx xxxxxxx xxxxxxxxxxx xxxxxxxxxxx xxxx xx xxxxxxx xxxx, xxxxxxxxxx xxxx, xx xxxxxxx xxxx; xx xxx xxxx xxxxxxx xx xxxxxxx xxx xxxxxxx xxx xxxxxxxx.

**Xxx** Xx xxxxx xxxx xxxxx xxxxx xxxx xx xxxx xxx, xxxxxxxx xxx xxxxxxxxx xxxxxx xxxx xxx [Xxxxxxx-xxxxxxxxx-xxxxxxx xxxx](http://go.microsoft.com/fwlink/p/?LinkId=619979) xx XxxXxx.

-   [Xxxxxxxxx Xxxxxxx Xxxxxxxx (XXX) xxx xxxxxx](http://go.microsoft.com/fwlink/p/?LinkId=619977)

## Xxxxx xxxxx xxxxxxxx


Xxx xxxxxxxx xxxx xx Xxxxx Xxxx xxx Xxxx Xxxx xxx xxxx xxxx xxxxxx xxxxx xxx xxxxx xxxxxxxxx xxx xxxxxxx. Xxxxx xxxxx xxx YYY xxxxxx xx YYY xxxxxx xx xxxx, xxx xxx xxx-xxxxxxxx xx xxxxxxxx xxxxxx xx xxxxxx. Xxxx xxxxx-xxxxx xxxxxxxx xxxx xxxxxxx xxx-xxxxx xxxx xxxx'x xxx xxxx xxxxx. Xxx xxxx xxxxxxx xx xxxxxxxx xxxxx-xxxxx xxxxx, xx xx xxxxxx xxxx xxx xxxxxx xxxxx, xxx xxxxxxx xxxx xx xxx xxx xxxxxxxxx xx xxx [**XxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637004).

**Xxxxxxxxx**  
Xxxx xxx xxx xxxx xxxxxxx, xxx xxx'x xxxx xx xxxxx xxxx xx xxxxxxx xx xx xxxxxxxx xxxxxxxxxx xxxxx. Xxx [**XxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637004) xxxxxxxx xxxxx xx xx xxxxx xxxx. Xxxx xxxxxxx xxxxxxxxx xxx X xxx X xxxxxxxxxxx xxx xxx xxxx xxxxx xxx xxx xxxxxxxxxx xxxx. Xxx xxxxxx xxxxxxx xxx xxxxxx xx xxx Xxx xx xxxxxxxx xx xxx xx xxxxxxxx xxx xxxxx xx xxx **XxxXxxxxxXxxxxx** xxxxxxxx. Xxxx xx, xxx xxxxxx xxxxxxxxxxx xxxxxxxxxx xx xxx xxxx Xxx xx xxxxxxxx xx xxxxxxxx xxxxx xx xxxx xxx X xxx X xxxxxxxxxxx xxx xxx xxxx xxxxx xxx xxxx xxxx.

Xxxx'x xx xxxxxxx xx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636992) xxxxxxxx xxx xx [**XxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636986) xxxx xxxxx xxx xxxxxxxxxxx xxxxxxxxxx xxx xxx X xxx X xxxxxxxxxxx xxx xxx xxxx xxxxx.

``` syntax
    http://www.<web service name>.com/z={zoomlevel}&x={x}&y={y}
```

 

(Xxx X xxx X xxxxxxxxxxx xxxxxxxxx xxx xxxxxxxx xx xxx xxxxxxxxxx xxxx xxxxxx xxx xxx xx xxx xxxxx xx xxx xxxxxxxxx xxxxx xx xxxxxx. Xxx xxxx xxxxxxxxx xxxxxx xxxxxx xxxx {Y, Y} xx xxx xxxxx xxxx xxxxxx xx xxx xxx. Xxx xxxxxxx, xxx xxxx xx {Y, Y} xx xx xxx xxxxxx xxxxxx xx xxx xxxxx xxx xx xxx xxxx xx xxxxx.)

Xxx xxxx xxxx xxxxx xxx xxxx xxxxxx xxxx xx xxxxxxx xxxxxxxx, xxx [Xxxx Xxxx Xxxx Xxxxxx](http://go.microsoft.com/fwlink/p/?LinkId=626692).

### Xxxxxxx xxxxx xxxx x xxxx xxxxxx

Xxxxxxx xxxxx xxxxxx xxxx x xxxx xxxxxx xx x xxx xx xxxxx xxx [**XxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637141).

1.  Xxxxxxxxxxx xxx xx xxx xxxxx xxxx xxxx xxxxxx xxxxxxx xxxx xxxxxxx xxxx [**XxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637141).

    -   [**XxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636986)
    -   [**XxxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636994)
    -   [**XxxxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636983)

    Xxxxxxxxx xxx **XxxXxxxxxXxxxxx** xx xxx xx xxxxxxx xxx xxxxx xx xxxxxxxxx xxxxxxxxxxx xxxxxxxxxx xx xxx xxxx Xxx xx xxxxxxxx.

    Xxx xxxxxxxxx xxxxxxx xxxxxxxxxxxx xx [**XxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636986). Xxxx xxxxxxx xxxxxxxxx xxx xxxxx xx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636992) xx xxx xxxxxxxxxxx xx xxx **XxxxXxxXxxxXxxxXxxxxx**.

    ```cs
        HttpMapTileDataSource dataSource = new HttpMapTileDataSource(
          "http://www.<web service name>.com/z={zoomlevel}&amp;x={x}&amp;y={y}");
    ```

2.  Xxxxxxxxxxx xxx xxxxxxxxx x [**XxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637144). Xxxxxxx xxx [**XxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637141) xxxx xxx xxxxxxxxxx xx xxx xxxxxxxx xxxx xx xxx [**XxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637149) xx xxx **XxxXxxxXxxxxx**.

    Xxx xxxxxxxxx xxxxxxx xxxxxxxxx xxx [**XxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637149) xx xxx xxxxxxxxxxx xx xxx [**XxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637144).

    ```cs
        MapTileSource tileSource = new MapTileSource(dataSource);
    ```

    Xxx xxx xxxxxxxx xxx xxxxxxxxxx xx xxxxx xxx xxxxx xxx xxxxxxxxx xx xxxxx xxxxxxxxxx xx xxx [**XxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637144).

    -   Xxxxxxx xxxxx xxxx xxxxxx x xxxxxxxx xxxxxxxxxx xxxx xx xxxxxxxxx x xxxxx xxx xxx [**Xxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637147) xxxxxxxx.
    -   Xxxxxxx xxxxx xxxx xx xxxxxxx xxxxxx xx xxxxxx xx xxxxxxxxx x xxxxx xxx xxx [**XxxxXxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637171) xxxxxxxx.

    Xxxxxxxxxx, xxxxxxxxx xxxxx xxxxxxxxxx xx xxx [**XxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637144) xxxx xxxxxx xxx xxxxxxx xx xxx xxxxxxx xx xxx xxxxx, xxxx xx [**Xxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637157), [**XxxxxXxxxxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637145), [**XxXxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637153), xxx [**XxXxxxxxxxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637155).

3.  Xxx xxx [**XxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637144) xx xxx [**XxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637053) xxxxxxxxxx xx xxx [**XxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637004).

    ```cs
         MapControl1.TileSources.Add(tileSource);
    ```

## Xxxxxxx xxxxx xxxx x xxx xxxxxxx


Xxxxxxx xxxxx xxxxxx xxxxxxxxx xxxx x xxx xxxxxxx xx xxxxx xxx [**XxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636986).

1.  Xxxxxxxxxxx xx [**XxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636986).
2.  Xxxxxxx xxx xxxxxx xx xxx Xxx xxxx xxx xxx xxxxxxx xxxxxxx xx xxx xxxxx xx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636992) xxxxxxxx. Xx xxxxxx xxxx xxxxx, xxxxxx xxxxxxxxxxx xxxxxxxxxx xx xxx xxxx Xxx. Xxx xxxxxxx, xx xxx xxxxxxxxx xxxx xxxxxx, xxx xxxxx xx xxx **XxxXxxxxxXxxxxx** xx:

    ``` syntax
        http://www.<web service name>.com/z={zoomlevel}&x={x}&y={y}
    ```

    Xxx xxx xxxxxxx xxx xx xxxxxxx x Xxx xxxx xxxxxxxx xxx xxxxxxxxxxx xxxxxxxxxx {x}, {x}, xxx {xxxxxxxxx}. Xxxx xxx xxxxxxxx (xxx xxxxxxx, Xxxxx, Xxxx, xxx Xxxxxx) xxxxxxx Xxxx xx xxxx xxxxxx. Xx xxx xxx xxxxxxx xxxxxxxx xxxxxxxxxx xxxxxxxxx xxxx xxxx'x xxxxxxxxx xxxx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636992) xxxxxxxx, xxxx xxx xxxx xx xxxxxx x xxxxxx Xxx. Xxxxxx xxx xxxxxx x xxxxxx Xxx xx xxxxxxxx xxx [**XxxXxxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636993) xxxxx. Xxx xxxx xxxx, xxx xxx [Xxxxxxx x xxxxxx XXX](#customuri) xxxxxxx xxxxx xx xxxx xxxxx.

3.  Xxxx, xxxxxx xxx xxxxxxxxx xxxxx xxxxxxxxx xxxxxxxxxx xx xxx [Xxxxx xxxxx xxxxxxxx](#tileintro).

Xxx xxxxxxxxx xxxxxxx xxxxxxxx xxxxx xxxx x xxxxxxxxxx xxx xxxxxxx xx x xxx xx Xxxxx Xxxxxxx. Xxx xxxxx xx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636992) xx xxxxxxxxx xx xxx xxxxxxxxxxx xx xxx [**XxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636986). Xx xxxx xxxxxxx, xxxxx xxx xxxx xxxxxxxxx xxxxxx xxx xxxxxxxxxx xxxxxxxxxx xxxxxxxxx xx xxx xxxxxxxx [**Xxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637147) xxxxxxxx.

> [!xxx xxxxx="xxxxxxXxxxXxxxxxxx"]
```csharp
        private void AddHttpMapTileSource()
        {
            // Create the bounding box in which the tiles are displayed.
            // This example represents North America.
            BasicGeoposition northWestCorner =
                new BasicGeoposition() { Latitude = 48.38544, Longitude = -124.667360 };
            BasicGeoposition southEastCorner =
                new BasicGeoposition() { Latitude = 25.26954, Longitude = -80.30182 };
            GeoboundingBox boundingBox = new GeoboundingBox(northWestCorner, southEastCorner);

            // Create an HTTP data source.
            // This example retrieves tiles from a fictitious web service.
            HttpMapTileDataSource dataSource = new HttpMapTileDataSource(
                "http://www.<web service name>.com/z={zoomlevel}&amp;x={x}&amp;y={y}");

            // Optionally, add custom HTTP headers if the web service requires them.
            dataSource.AdditionalRequestHeaders.Add("header name", "header value");

            // Create a tile source and add it to the Map control.
            MapTileSource tileSource = new MapTileSource(dataSource);
            tileSource.Bounds = boundingBox;
            MapControl1.TileSources.Add(tileSource);
        }
```
```cpp
void MainPage::AddHttpMapTileSource()
{
       BasicGeoposition northWest = { 48.38544, -124.667360 };
       BasicGeoposition southEast = { 25.26954, -80.30182 };
       GeoboundingBox^ boundingBox = ref new GeoboundingBox(northWest, southEast);

       auto dataSource = ref new Windows::UI::Xaml::Controls::Maps::HttpMapTileDataSource(
             "http://www.<web service name>.com/z={zoomlevel}&amp;x={x}&amp;y={y}");

       dataSource->AdditionalRequestHeaders->Insert("header name", "header value");

       auto tileSource = ref new Windows::UI::Xaml::Controls::Maps::MapTileSource(dataSource);
       tileSource->Bounds = boundingBox;

       this->MapControl1->TileSources->Append(tileSource);
}
```

## Xxxxxxx xxxxx xxxx xxxxx xxxxxxx


Xxxxxxx xxxxx xxxxxx xxxxxx xx xxxxx xx xxxxx xxxxxxx xx xxxxx xxx [**XxxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636994). Xxxxxxxxx, xxx xxxxxxx xxx xxxxxxxxxx xxxxx xxxxx xxxx xxxx xxx.

1.  Xxxxxxxxxxx x [**XxxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636994).
2.  Xxxxxxx xxx xxxxxx xx xxx xxxx xxxxx xx xxx xxxxx xx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636998) xxxxxxxx. Xx xxxxxx xxxx xxxxx, xxxxxx xxxxxxxxxxx xxxxxxxxxx xx xxx xxxx xxxxxxxx. Xxx xxxxxxx, xx xxx xxxxxxxxx xxxx xxxxxx, xxx xxxxx xx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636992) xx:

    ``` syntax
        Tile_{zoomlevel}_{x}_{y}.png
    ```

    Xx xxx xxxxxx xx xxx xxxx xxxxx xxxxxxxx xxxxxxxxxx xxxxxxxxx xxxx xxxx'x xxxxxxxxx xxxx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636998) xxxxxxxx, xxxx xxx xxxx xx xxxxxx x xxxxxx Xxx. Xxxxxx xxx xxxxxx x xxxxxx Xxx xx xxxxxxxx xxx [**XxxXxxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637001) xxxxx. Xxx xxxx xxxx, xxx xxx [Xxxxxxx x xxxxxx XXX](#customuri) xxxxxxx xxxxx xx xxxx xxxxx.

3.  Xxxx, xxxxxx xxx xxxxxxxxx xxxxx xxxxxxxxx xxxxxxxxxx xx xxx [Xxxxx xxxxx xxxxxxxx](#tileintro).

Xxx xxx xxx xxx xxxxxxxxx xxxxxxxxx xxx xxxxxxxxx xx xxxx xxxxx xxxx xxxxx xxxxxxx:

| Xxx | Xxxx xxxx |
|---------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| xx-xxxx:/// | Xxxxxx xx xxx xxxx xx xxx xxx'x xxxxxxxxxxxx xxxxxx. |
|  | Xxxx xx xxx xxxxxxxx xxxxxxxxxx xx xxx [Xxxxxxx.XxxxxxxxxXxxxxxxx](https://msdn.microsoft.com/library/windows/apps/br224681) xxxxxxxx. |
| xx-xxxxxxx:///xxxxx | Xxxxxx xx xxx xxxx xx xxx xxx'x xxxxx xxxxxxx. |
|  | Xxxx xx xxx xxxxxxxx xxxxxxxxxx xx xxx [XxxxxxxxxxxXxxx.XxxxxXxxxxx](https://msdn.microsoft.com/library/windows/apps/br241621) xxxxxxxx. |
| xx-xxxxxxx:///xxxx | Xxxxxx xx xxx xxx'x xxxx xxxxxx. |
|  | Xxxx xx xxx xxxxxxxx xxxxxxxxxx xx xxx [XxxxxxxxxxxXxxx.XxxxxxxxxXxxxxx](https://msdn.microsoft.com/library/windows/apps/br241629) xxxxxxxx. |

 

Xxx xxxxxxxxx xxxxxxx xxxxx xxxxx xxxx xxx xxxxxx xx xxxxx xx xxx xxx'x xxxxxxxxxxxx xxxxxx xx xxxxx xxx `ms-appx:///` xxxxxxxx. Xxx xxxxx xxx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636998) xx xxxxxxxxx xx xxx xxxxxxxxxxx xx xxx [**XxxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636994). Xx xxxx xxxxxxx, xxxxx xxx xxxx xxxxxxxxx xxxx xxx xxxx xxxxx xx xxx xxx xx xxxxxx xxx xxxxx xxxxxxxxx xx xxx xxxxxxxx [**XxxxXxxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637171) xxxxxxxx.

```csharp
        void AddLocalMapTileSource()
        {
            // Specify the range of zoom levels
            // at which the overlaid tiles are displayed.
            MapZoomLevelRange range;
            range.Min = 11;
            range.Max = 20;

            // Create a local data source.
            LocalMapTileDataSource dataSource = new LocalMapTileDataSource(
                "ms-appx:///TileSourceAssets/Tile_{zoomlevel}_{x}_{y}.png");

            // Create a tile source and add it to the Map control.
            MapTileSource tileSource = new MapTileSource(dataSource);
            tileSource.ZoomLevelRange = range;
            MapControl1.TileSources.Add(tileSource);
        }
```

## Xxxxxxx x xxxxxx XXX


Xx xxx xxxxxxxxxxx xxxxxxxxxx xxxxxxxxx xxxx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636992) xxxxxxxx xx xxx [**XxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636986) xx xxx [**XxxXxxxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636998) xxxxxxxx xx xxx [**XxxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636994) xxxx'x xxxxxxxxxx xx xxxxxxxx xxxx xxxxx, xxxx xxx xxxx xx xxxxxx x xxxxxx Xxx. Xxxxxx xxx xxxxxx x xxxxxx Xxx xx xxxxxxxxx x xxxxxx xxxxxxx xxx xxx **XxxXxxxxxxxx** xxxxx. Xxx **XxxXxxxxxxxx** xxxxx xx xxxxxx xxx xxxx xxxxxxxxxx xxxx.

1.  Xx xxxx xxxxxx xxxxxxx xxx xxx **XxxXxxxxxxxx** xxxxx, xxxxxxx xxx xxxxxxxx xxxxxx xxxxxxxxx xxxx xxx [**X**](https://msdn.microsoft.com/library/windows/apps/dn610743), [**X**](https://msdn.microsoft.com/library/windows/apps/dn610744), xxx [**XxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/dn610745) xxxxxxxxxx xx xxx [**XxxXxxxXxxXxxxxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/dn637177) xx xxxxxx xxx xxxxxx Xxx.
2.  Xxxxxx xxx xxxxxx Xxx xx xxx [**Xxx**](https://msdn.microsoft.com/library/windows/apps/dn610748) xxxxxxxx xx xxx [**XxxXxxxXxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637173), xxxxx xx xxxxxxxxx xx xxx [**Xxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637179) xxxxxxxx xx xxx [**XxxXxxxXxxXxxxxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/dn637177).

Xxx xxxxxxxxx xxxxxxx xxxxx xxx xx xxxxxxx x xxxxxx Xxx xx xxxxxxxx x xxxxxx xxxxxxx xxx xxx **XxxXxxxxxxxx** xxxxx. Xx xxxx xxxxx xxx xx xxxxxxxxx xxx xxxxxxxx xxxxxxx xx xxx xxxx xx xx xxxxxxxxx xxxxxxxxxxxxxx xx xxxxxx xxx xxxxxx Xxx.

```csharp
using Windows.UI.Xaml.Controls.Maps;
using System.Threading.Tasks;
...
            var httpTileDataSource = new HttpMapTileDataSource();
            // Attach a handler for the UriRequested event.
            httpTileDataSource.UriRequested += HandleUriRequestAsync;
            MapTileSource httpTileSource = new MapTileSource(httpTileDataSource);
            MapControl1.TileSources.Add(httpTileSource);
...
        // Handle the UriRequested event.
        private async void HandleUriRequestAsync(HttpMapTileDataSource sender,
            MapTileUriRequestedEventArgs args)
        {
            // Get a deferral to do something asynchronously.
            // Omit this line if you don&#39;t have to do something asynchronously.
            var deferral = args.Request.GetDeferral();

            // Get the custom Uri.
            var uri = await GetCustomUriAsync(args.X, args.Y, args.ZoomLevel);

            // Specify the Uri in the Uri property of the MapTileUriRequest.
            args.Request.Uri = uri;

            // Notify the app that the custom Uri is ready.
            // Omit this line also if you don&#39;t have to do something asynchronously.
            deferral.Complete();
        }

        // Create the custom Uri.
        private async Task<Uri> GetCustomUriAsync(int x, int y, int zoomLevel)
        {
            // Do something asynchronously to create and return the custom Uri.        }
        }
```

## Xxxxxxx xxxxx xxxx x xxxxxx xxxxxx


Xxxxxxx xxxxxx xxxxx xx xxxxx xxx [**XxxxxxXxxXxxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636983). Xxxxxx xxxxx xxxxxxxxxxxxxxxx xx xxxxxx xx xxx xxx, xx xxxxx xxxx xxx xxxx xx xxxx xxxxxxxx xxxxx xxxx xxxxxxx xxxxxx.

Xx xxxxxx xx xxxx xxxxxx xxxxx, xxxxxxx x xxxxxx xxxxxxx xxx xxx [**XxxxxxXxxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636984) xxxxx. Xxx **XxxxxxXxxxxxxxx** xxxxx xx xxxxxx xxx xxxx xxxxxxxxxx xxxx.

1.  Xx xxxx xxxxxx xxxxxxx xxx xxx [**XxxxxxXxxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn636984) xxxxx, xxxxxxx xxx xxxxxxxx xxxxxx xxxxxxxxx xxxx xxx [**X**](https://msdn.microsoft.com/library/windows/apps/dn637135), [**X**](https://msdn.microsoft.com/library/windows/apps/dn637136), xxx [**XxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637137) xxxxxxxxxx xx xxx [**XxxXxxxXxxxxxXxxxxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/dn637132) xx xxxxxx xx xxxxxxxx x xxxxxx xxxx.
2.  Xxxxxx xxx xxxxxx xxxx xx xxx [**XxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/dn637140) xxxxxxxx xx xxx [**XxxXxxxXxxxxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637128), xxxxx xx xxxxxxxxx xx xxx [**Xxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637134) xxxxxxxx xx xxx [**XxxXxxxXxxxxxXxxxxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/dn637132). Xxx **XxxxxXxxx** xxxxxxxx xx xx xxxx [**XXxxxxxXxxxxxXxxxxxXxxxxxxxx**](https://msdn.microsoft.com/library/windows/apps/hh701664).

Xxx xxxxxxxxx xxxxxxx xxxxx xxx xx xxxxxxx xxxxxx xxxxx xx xxxxxxxx x xxxxxx xxxxxxx xxx xxx **XxxxxxXxxxxxxxx** xxxxx. Xxxx xxxxxxx xxxxxxx xxxxxxxxx xxx xxxxx xxxx xxx xxxxxxxxx xxxxxx. Xxx xxxxxxx xxxxxxx xxx [**X**](https://msdn.microsoft.com/library/windows/apps/dn637135), [**X**](https://msdn.microsoft.com/library/windows/apps/dn637136), xxx [**XxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637137) xxxxxxxxxx xx xxx [**XxxXxxxXxxxxxXxxxxxxxxXxxxxXxxx**](https://msdn.microsoft.com/library/windows/apps/dn637132). Xxxxxxxx xxxx xx xxx x xxxx xxxxx xxxxxxx, xxx xxxxxxx xxxxxxxxxxxx xxx xxx xxx xxxxxx xx-xxxxxx xxxxxx xxxxx xx xxx xxx. Xxx xxxxxxx xxxx xxxxx xxx xx xxxxxxxxx xxx xxxxxxxx xxxxxxx xx xxx xxxx xx xx xxxxxxxxx xxxxxxxxxxxxxx xx xxxxxx xxx xxxxxx xxxxx.

```csharp
using Windows.UI.Xaml.Controls.Maps;
using Windows.Storage.Streams;
using System.Threading.Tasks;
...
        CustomMapTileDataSource customDataSource = new CustomMapTileDataSource();
        // Attach a handler for the BitmapRequested event.
        customDataSource.BitmapRequested += customDataSource_BitmapRequestedAsync;
        customTileSource = new MapTileSource(customDataSource);
        MapControl1.TileSources.Add(customTileSource);
...
        // Handle the BitmapRequested event.
        private async void customDataSource_BitmapRequestedAsync(
            CustomMapTileDataSource sender,
            MapTileBitmapRequestedEventArgs args)
        {
            var deferral = args.Request.GetDeferral();
            args.Request.PixelData = await CreateBitmapAsStreamAsync();
            deferral.Complete();
        }

        // Create the custom tiles.
        // This example creates red tiles that are partially opaque.
        private async Task<RandomAccessStreamReference> CreateBitmapAsStreamAsync()
        {
            int pixelHeight = 256;
            int pixelWidth = 256;
            int bpp = 4;

            byte[] bytes = new byte[pixelHeight * pixelWidth * bpp];

            for (int y = 0; y < pixelHeight; y++)
            {
                for (int x = 0; x < pixelWidth; x++)
                {
                    int pixelIndex = y * pixelWidth + x;
                    int byteIndex = pixelIndex * bpp;

                    // Set the current pixel bytes.
                    bytes[byteIndex] = 0xff;        // Red
                    bytes[byteIndex + 1] = 0x00;    // Green
                    bytes[byteIndex + 2] = 0x00;    // Blue
                    bytes[byteIndex + 3] = 0x80;    // Alpha (0xff = fully opaque)
                }
            }

            // Create RandomAccessStream from byte array.
            InMemoryRandomAccessStream randomAccessStream =
                new InMemoryRandomAccessStream();
            IOutputStream outputStream = randomAccessStream.GetOutputStreamAt(0);
            DataWriter writer = new DataWriter(outputStream);
            writer.WriteBytes(bytes);
            await writer.StoreAsync();
            await writer.FlushAsync();
            return RandomAccessStreamReference.CreateFromStream(randomAccessStream);
        }
```

```ManagedCPlusPlus
InMemoryRandomAccessStream^ TileSources::CustomRandomAccessSteram::get()
{
       int pixelHeight = 256;
       int pixelWidth = 256;
       int bpp = 4;
 
       Array<byte>^ bytes = ref new Array<byte>(pixelHeight * pixelWidth * bpp);
       
       for (int y = 0; y < pixelHeight; y++)
       {
              for (int x = 0; x < pixelWidth; x++)
              {
                     int pixelIndex = y * pixelWidth + x;
                     int byteIndex = pixelIndex * bpp;
 
                     // Set the current pixel bytes.
                     bytes[byteIndex] = (byte)(std::rand() % 256);        // Red
                     bytes[byteIndex + 1] = (byte)(std::rand() % 256);    // Green
                     bytes[byteIndex + 2] = (byte)(std::rand() % 256);    // Blue
                     bytes[byteIndex + 3] = (byte)((std::rand() % 56) + 200);    // Alpha (0xff = fully opaque)
              }
       }
 
       // Create RandomAccessStream from byte array.
       InMemoryRandomAccessStream^ randomAccessStream = ref new InMemoryRandomAccessStream();
       IOutputStream^ outputStream = randomAccessStream->GetOutputStreamAt(0);
       DataWriter^ writer = ref new DataWriter(outputStream);
       writer->WriteBytes(bytes);
 
       create_task(writer->StoreAsync()).then([writer](unsigned int)
       {
              create_task(writer->FlushAsync());
       });
 
       return randomAccessStream;
}
```

## Xxxxxxx xxx xxxxxxx xxx


Xx xxxxxxx xxx xxxxxxx xxx xxxxxxxx xxxx xxxxx-xxxxx xx xxxxxx xxxxx:

-   Xxxxxxx [**XxxXxxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637143).**XxxxxxxxxxXxxxxxxxxxx** xx xxx xxxxx xx xxx [**Xxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637157) xxxxxxxx xx xxx [**XxxXxxxXxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637144).
-   Xxxxxxx [**XxxXxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637127).**Xxxx** xx xxx xxxxx xx xxx [**Xxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637051) xxxxxxxx xx xxx [**XxxXxxxxxx**](https://msdn.microsoft.com/library/windows/apps/dn637004).

## Xxxxxxx xxxxxx

* [Xxxx Xxxx Xxxxxxxxx Xxxxxx](https://www.bingmapsportal.com/)
* [XXX xxx xxxxxx](http://go.microsoft.com/fwlink/p/?LinkId=619977)
* [Xxxxxx xxxxxxxxxx xxx xxxx](https://msdn.microsoft.com/library/windows/apps/dn596102)
* [Xxxxx YYYY xxxxx: Xxxxxxxxxx Xxxx xxx Xxxxxxxx Xxxxxx Xxxxx, Xxxxxx, xxx XX xx Xxxx Xxxxxxx Xxxx](https://channel9.msdn.com/Events/Build/2015/2-757)
* [XXX xxxxxxx xxx xxxxxx](http://go.microsoft.com/fwlink/p/?LinkId=619982)

<!--HONumber=Mar16_HO1-->
